<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/favicon.ico">
  <title>Windows通用应用程序开发(三) | 浅梦博客</title>
  <meta name="author" content="浅梦风凌" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="UWP" />
  
  <meta name="description" content="8.1变化特效当使用Canvas布局时,可以使用Canvas.Left和Canvas.Top属性改变一个对象相对Canvas的位置,当使用Grid或StackPanel布局时,可以使用Margin属性声明元素的各方向间距,然而在这些属性中并不包括直接去改变某个Win10UI对象形状的方法,变化的实现会依赖于RenderTransform类,RenderTransform包含的变换属性成员就是专门来">
<meta property="og:type" content="article">
<meta property="og:title" content="Windows通用应用程序开发(三)">
<meta property="og:url" content="https://drfengyu.github.io/qm/50fedeca.html">
<meta property="og:site_name" content="浅梦博客">
<meta property="og:description" content="8.1变化特效当使用Canvas布局时,可以使用Canvas.Left和Canvas.Top属性改变一个对象相对Canvas的位置,当使用Grid或StackPanel布局时,可以使用Margin属性声明元素的各方向间距,然而在这些属性中并不包括直接去改变某个Win10UI对象形状的方法,变化的实现会依赖于RenderTransform类,RenderTransform包含的变换属性成员就是专门来">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://drfengyu.github.io/images/favicon.ico">
<meta property="article:published_time" content="2022-12-10T00:54:21.000Z">
<meta property="article:modified_time" content="2023-11-07T03:10:58.857Z">
<meta property="article:author" content="浅梦风凌">
<meta property="article:tag" content="UWP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://drfengyu.github.io/images/favicon.ico">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" type="text/css" media="(prefers-color-scheme: dark)">
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://unpkg.com/nprogress@0.2.0/nprogress.css" type="text/css" media="all">
  
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>
  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    <script src="https://unpkg.com/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner.webp');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg.webp');
        }
      }
    
  </style>
  
  <script src="/live2d-widget/autoload.js"></script>
<div style="display: none;">
    <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
    <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
</div>

<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="浅梦博客" type="application/atom+xml">
</head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>档案馆</a></li>
                                    
                                
                                    
                                        <li><a href="/friends/"><i class="fa fa-paw"></i>好伙伴</a></li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-link"></i>链接</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://drfengling.github.io/">浅梦博客</a></li>
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://github.com/Drfengling/Drfengling.github.io">项目链接</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-music" aria-hidden="true"></i>歌单</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a href="/playlist/">飙升榜</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">浅梦博客</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>浅梦博客</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article>
    
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center">Windows通用应用程序开发(三)</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><i class="fa fa-calendar"></i> 2022-12-10</li>
                <li><i class="fa fa-user"></i> 作者 浅梦风凌</li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~366.04K
                    
                    字
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1699326658857"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
                <div class="kratos-post-inner-toc">
                    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E7%BC%96%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">动画编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%92%8C%E6%A8%A1%E6%9D%BF"><span class="toc-number">2.</span> <span class="toc-text">样式和模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">3.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E7%BC%96%E7%A8%8B"><span class="toc-number">4.</span> <span class="toc-text">图表编程</span></a></li></ol>
                </div>
            
            <hr />
            <p>8.1变化特效<br>当使用Canvas布局时,可以使用Canvas.Left和Canvas.Top属性改变一个对象相对Canvas的位置,当使用Grid或StackPanel布局时,可以使用Margin属性声明元素的各方向间距,然而在这些属性中并不包括直接去改变某个Win10UI对象形状的方法,变化的实现会依赖于RenderTransform类,RenderTransform包含的变换属性成员就是专门来改变Win10UI对象形状的,它可以实现对元素拉伸,旋转,扭曲等效果,同时变换特效也常用于辅助产生各种动画效果.<br>8.11.变换的原理二维变换矩阵<br>变换定义如何将一个坐标空间中的点映射或变化到另一个坐标空间,在Windows 10里通过仿射变换实现.<br>仿射变换可以理解为对坐标进行放缩,旋转,平移后取得新坐标的值,仿射变换可以让UI元素产生视觉的旋转,它的原理并不是让UI元素的位置变化,而是变化平面X,Y的坐标系,间接的让UI元素的坐标发生转变,而如何让坐标系的旋转精确的控制UI元素的旋转,这就是仿射变换矩阵的作用了.<br>Windows10变换映射是由变换Matrix来描述,Matrix是表示用于二维空间变换的3X3仿射变换矩阵,3X3矩阵用于在二维平面中进行变换.通过让仿射变换矩阵相乘可形成任意数目的线性变换,例如先旋转扭曲,再平移,仿射矩阵变换用于操作二维平面中的对象或坐标系,由于仿射变换时,平行的边依然平行,所以我们无法对一个矩形的位图进行随意变换,比如无法拉伸一个角,也无法把它变成梯形,仿射变换矩阵的最后一列等于0，0，1,<br>因此只需指定前两列的成员.矢量用行矢量表示<br>TranslateTransform 能够让某对象的位置发生平移变化<br>RotateTransform 能够让某对象产生旋转变化,根据中心点进行顺时针旋转或逆时针旋转<br>ScaleTransform 能够让某对象产生缩放变化<br>SkewTransform 能够让某对象产生扭曲变化<br>TransformGroup 能够让某对象缩放,旋转,扭曲等变化效果合并起来使用.<br>MatrixTransform 能够让某对象通过矩阵算法实现更为复杂的变形<br>变换元素包括平移变换,旋转变换,缩放变换,扭曲变换,矩形变换和组合变换元素,变换特效常用于在不改变自身的情况下,使对象产生变形效果,所以变换元素常辅助产生win10中的各种动画效果<br>8.12.平移变换<br>TranslateTransform 能够让某对象的位置发生平移变化,按指定的X和Y移动元素,TranslateTransform类对移动不支持绝对定位的面板内的元素特别有用.<br>通过将TranslateTransform应用到元素的RenderTransform属性,可以移动StackPanel内的元素,使用TranslateTransform的X属性指定将元素沿X轴移动的量,使用Y属性指定将元素沿Y轴移动的量,最后将TranslateTransform应用于元素的RenderTransform属性.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                        &lt;TranslateTransform X=<span class="string">&quot;50&quot;</span> Y=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                &lt;/Rectangle&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br></pre></td></tr></table></figure>
<p>8.13.旋转变换(RotateTransform)<br>RotateTransform:能够让某对象产生旋转变化,根据中心点进行顺时针旋转或逆时针旋转,按指定的Angle旋转元素,RotateTransform围绕点CenterX和CenterY将对象旋转指定的Angle.在使用RotateTransform时,请注意变换将围绕点(0,0)旋转某个特定对象的坐标系.因此,根据对象的位置,对象可能不会就地围绕其中心旋转.例如,如果对象位于X轴上距0为200个单位的位置,旋转30°可以让该对象沿着原点为圆心,以200为半径所画的圆摆动30°.若要就地旋转某个对象,请将RotateTransform的CenterX和CenterY设置为该对象的旋转中心.<br>以Polyline对象的左上角为旋转点将其旋转了45°.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;Canvas height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">	&lt;!--以Polyline 对象的左上角(0,0)为旋转点将其旋转了45°--&gt;</span><br><span class="line">	&lt;Polyline Points=<span class="string">&quot;25,25,0,50,25,75,50,50,25,25,25,0&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span></span><br><span class="line">StrokeThickness=<span class="string">&quot;10&quot;</span> Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span>&gt;</span><br><span class="line">	&lt;Polyline.RenderTransform&gt;</span><br><span class="line">		&lt;RotateTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">	&lt;/Polyline.RenderTransform&gt;</span><br><span class="line">&lt;/Canvas&gt;</span><br><span class="line">&lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                        &lt;Polyline Points=<span class="string">&quot;25,25,0,50,25,75,50,50,25,25,25,0&quot;</span></span><br><span class="line">                                  Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;10&quot;</span> Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span>&gt;</span><br><span class="line">                            &lt;Polyline.RenderTransform&gt;</span><br><span class="line">                                &lt;RotateTransform CenterX=<span class="string">&quot;25&quot;</span> CenterY=<span class="string">&quot;50&quot;</span> Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Polyline.RenderTransform&gt;</span><br><span class="line">                        &lt;/Polyline&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br></pre></td></tr></table></figure>
<p>8.14.缩放变换(ScaleTransform)<br>ScaleTransform 能够让某对象产生缩放变化,按指定的ScaleX和ScaleY量按比例缩放元素.使用ScaleX和ScaleY量按比例缩放元素.使用ScaleX和ScaleY属性可以按照指定的系数调整元素的大小.例如,ScaleX值为1.5时,会将元素拉伸到其原始宽度的150%.ScaleY值为0.5时,会将元素的高度缩小50%.使用CenterX和CenterY属性可以指定缩放操作的中心点,默认情况下,ScaleTransform的中心点是(0,0),该点与矩形的左上角相对应,这会导致该元素移动并使其看上去更大,原因是当应用Transform时,对象所在的坐标空间会改变.<br>使用ScaleTransform将长和宽均为50的Rectangle尺寸放大一倍,对于CenterX和CenterY来说,ScaleTransform的值均为0.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                       &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                           &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                               &lt;ScaleTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> ScaleX=<span class="string">&quot;2&quot;</span> ScaleY=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                           &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                           </span><br><span class="line">                       &lt;/Rectangle&gt;</span><br><span class="line">                       &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">                           &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                               &lt;ScaleTransform CenterX=<span class="string">&quot;25&quot;</span></span><br><span class="line">                                               CenterY=<span class="string">&quot;25&quot;</span></span><br><span class="line">                                               ScaleX=<span class="string">&quot;2&quot;</span></span><br><span class="line">                                               ScaleY=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                           &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                       &lt;/Rectangle&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br></pre></td></tr></table></figure>
<p>8.15.扭曲变换(SkewTransform)<br>SkewTransform:能够让某对象产生扭曲变化,按指定的AngleX和AngleY量扭曲元素.扭曲是一种以非均匀方式拉伸坐标空间的变换.SkewTransform的一个典型用法是在二维对象中模拟三维深度.使用CenterX和CenterY属性可以指定SkewTransform的中心点,使用AngleX和AngleY属性可以指定X轴和Y轴的扭曲角度.<br>使当前坐标系沿着这些轴扭曲,若要预测扭曲变换的效果,请考虑AngleX相对于原始坐标系扭曲X轴的值,因此，如果AngleY为30,则会将该形状的Y轴值从原点扭曲30°.在X或Y轴中将坐标系变换30°效果不相同.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Rectangle height=<span class="string">&quot;50&quot;</span> width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> Strokethickness=<span class="string">&quot;2&quot;</span></span><br><span class="line">Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">	&lt;Rectangle.RenderTransform&gt;</span><br><span class="line">		&lt;SkewTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> AngleX=<span class="string">&quot;45&quot;</span> AngleY=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">	&lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">&lt;/Rectangle&gt;</span><br></pre></td></tr></table></figure>
<p>8.16.组合变换(TransformGroup)<br>TransformGroup:能够让某对象的缩放,扭曲等变化效果合并起来使用,将多个TransformGroup对象组合为可以随后应用于变换属性的单一Transform,在复合变换中,单个变换的顺序非常重要.例如,依次旋转,缩放,平移与依次平移,旋转和缩放得到的结果不同,造成顺序很重要的一个原因就是像旋转和缩放这样的变换是针对坐标系的原点进行的,缩放以原点为中心的对象与缩放已离开原点的对象所得到的结果不同.同样,旋转以原点为中心的对象与旋转已离开原点的对象所得到的结果也不同.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button RenderTransformOrigin=<span class="string">&quot;0.5,0.5&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span>&gt;Click</span><br><span class="line">                   &lt;Button.RenderTransform&gt;</span><br><span class="line">                       &lt;TransformGroup&gt;</span><br><span class="line">                           &lt;ScaleTransform ScaleY=<span class="string">&quot;3&quot;</span>/&gt;</span><br><span class="line">                           &lt;RotateTransform Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                       &lt;/TransformGroup&gt;</span><br><span class="line">                   &lt;/Button.RenderTransform&gt;</span><br><span class="line">               &lt;/Button&gt;</span><br></pre></td></tr></table></figure>
<p>8.17.矩阵变换(MatrixTransform)<br>MatrixTransform是通过矩阵演算的方式来计算变换后的坐标</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;MatrixTransform Matrix=<span class="string">&quot;M11,M12,M21,M22,OffsetX,OffsetY&quot;</span>/&gt;</span><br><span class="line">&lt;Button MinWidth=<span class="string">&quot;100&quot;</span>&gt;Click</span><br><span class="line">                    &lt;Button.RenderTransform&gt;</span><br><span class="line">                        &lt;MatrixTransform x:Name=<span class="string">&quot;myMatrixTransform&quot;</span>&gt;</span><br><span class="line">                            &lt;MatrixTransform.Matrix&gt;</span><br><span class="line">                                &lt;Matrix OffsetX=<span class="string">&quot;10&quot;</span> OffsetY=<span class="string">&quot;100&quot;</span> M11=<span class="string">&quot;3&quot;</span> M12=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                            &lt;/MatrixTransform.Matrix&gt;</span><br><span class="line">                        &lt;/MatrixTransform&gt;</span><br><span class="line">                    &lt;/Button.RenderTransform&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>8.2.三维特效<br>Win10UI元素的三维特效是通过UIElement的PlaneProjection属性来进行设置的.<br>8.22.三维旋转<br>PlaneProjection三维旋转相关的属性<br>1.CenterOfRotationX/CenterOfRotationY/CenterOfRotatinZ.表示旋转中心X轴/Y轴/Z轴坐标<br>可以通过使用这三个属性,设置三维旋转的旋转中心,默认情况下,旋转轴直接穿过对象的中心,这表示对象围绕其中心旋转.CenterOfRotationX和CenterOfRotationY的默认值为0.5,而CenterOfRotationZ的默认值为0.<br>CenterOfRotationX取值0表示UI元素最左边的边缘,1是UI元素最右边的边缘.<br>CenterOfRotationY取值0表示UI元素最上边的边缘,1是UI元素最上边的边缘.<br>CenterOfRotationZ取值为负表示将旋转中心移到该对象后面,取值为正数表示将旋转中心移到该对象上方.<br>2.RotationX/RotationY/RotationZ表示沿X/Y/Z轴旋转的角度.<br>默认值都是0 可以超过360.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid x:Name=<span class="string">&quot;SanWeiContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                       &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                       &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                   &lt;!--旋转的对象--&gt;</span><br><span class="line">                   &lt;TextBlock Grid.Row=<span class="string">&quot;0&quot;</span> Text=<span class="string">&quot;3D&quot;</span> FontSize=<span class="string">&quot;120&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                       &lt;TextBlock.Projection&gt;</span><br><span class="line">                           &lt;PlaneProjection x:Name=<span class="string">&quot;planeProjection&quot;</span>/&gt;</span><br><span class="line">                       &lt;/TextBlock.Projection&gt;</span><br><span class="line">                   &lt;/TextBlock&gt;</span><br><span class="line">                   &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                       &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                           &lt;RadioButton x:Name=<span class="string">&quot;rotationRadioButton&quot;</span> Content=<span class="string">&quot;Rotation&quot;</span> Checked=<span class="string">&quot;rotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                           &lt;RadioButton x:Name=<span class="string">&quot;centerOfRotationRadioButton&quot;</span></span><br><span class="line">                                        Content=<span class="string">&quot;CenterOfRotation&quot;</span> Checked=<span class="string">&quot;centerOfRotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                           </span><br><span class="line">                       &lt;/StackPanel&gt;</span><br><span class="line">                       &lt;TextBlock x:Name=<span class="string">&quot;infoTextBlock&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                       &lt;TextBlock x:Name=<span class="string">&quot;xTextBlock&quot;</span> Text=<span class="string">&quot;沿着X轴旋转&quot;</span>/&gt;</span><br><span class="line">                       &lt;Slider x:Name=<span class="string">&quot;xSlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;xSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                       &lt;TextBlock x:Name=<span class="string">&quot;yTextBlock&quot;</span> Text=<span class="string">&quot;沿着Y轴旋转&quot;</span>/&gt;</span><br><span class="line">                       &lt;Slider x:Name=<span class="string">&quot;ySlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;ySlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                       &lt;TextBlock x:Name=<span class="string">&quot;zTextBlock&quot;</span> Text=<span class="string">&quot;沿着Z轴旋转&quot;</span>/&gt;</span><br><span class="line">                       &lt;Slider x:Name=<span class="string">&quot;zSlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;zSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                   &lt;/StackPanel&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line"></span><br><span class="line">//X滑块的滑动事件</span><br><span class="line">       private void xSlider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> (centerOfRotationRadioButton.IsChecked==<span class="literal">false</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               //Slider控制的值范围是0-100,所以旋转的角度控制在0-360</span><br><span class="line">               double xValue = e.NewValue * 360 / 100;</span><br><span class="line">               planeProjection.RotationX = xValue;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               //中心点的坐标控制在0-1的值范围中变动</span><br><span class="line">               planeProjection.CenterOfRotationX = e.NewValue / 100;</span><br><span class="line">               </span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void ySlider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> (centerOfRotationRadioButton.IsChecked==<span class="literal">false</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               double yValue = e.NewValue * 360 / 100;</span><br><span class="line">               planeProjection.RotationY = yValue;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               planeProjection.CenterOfRotationY = e.NewValue / 100;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void zSlider_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> (centerOfRotationRadioButton.IsChecked==<span class="literal">false</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               double zValue = e.NewValue * 360 / 100;</span><br><span class="line">               planeProjection.RotationZ = zValue;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               planeProjection.CenterOfRotationZ = e.NewValue / 100;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>8.23.三维平移<br>设置UI元素平移的距离的属性分为两种类型,一种是以屏幕为参考对象来定义坐标轴,另外一种类型是以UI对象本身作为参考对象来定义坐标轴,如果这个UI对象本身并没有做旋转相关的特效,这两种类型的属性所显示的效果是一样的,当UI对象应用了一些旋转特效,这两种类型还是有较大的区别的.<br>GlobalOffsetX/GlobalOffsetY/GlobalOffsetZ表示相对于屏幕沿X轴/Y轴/Z轴平移对象,LocalOffsetX/LocalOffsetY/LocalOffsetZ表示沿对象旋转后对象平面的X/Y/Z轴平移对象.<br>下面的示例把TextBlock控件沿着X轴旋转45°,然后通过Slider控件来控制修改TextBlock控件相对于屏幕沿X/Y/Z平移的特效效果。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SanweiPingyi&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;SanweiContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;!--平移的对象--&gt;</span><br><span class="line">                    &lt;TextBlock Grid.Row=<span class="string">&quot;0&quot;</span> Text=<span class="string">&quot;3D&quot;</span> FontSize=<span class="string">&quot;120&quot;</span> Foreground=<span class="string">&quot;red&quot;</span></span><br><span class="line">                               HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock.Projection&gt;</span><br><span class="line">                            &lt;PlaneProjection x:Name=<span class="string">&quot;pingyiProjection&quot;</span> RotationX=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                        &lt;/TextBlock.Projection&gt;</span><br><span class="line">                    &lt;/TextBlock&gt;</span><br><span class="line">                    &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;globalRadioButton&quot;</span> Content=<span class="string">&quot;GlobalOffset&quot;</span> Checked=<span class="string">&quot;rotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;localRadioButton&quot;</span></span><br><span class="line">                                         Content=<span class="string">&quot;LocalOffset&quot;</span> Checked=<span class="string">&quot;centerOfRotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;infoTextBlock1&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;xTextBlock1&quot;</span> Text=<span class="string">&quot;沿着X轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;xSlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;xSlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;yTextBlock1&quot;</span> Text=<span class="string">&quot;沿着Y轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;ySlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;ySlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;zTextBlock1&quot;</span> Text=<span class="string">&quot;沿着Z轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;zSlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;zSlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                 </span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">                </span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line"> /// &lt;summary&gt;</span><br><span class="line">        /// 三维平移 z轴移动的距离</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void zSlider_ValueChanged1(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (globalRadioButton.IsChecked == <span class="literal">true</span>) &#123;</span><br><span class="line">                pingyiProjection.GlobalOffsetZ = e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                pingyiProjection.LocalOffsetZ= e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            ShowCenterOfRotationValue();</span><br><span class="line">        &#125;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">/// 展示Textblock控件当前各个位置平移的值</span><br><span class="line">/// &lt;/summary&gt;</span><br><span class="line">        private void <span class="function"><span class="title">ShowCenterOfRotationValue</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            infoTextBlock1.Text = $<span class="string">&quot;GlobaloffsetX:&#123;pingyiProjection.GlobalOffsetX&#125;&quot;</span> +</span><br><span class="line">                $<span class="string">&quot;Y:&#123;pingyiProjection.GlobalOffsetY&#125; Z:&#123;pingyiProjection.GlobalOffsetZ&#125; LocalOffsetX:&#123;pingyiProjection.LocalOffsetX&#125; Y:&#123;pingyiProjection.LocalOffsetY&#125; Z:&#123;pingyiProjection.LocalOffsetZ&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void ySlider_ValueChanged1(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (globalRadioButton.IsChecked == <span class="literal">true</span>) &#123; </span><br><span class="line">                pingyiProjection.GlobalOffsetY= e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                pingyiProjection.LocalOffsetY= e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            ShowCenterOfRotationValue();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void xSlider_ValueChanged1(object sender, RangeBaseValueChangedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (globalRadioButton.IsChecked == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                pingyiProjection.GlobalOffsetX = e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                pingyiProjection.LocalOffsetX = e.NewValue;</span><br><span class="line">            &#125;</span><br><span class="line">            ShowCenterOfRotationValue();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>8.24.用矩阵实现三维特效<br>用矩阵实现三维特效主要是依赖Matrix3DProjection和Matrix3D类型来实现,Matrix3DProjection是Matrix3D周围的包装类.<br>Matrix3D类表示一个转换矩阵,该矩阵确定三维(3D)显示对象的位置和方向,该矩阵可以执行转换功能,包括平移(沿X,Y和Z轴重新定位),旋转和缩放(调整大小).Matrix3D类还可以执行透视投影,这会将3D坐标空间中的点映射到二维(2D)视图.<br>Matrix3D类使用1个4x4正方形矩阵,即一个由四行和四列数字构成的表,其中容纳了用于转换的数据.矩阵的前三行容纳每个3D轴(X,Y,Z)的数据.平移信息位于最后一列中,方向和缩放数据位于前三个列中,缩放因子是位于前三个列中的对角数字,单一矩阵可以将多个转换组合在一起,并一次性对3D显示对象应用这些转换.例如,可以将一个矩阵应用于3D坐标,以便依次执行旋转和平移.如果三维特效之前的点坐标为(X,Y,Z),实现矩阵三维特效后的点坐标(X<code>,Y</code>,Z<code>)的计算公式如下: X</code>=M11<em>X+M21</em>Y+M31<em>Z+OffsetX.<br>Y<code>=M12*X+M22*Y+M32*Z+OffsetY. Z</code>=M13</em>X+M23<em>Y+M33</em>Z+OffsetZ.<br>Matrix3D的行向量语法<br>M11    M12    M13    M14<br>M21    M22    M23    M24<br>M31    M32    M33    M34<br>OffsetX    OffsetY    OffsetZ    M44<br>为了更好理解矩阵,总共有五种不同类型的矩阵,4X4矩阵结构,单位矩阵，平移矩阵，缩放矩阵和旋转矩阵.<br>单位矩阵表示三维物体在世界空间内的初始位置.如果将一个矩阵乘以单位矩阵还会得到原来的矩阵,没有变换.<br>单位矩阵<br>1    0    0    0<br>0    1    0    0<br>0    0    1    0<br>0    0    0    1<br>缩放矩阵<br>表示用来对物体进行缩放变换,只需将三维物体乘以缩放矩阵就可以实现缩放的效果.在表中Sx,Sy,Sz分别表示沿着不同的方向进行缩放的比例.<br>缩放矩阵<br>Sx    0    0    0<br>0    Sy    0    0<br>0    0    Sz    0<br>0    0    0    1<br>//向X,Y,Z轴缩放</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private Matrix3D CreateScaleTransform(double sx,double sy,double sz)&#123;</span><br><span class="line">	Matrix3D m=new Matrix3D();</span><br><span class="line">	m.M11=sx;m.M12=0.0;m.M13=0.0;m.M14=0.0;</span><br><span class="line">	m.M21=0.0;m.M22=sy;m.M23=0.0;m.M24=0.0;</span><br><span class="line">	m.M31=0.0;m.M32=0.0;m.M33=sz;m.M34=0.0;</span><br><span class="line">	m.OffsetX=0.0;m.OffsetY=0.0;m.OffsetZ=0.0;m.M44=1.0;</span><br><span class="line">	<span class="built_in">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>平移矩阵表示用来对物体进行平移变换,只需将三维物体乘以平移矩阵就可以实现平移效果,在表中Tx,Ty和Tz分别表示沿着不同方向进行缩放的比例.<br>平移矩阵<br>1    0    0    0<br>0    1    0    0<br>0    0    1    0<br>Tx    Ty    Tz    1<br>//向x,y,z轴移动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">/// 平移矩阵 向x,y,z轴移动</span><br><span class="line">/// &lt;/summary&gt;</span><br><span class="line">/// &lt;param name=<span class="string">&quot;tx&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">/// &lt;param name=<span class="string">&quot;ty&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">/// &lt;param name=<span class="string">&quot;tz&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">/// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">private Matrix3D TranslationTransform(double tx,double ty,double tz) &#123;</span><br><span class="line">    Matrix3D m = new Matrix3D();</span><br><span class="line">    m.M11 = 1.0;m.M12 = 0.0;m.M13 = 0.0;m.M14 = 0.0;</span><br><span class="line">    m.M21 = 0.0;m.M22 = 1.0;m.M23 = 0.0;m.M24 = 0.0;</span><br><span class="line">    m.M31 = 0.0;m.M32 = 0.0;m.M33 = 1.0;m.M34 = 0.0;</span><br><span class="line">    m.OffsetX = tx;m.OffsetY = ty;m.OffsetZ = tz;m.M44 = 1.0;</span><br><span class="line">    <span class="built_in">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>沿着X,Y,Z轴旋转的矩阵分别如下所示 0表示旋转的角度<br>X轴旋转矩阵<br>1    0    0    0<br>0    cos0    sin0    0<br>0    -sin0    cos0    0<br>0    0    0    1<br>RotationX<br>Y轴旋转矩阵<br>cos0    0    sin0    0<br>0    1    0    0<br>-sin0    0    cos0    0<br>0    0    0    1<br>RotationY<br>Z轴旋转矩阵<br>cos0    sin0    0    0<br>-sin0    cos0    0    0<br>0    0    1    0<br>0    0    0    1<br>RotationZ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">///旋转矩阵</span><br><span class="line">      /// &lt;summary&gt;</span><br><span class="line">      /// 沿X轴移动</span><br><span class="line">      /// &lt;/summary&gt;</span><br><span class="line">      /// &lt;param name=<span class="string">&quot;theta&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">      /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">      private Matrix3D RotateXTransform(double theta) &#123; </span><br><span class="line">          double sin=Math.Sin(theta);</span><br><span class="line">          double cos=Math.Cos(theta);</span><br><span class="line">          Matrix3D  m=new Matrix3D();</span><br><span class="line">          m.M11 = 1.0;m.M12 = 0.0;m.M13 = 0.0;m.M14 = 0.0;</span><br><span class="line">          m.M21 = 0.0;m.M22 = cos; m.M23 = sin;m.M24 = 0.0;</span><br><span class="line">          m.M31= 0.0; m.M32 = -sin;m.M24 = cos;m.M34 = 0.0;</span><br><span class="line">          m.OffsetX=0.0; m.OffsetY= 0.0;m.OffsetZ = 0.0;m.M44 = 1.0;</span><br><span class="line">          <span class="built_in">return</span> m;</span><br><span class="line">      &#125;</span><br><span class="line">      /// &lt;summary&gt;</span><br><span class="line">      /// 沿Y轴移动</span><br><span class="line">      /// &lt;/summary&gt;</span><br><span class="line">      /// &lt;param name=<span class="string">&quot;theta&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">      /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">      private Matrix3D RotateYTransform(double theta) &#123;</span><br><span class="line">          double sin=Math.Sin(theta);</span><br><span class="line">          double cos=Math.Cos(theta);</span><br><span class="line">          Matrix3D m=new Matrix3D();</span><br><span class="line">          m.M11 = cos;m.M12 = 0.0;m.M13 = -sin;m.M14 = 0.0;</span><br><span class="line">          m.M21 = 0.0;m.M22 = 1.0;m.M23 = 0.0;m.M24=0.0;</span><br><span class="line">          m.M31 = sin;m.M32 = 1.0;m.M33 = cos;m.M34 = 0.0;</span><br><span class="line">          m.OffsetX = 0.0;m.OffsetY = 0.0;m.OffsetY = 0.0;m.M44 = 1.0;</span><br><span class="line">          <span class="built_in">return</span> m;</span><br><span class="line">      &#125;</span><br><span class="line">      /// &lt;summary&gt;</span><br><span class="line">      /// 沿Z轴移动</span><br><span class="line">      /// &lt;/summary&gt;</span><br><span class="line">      /// &lt;param name=<span class="string">&quot;theta&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">      /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">      private Matrix3D RotateZTransform(double theta) &#123; </span><br><span class="line">          double cos=Math.Cos(theta);</span><br><span class="line">          double sin=Math.Sin(theta);</span><br><span class="line">          Matrix3D m=new Matrix3D();</span><br><span class="line">          m.M11 = cos;m.M12 = sin;m.M13= 0.0;m.M14 = 0.0;</span><br><span class="line">          m.M21 = -sin;m.M22 = cos;m.M23 = 0.0;m.M24 = 0.0;</span><br><span class="line">          m.M31 = 0.0;m.M32 = 0.0;m.M33 = 1.0;m.M34= 0.0;</span><br><span class="line">          m.OffsetX = 0;m.OffsetY = 0.0;m.OffsetZ = 0.0;m.M44= 1.0;</span><br><span class="line">          <span class="built_in">return</span> m;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<h4 id="动画编程"><a href="#动画编程" class="headerlink" title="动画编程"></a>动画编程</h4><p>实现动画的原始办法是配置一个定时器,然后根据定时器的频率循环的回调.在回调方法中,可以手动更新目标属性,根据时间的变化用数学计算来决定当前值,直到它达到最终值,这时就可以停止定时器,并移除时间处理程序.<br>9.12.动画的目标属性<br>普通的win10动画一定需要一个动画的目标属性,通过改变这个属性值从而实现动画的效果.可以把目标属性分为以下3类:<br>1.普通的UI控件属性,如宽度,高度等.这些属性和布局系统相关,当这些属性改变时会重新触发布局系统的工作.<br>2.变换特效属性<br>变换特效的属性可以作为动画的目标属性,实现从一个变换状态转换到另外一个变换状态.变换特效是不会重新触发UI布局系统的.要实现把矩形的宽度慢慢方法到两倍的动画,可以对Width属性进行动画处理,也可以对ScaleTransform对象的属性进行处理,这时候就应该选择用变换特效属性来实现,除非变换特效属性无法满足动画的实现效果,才去选择对普通的UI控件属性进行动画处理.<br>3.三维特效属性.<br>9.13.动画的类型<br>Win10主要提供两类动画–线性插值动画和关键帧动画,线性插值动画也称为From/To/By动画,用来反映某个对象在指定时间范围内持续渐变的过程.关键帧动画可以指定任意数量的目标值,并可以控制它们的内插方法.还有一种比较少用的动画——基于帧动画.通常一些复杂的动画才会使用基于帧动画.<br>基于帧动画 需要做的全部工作是响应静态的CompositionTarget.Rendering事件,触发该事件可以为每帧获取内容.线性插值动画和关键帧动画是要对UI元素的某个属性或某种变换变换进行动画清理的,也就是动态的在时间轴上改变UI元素的某个属性或者某种变换,所以也可以根据动画所要改变的对象来分为针对属性的动画和针对变换的动画,Storyboard类提供TargetName和TargetProperty附加属性,通过在动画上设置这些属性,将告诉动画对哪些内容进行处理.不过在动画以对象作为处理目标之前,必须使用x:Name属性为该对象提供一个名称,否则必须间接地以属性作为目标.针对属性地动画需要将TargetName和TargetProperty附加属性赋值为元素地名称和元素地属性名称,基于帧动画比较特殊,这是一种低级地动画处理方式.相当于每一帧地动画都需要通过事件来重绘界面.<br>9.2.线性插值动画<br>线性插值实际上就是通过给定两个关键帧图形线性地求出两帧之间地中间帧图形,这里的线性插值动画是把两个对应的开始值和结束值之间间隔划分,然后线性的实现等量递增或递减的效果.在Windows10中,线性插值动画表现为:界面上某个元素的某个属性在开始值和结束值之间递增或递减,比如淡入淡出效果,时钟转动.<br>9.21.动画的基本语法.<br>Win10动画类位于System.Windows.Media.Animation命令空间下,Win10的线性插值动画和关键帧动画都是基于Timeline(时间线)的动画,所有的动画都是继承于Timeline类,Timeline用来表示动画的某一时刻或某段时间的范围.用来记录动画的状态,行为,顺序,起始位置和结束位置及动画持续时间.<br>Storyboard是Win10动画的基本单元,派生于Timeline类,用来分配动画时间,可以使用同一个故事板对象产生一种或多种动画效果,并且允许控制动画的播放,暂停,停止及在何时何地播放,使用故事板时,必须指定TargetProperty(目标属性)和TargetName(目标名称)属性,这两个属性把故事板和所有产生的动画效果衔接起来,起到桥梁的作用.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Storyboard x:Name=<span class="string">&quot;storyboard1&quot;</span>&gt;</span><br><span class="line">                          &lt;DoubleAnimation EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                           Storyboard.TargetName=<span class="string">&quot;ellipse1&quot;</span></span><br><span class="line">                                           Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span></span><br><span class="line">                                           From=<span class="string">&quot;150&quot;</span> To=<span class="string">&quot;300&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span>/&gt;</span><br><span class="line">                      &lt;/Storyboard&gt;</span><br></pre></td></tr></table></figure>
<p>9.22.线性动画的基本语法<br>System.Windows.Media.Animation命名空间,并且都以Animation结尾,这些类主要有DoubleAnimation类,ColorAnimation类和PointAnimation类.这三个类分别对Double,Color和Point属性进行动画处理.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                   &lt;StackPanel.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;myStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;300&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                            RepeatBehavior=<span class="string">&quot;Forever&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span></span><br><span class="line">                                            Storyboard.TargetName=<span class="string">&quot;rect&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">                           </span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/StackPanel.Resources&gt;</span><br><span class="line">                   &lt;Rectangle x:Name=<span class="string">&quot;rect&quot;</span> Width=<span class="string">&quot;0&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                   &lt;Button Content=<span class="string">&quot;启动动画&quot;</span> Click=<span class="string">&quot;Button_Click_3&quot;</span>/&gt;</span><br><span class="line">               &lt;/StackPanel&gt;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">       /// 播放动画</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_Click_3(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           myStoryboard.Begin();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1.From属性<br>From值是Width属性的开始数值,如果多次单击,每次都会将Width重新设置为0,并重新开始动画.<br>每个依赖属性每次只能响应一个动画,如果开始第二个动画,第一个动画就会自动放弃,在许多情况下,可能不希望动画从最初的From值开始:<br>    1.动画多次启动需要在上次基础上延续下去,需要创建一个能够被多次触发,并且逐次累加效果的动画,例如创建一个每次单击时都大一点的按钮.<br>    2.创建相互重叠的动画,可以使用PointerEnter事件触发一个扩展按钮的动画,并使用PointerLeave事件触发一个将按钮缩小为原始尺寸的互补动画,如果连续快速的将鼠标多次移动到这种按钮上并移开,每个新动画就会打断上一个动画,导致按钮跳回到From属性设置的值.<br>如果当矩形正在增大时单击按钮,按钮宽度就会被重新设置为0个像素.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Storyboard x:Name=<span class="string">&quot;myStoryboard&quot;</span>&gt;</span><br><span class="line">	&lt;DoubleAnimation To=<span class="string">&quot;300&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span> AutoReserve=<span class="string">&quot;True&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;rect&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span>/&gt;</span><br><span class="line">&lt;/Storyboard&gt;</span><br></pre></td></tr></table></figure>
<p>2.To属性<br>3.By属性<br>不使用To属性,也可以使用By属性,By属性用于创建通过设置变化的数量改变数值的动画,而不是通过设置达到的目标改变数值.<br>From 0By100<br>4.Duration属性<br>它是在动画开始和结束之间的时间间隔，没有指定,默认1秒<br>Duration类型还提供了两个特殊的不能通过Timespan对象表示的数值,Duration.Automatic和Duration.Forever.<br>5.AutoReverse属性<br>指定时间线在到达其Duration的终点后是否倒退.如果将此动画属性设置为true,则动画在到达其Duration终点后将倒退,即从其终止值向其起始值反向播放,默认情况下,该属性为false.<br>6.RepeatBehavior属性<br>指定时间线播放次数,默认情况下,时间线重复次数为1.0,即播放一次时间线,根本不进行重复,RepeatBehavior属性的设置有三种语法:<br>Forever:一直重复运行下去.<br>二是设置重复运行的次数,叫做迭代形式,迭代形式占位符是一个整数,用于指定动画应重复的次数.迭代次数后面总是跟一个小写的原义字符x.可以将它想象为一个乘法字符,3x表示3倍.<br>三是设置动画运行的时间跨度,这个时间跨度和Duration属性有很大区别,这个时间表示的是动画从运行到停止的时间,Duration属性的时间表示动画重复一次的时间.时间跨度的语法格式是”[天.]小时:分钟:秒[.秒的小数部分]”,方括号[]表示可选值,重复15秒可以设置RepeatBehavior=”0:0:15”.小时,分钟和数值可以是0-59中的任意整数,天的值可以很大,但其具有未指定的上限.秒的小数部分(包含小数点)的小数值必须介于0-1之间.<br>9.23.DoubleAnimation实现变换动画.<br>下面示例将Storyboard和DoubleAnimation与ScaleTransform一起使用,以便在动画运行时,Rectangle的高度慢慢向下伸长至原来的两倍.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;Canvas&gt;</span><br><span class="line">                   &lt;Canvas.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;storyBoard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--对ScaleTransform对象的ScaleY属性应用动画,表示沿着Y轴缩放倍数变化的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;scacleTransform&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span></span><br><span class="line">                                            From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span></span><br><span class="line">                                            RepeatBehavior=<span class="string">&quot;Forever&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           </span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                       </span><br><span class="line">                   &lt;/Canvas.Resources&gt;</span><br><span class="line">                   &lt;Rectangle x:Name=<span class="string">&quot;rectangle&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;75&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                       &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                           &lt;!--&lt;注意需要对ScaleTransform命名,否则无法定义动画的目标对象&gt;--&gt;</span><br><span class="line">                           &lt;ScaleTransform x:Name=<span class="string">&quot;scaleTransform&quot;</span>&gt;</span><br><span class="line">                           &lt;/ScaleTransform&gt;</span><br><span class="line">                       &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                   &lt;/Rectangle&gt;</span><br><span class="line">               &lt;/Canvas&gt;</span><br><span class="line"> private void Page_Loaded(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           storyBoard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.24.ColorAnimation实现颜色渐变动画<br>ColorAnimation类是用于属性为Color类型的UI元素的线性插值动画的类型,与色调相关的渐变动画可以使用DoubleAnimation类来实现,通常使用UI元素的Fill属性,Background属性值等来实现对象的填充色调的变化效果.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackPanel&gt;</span><br><span class="line">                   &lt;StackPanel.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;storybord1&quot;</span>&gt;</span><br><span class="line">                           &lt;ColorAnimation From=<span class="string">&quot;Red&quot;</span> To=<span class="string">&quot;Yellow&quot;</span></span><br><span class="line">                                           Storyboard.TargetName=<span class="string">&quot;button&quot;</span></span><br><span class="line">                                           Storyboard.TargetProperty=<span class="string">&quot;(Button.Background).(SolidColorBrush.Color)&quot;</span></span><br><span class="line">                                           Duration=<span class="string">&quot;0:0:5&quot;</span>&gt;</span><br><span class="line">                           &lt;/ColorAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/StackPanel.Resources&gt;</span><br><span class="line">                   &lt;Button Content=<span class="string">&quot;开始动画&quot;</span> Margin=<span class="string">&quot;12&quot;</span> Click=<span class="string">&quot;Button_Click_4&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">                   &lt;Button Content=<span class="string">&quot;Test&quot;</span> x:Name=<span class="string">&quot;button&quot;</span> Margin=<span class="string">&quot;12&quot;</span> Click=<span class="string">&quot;button_Click_5&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">                   </span><br><span class="line">               &lt;/StackPanel&gt;</span><br><span class="line">           storybord1.Begin();</span><br></pre></td></tr></table></figure>
<p>9.25.PointAnimation实现Path图形动画<br>PointAnimation类是用于属性为Point类型的UI元素的线性插值动画的类型,在两个Point值之间做线性内插动画处理,用于改变某些UI元素对象的X,Y值,如元素的Center属性.如果要对Path图形应用动画,动态地改变Path图形上的点,需要用PathGeometry的方式来创建Path图形.<br>我们用一个例子来演示如何实现Path图形的动画,这个动画的运行效果是一个四分之三的圆通过线性动画慢慢变成一个完整的圆,不断地重复这样的动画效果,这个Path圆形的构造原理是从圆最右边的点出发,使用BezierSegment画4条曲线和一条直线连接到中心点形成一个闭合的图形.对第4条曲线BezierSegment的终点Point3进行动画处理,让其从圆的最上边的点坐标运动到最右边的点坐标.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackPanel&gt;</span><br><span class="line">    &lt;StackPanel.Resources&gt;</span><br><span class="line">        &lt;Storyboard x:Name=<span class="string">&quot;storyboard1&quot;</span>&gt;</span><br><span class="line">            &lt;PointAnimation From=<span class="string">&quot;50,0&quot;</span> To=<span class="string">&quot;100,50&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;bezierSegment&quot;</span></span><br><span class="line">                            Storyboard.TargetProperty=<span class="string">&quot;Point3&quot;</span> RepeatBehavior=<span class="string">&quot;5&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">        &lt;/Storyboard&gt;</span><br><span class="line">    &lt;/StackPanel.Resources&gt;</span><br><span class="line">    &lt;Button Content=<span class="string">&quot;运行动画&quot;</span> Click=<span class="string">&quot;Button_Click_6&quot;</span> Margin=<span class="string">&quot;12&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">    &lt;!--&lt;Data属性由4个BezierSegment曲线和1条直线LineSegment组成&gt;--&gt;</span><br><span class="line">    &lt;Path Fill=<span class="string">&quot;#FF4080FF&quot;</span> HorizontalAlignment=<span class="string">&quot;Left&quot;</span> Height=<span class="string">&quot;100&quot;</span> Margin=<span class="string">&quot;162,164,0,0&quot;</span> Stretch=<span class="string">&quot;Fill&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">        &lt;Path.Data&gt;</span><br><span class="line">            &lt;PathGeometry&gt;</span><br><span class="line">                &lt;PathFigure StartPoint=<span class="string">&quot;100,50&quot;</span>&gt;</span><br><span class="line">                    &lt;BezierSegment Point1=<span class="string">&quot;100,77.6142&quot;</span> Point2=<span class="string">&quot;77.6142,100&quot;</span> Point3=<span class="string">&quot;50,100&quot;</span>/&gt;</span><br><span class="line">                    &lt;BezierSegment Point1=<span class="string">&quot;22.3858,100&quot;</span> Point2=<span class="string">&quot;0,77.6142&quot;</span> Point3=<span class="string">&quot;0,50&quot;</span>/&gt;</span><br><span class="line">                    &lt;BezierSegment Point1=<span class="string">&quot;0,22.3858&quot;</span> Point2=<span class="string">&quot;22.3858,0&quot;</span> Point3=<span class="string">&quot;50,0&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--BezierSegment表示是圆右上的弧线,对其终点Point3进行动画处理--&gt;</span><br><span class="line">                    &lt;BezierSegment x:Name=<span class="string">&quot;bezierSegment&quot;</span> Point1=<span class="string">&quot;77.6142,0&quot;</span> Point2=<span class="string">&quot;100,22.3858&quot;</span> Point3=<span class="string">&quot;100,50&quot;</span>/&gt;</span><br><span class="line">                    &lt;LineSegment Point=<span class="string">&quot;50,50&quot;</span>/&gt;</span><br><span class="line">                &lt;/PathFigure&gt;</span><br><span class="line">            &lt;/PathGeometry&gt;</span><br><span class="line">        &lt;/Path.Data&gt;</span><br><span class="line">    &lt;/Path&gt;</span><br><span class="line">&lt;/StackPanel&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>9.3.关键帧动画<br>1.关键帧动画的概念<br>一个动画轨迹里有多个关键帧,每个关键帧具有自己的相关信息,每个关键帧还同时保存自己在整个动画轨迹里所处的时间点.在实际运行时,根据当前时间,通过对两个关键帧的插值可以得到当前帧.动画运行时,随着时间的变化,插值得到的当前帧也是变化的,从而产生了动画的效果,由于关键帧包括长度,颜色,位置等信息,所以可以实现运动动画,缩放动画,渐变动画,旋转动画以及混合动画.<br>2.关键帧动画与线性插值动画的区别<br>关键帧动画的目标值是使用关键帧对象进行描述的,因此称作”关键帧动画”,通过指定多个值来创建关键帧动画,关键帧还会启用不同的插入逻辑,每个插入逻辑根据动画类型作为不同的”KeyFrame”子类实现,确切的说,每个关键帧动画类型具有KeyFrame类的Discrete,Linear,Spline和Easing变体,用于指定其关键帧,例如,若要指定以Double为目标并使用关键帧的动画,则可声明具有DiscreteDoubleKeyFrame,LinearDoubleKeyFrame,SplineDoubleKeyFrame和EasingDoubleKeyFrame的关键帧.可以在一个KeyFrame集合中使用所有这些类型,用以更改每次新关键帧到达的插入.<br>3.关键帧动画需要注意的属性<br>对于插入行为,每个关键帧控制该插入,直至到达其KeyTime时间.其Value也会在该时间到达,如果有更多关键帧超出范围,则该值将称为序列中下一个关键帧的起始值.<br>关键帧动画的持续时间为隐式持续时间,它等于其任一关键帧中设置的最高KeyTime值.如果需要,可以设置一个显式Duration,但应注意该值不应小于关键帧中的KeyTime,否则将会截断部分动画,除了Duraiton,还可以在关键帧动画上设置基于Timeline的属性,因为关键帧动画类也派生自Timeline.这些属性主要有:<br>    1.AutoReverse:在到达最后一个关键帧后,从结束位置开始反向重复帧.这使得动画的显示持续时间加倍.<br>    2.BeginTime:延迟动画的起始部分.帧内KeyTime值的时间线在BeginTime到达前不开始计数,<br>因此不存在截断帧的风险.<br>    3.FillBehavior:控制到达最后一帧发生的操作.FillBehavior不会对任何中间关键帧产生任何影响.<br>    4.RepeatBehavior:如果该数不是时间线的隐式持续时间的整数倍数,则可能会截断关键帧序列中的部分动画.<br>4.关键帧动画的类别<br>关键帧动画分为线性关键帧,样条关键帧和离散关键帧三种类型.关键帧动画类属于System.Windows.Media.Animation命名空间.并遵守下列命名规定:&lt;类型&gt;AnimationUsingKeyFrame.<br>其中&lt;类型&gt;是该类进行动画处理的值的类型.<br>关键帧的分类<br>所属类型    对应的关键帧动画类    支持的动画过渡方法<br>Color    ColorAnimationUsingKeyFrame    离散，线性，样条<br>Double    DoubleAmimationUsingKeyFrame    离散,线性,样条<br>Point<br>Object                    离散<br>9.32.线性关键帧<br>线性关键帧动画是由许多比较短的段构成的动画.每段表示动画中的初始值,最终值成中间值,当运行动画时,它从一个值光滑的移动到另外一个值,使用线性过度,指定时间段内,动画的播放速度是固定的,比如,如果关键帧段在5秒内,从0过度到10.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;PointAnimation Storyboard.TargetName=<span class="string">&quot;myradialgradientbrush&quot;</span></span><br><span class="line">	Storyboard.TargetProperty=<span class="string">&quot;GradientOrigin&quot;</span> From=<span class="string">&quot;0.1,0.7&quot;</span> To=<span class="string">&quot;0.3,0.7&quot;</span></span><br><span class="line">Duration=<span class="string">&quot;0:0:10&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">&lt;/PointAnimation&gt;</span><br></pre></td></tr></table></figure>
<p>可以使用一个效果相同的PointAnimationUsingKeyFrames对象代替上面的PointAnimation对象.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;PointAnimationUsingKeyFrames Storyboard.TargetName=<span class="string">&quot;myradialgradientbrush&quot;</span> </span><br><span class="line">Storyboard.TargetProperty=<span class="string">&quot;GradientOrigin&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">	&lt;LinearPointKeyFrame Value=<span class="string">&quot;0.1,0.7&quot;</span> KeyTime=<span class="string">&quot;0:0:0&quot;</span>/&gt;</span><br><span class="line">	&lt;LinearPointKeyFrame Value=<span class="string">&quot;0.3,0.7&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">&lt;/PointAnimationUsingKeyFrames&gt;</span><br></pre></td></tr></table></figure>
<p>这个动画包含两个关键帧,当动画开始时第一个关键帧设置Point值(如果希望在RadialGradientBrush画刷中设置的当前值,可以省略这个关键帧).第二个关键帧定义结束值,这是10秒之后到达的数值,PointAnimationUsingKeyFrames对象执行线性插值,这样第一个关键帧平滑移动到第二个关键帧,就像PointAnimation对象使用From值和To值一样.<br>每个关键帧动画都使用自己的关键帧对象(LinearPointKeyFrame),对于大部分内容,这些类时相同的,它们包含一个保存目标值的Value属性和一个指示帧何时到达目标值的KeyTime属性,唯一的区别是Value属性的数据类型,在LinearPointKeyFrame类中是Point类型,在DoubleKeyFrame类中是double类型.<br>除了指定动画的Duration外,还需要指定向每个关键帧分配持续时间内的多长一段时间.你可以为动画的每个关键帧描述其KeyTime来实现此目的.每个关键帧的KeyTime都指定了该关键帧的结束时间.KeyTime属性并不能指定关键时间播放的长度,关键帧播放时间长度由关键帧的结束时间,前一个关键帧的结束时间以及动画的持续时间来确定.可以以时间值或百分比形式来指定关键时间,也可以将其指定为特殊值Uniform或Paced.<br>9.33.样条关键帧<br>为了使若干个关键帧间的动画连续流畅,经常采用样条关键帧插值法.具有二阶连续性,即C2连续性,在win10中,每个支持线性关键帧的类也支持样条关键帧,并且它们使用”Spline+数据类型+KeyFrame”形式进行命名.<br>和线性关键帧一样,样条关键帧使用插值从一个值平滑的移动到另外一个值,区别是每个样条关键帧都有一个KeySpline属性.可以使用该属性定义一个影响插值方式的三次贝塞尔样条.<br>样条关键帧使用的是三次方贝塞尔曲线来计算动画运动的轨迹.贝塞尔曲线的每一个顶点都有两个控制点,用于控制在该顶点两侧的曲线的弧度,它是应用于二维图形应用程序的数学曲线.曲线的定义有四个点,起始点,终止点，以及两个相互分离的中间点,滑动两个中间点,贝塞尔曲线的形状会发生变化,三次贝塞尔曲线,则需要一个起点，一个终点，两个控制点来控制曲线的形状.<br>P0,P1,P2,P3四个点在平面或三维空间中定义了三次方贝塞尔曲线,曲线起始于P0,走向P1,并从P2的方向来到P3.曲线一般不会经过P1或P2,这两个点只是提供方向信息.P0和P1之间的距离,决定了曲线在趋进P3之前,走向P2方向的长度有多长,曲线的参数形式为<br>    B(t)=P0(1-t)3+3P1t(1-t)2+3P2t2(1-t)+P3t3,t属于[0,1]<br>样条关键帧可用于达到更真实的记时效果,使用其他关键帧,可以指定一个Value和KeyTime，使用样条关键帧,还需要指定一个KeySpline.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;SplineDoubleKeyFrame Value=<span class="string">&quot;500&quot;</span> KeyTime=<span class="string">&quot;0:0:7&quot;</span> KeySpline=<span class="string">&quot;0.0,1.0 1.0,0.0&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>样条关键帧根据KeySpline属性的值在值之间创建可变的过度,KeySpline属性是从(0,0)延伸到(1,1)的贝塞尔曲线的两个控制点，用于控制在该顶点两侧的曲线的弧度,描述了动画的加速.第一个控制点控制贝塞尔曲线前半部分的曲线因子,第二个控制点控制贝塞尔线段后半部分的曲线因子.此属性基本上定义了一个时间关系间的函数,其中函数-时间图形采用贝塞尔曲线的形状,所得到的曲线是对该样条关键帧的更改速率所进行的描述.曲线陡度越大,关键帧更改其值的速度越快,曲线趋于平缓,关键帧更改其值的速度也趋于缓慢.<br>在XAML属性字符串中指定一个KeySpline值,该字符串具有四个以空格或逗号分隔的Double值,如KeySpline=”0.0,1.0 1.0,0.0”.这些值用作贝塞尔曲线的两个控制点X,Y对.X是时间,Y是对值的函数修饰符.<br>每个值应该始终介于0-1之间.控制点更改该曲线的形状,并因此会更改样条动画的函数随时间变化的行为.<br>每个控制点会影响控制样式动画速率的概念曲线的形状,同时更改(0,0)和(1,1)之间的线性进度,keySplines的语法必须指定且仅指定两个控制点,如果曲线只需要一个控制点,可以重复同一个控制点,如果不将控制点修改为KeySpline,则从(0,0)到(1,1)的直线是线性插入的时间函数的表示形式.<br>下面的示例,通过对比在Canvas控件上移动的两个矩形,演示了一个样条关键帧动画的运动轨迹和一个线性关键帧动画运行轨迹的对比.第一个矩形使用一个具有SplineDoubleKeyFrame对象的DoubleAnimationUsingKeyFrames动画来控制Canvas.Top属性使它从400到0按照样条关键帧的轨迹变化和使用一个具有LinearDoubleKeyFrame对象的DoubleAnimationUsingKeyFrames动画来控制Canvas.Left属性使它从0到400按照线性关键帧的轨迹变化,第二个矩形使用了两个具有DoubleAnimationUsingKeyFrames动画来控制Canvas.Top和Canvas.Left属性,使其匀速的从左下角向右上角运动,两个矩形同时到达目标位置(10秒之后),但是第一个矩形在其运动过程中会有明显的加速和减速,加速时会超过第二个矩形,而减速又会落后于第二个矩形.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid x:Name=<span class="string">&quot;LayoutRoot&quot;</span> Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">    &lt;Grid.Resources&gt;</span><br><span class="line">        &lt;Storyboard x:Name=<span class="string">&quot;SplineKeyStoryBoard&quot;</span>&gt;</span><br><span class="line">            &lt;!--对第一个矩形的Canvas.Top属性使用样条关键帧动画--&gt;</span><br><span class="line">            &lt;DoubleAnimationUsingKeyFrames </span><br><span class="line">                Storyboard.TargetName=<span class="string">&quot;srect&quot;</span></span><br><span class="line">                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span></span><br><span class="line">                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                &lt;SplineDoubleKeyFrame Value=<span class="string">&quot;0&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                      KeySpline=<span class="string">&quot;0.0,1.0 1.0,0.0&quot;</span>/&gt;</span><br><span class="line">            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">            &lt;!--对第一个矩形的Canvas.Left属性使用线性关键帧动画--&gt;</span><br><span class="line">            &lt;DoubleAnimationUsingKeyFrames</span><br><span class="line">                Storyboard.TargetName=<span class="string">&quot;srect&quot;</span></span><br><span class="line">                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span></span><br><span class="line">                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;400&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">            &lt;!--对第二个矩形的Canvas.Top属性使用线性关键帧动画--&gt;</span><br><span class="line">            &lt;DoubleAnimationUsingKeyFrames </span><br><span class="line">                Storyboard.TargetName=<span class="string">&quot;srect2&quot;</span></span><br><span class="line">                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span></span><br><span class="line">                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;0&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">            &lt;!--对第二个矩形的Canvas.Left属性使用线性关键帧动画--&gt;</span><br><span class="line">            &lt;DoubleAnimationUsingKeyFrames</span><br><span class="line">                Storyboard.TargetName=<span class="string">&quot;srect2&quot;</span></span><br><span class="line">                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span></span><br><span class="line">                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;400&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">        &lt;/Storyboard&gt;</span><br><span class="line">    &lt;/Grid.Resources&gt;</span><br><span class="line">    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">            &lt;!--第一个矩形的运动轨迹时采用样条关键帧的方式从左下角向右上角用变化的加速度运动--&gt;</span><br><span class="line">            &lt;Rectangle x:Name=<span class="string">&quot;srect&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Purple&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!--第二个矩形的运动轨迹是采用线性关键帧的方式从左下角向右上角匀速运动--&gt;</span><br><span class="line">            &lt;Rectangle x:Name=<span class="string">&quot;srect2&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">            &lt;Button Content=<span class="string">&quot;运行动画&quot;</span> Canvas.Top=<span class="string">&quot;500&quot;</span> Click=<span class="string">&quot;Button_Click_7&quot;</span>/&gt;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    &lt;/Canvas&gt;</span><br><span class="line">&lt;/Grid&gt;</span><br></pre></td></tr></table></figure>
<p>9.34.离散关键帧<br>离散关键帧就不会进行平滑的过度,而是当到达关键时间时,属性突然改变到新数值,离散关键帧根本不使用任何插入,使用离散关键帧,动画函数将从一个值跳到下一个没有内插的值.动画在持续时间结束之前不会更改其输出值,直到结束时间点,才会修改.也就是说在KeyTime到达后,只是简单的应用新的Value,离散关键帧可以比线性和样条支持更多类型属性进行动画处理.无法线性变化的属性使用离散关键帧.<br>线性关键帧类使用Linear+数据类型+KeyFrame的形式进行命名.离散关键帧类使用Discrete+数据类型+KeyFrame形式进行命名.当运行这个动画时,中心点会在合适的时间从一个位置跳到下一个位置,这是不平稳的动画效果.下面来看一个针对Point属性的离散关键帧动画,通过改变椭圆填充LinearGradientBrush画刷的开始点的值从而实现了椭圆的颜色渐变的变化效果.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">        &lt;Grid&gt;</span><br><span class="line">            &lt;Grid.Resources&gt;</span><br><span class="line">                &lt;Storyboard x:Name=<span class="string">&quot;Discretestoryboard&quot;</span>&gt;</span><br><span class="line">                    &lt;PointAnimationUsingKeyFrames Storyboard.TargetName=<span class="string">&quot;myLinearGradientBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;StartPoint&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.1,0.3&quot;</span> KeyTime=<span class="string">&quot;0:0:0&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.2,0.4&quot;</span> KeyTime=<span class="string">&quot;0:0:1&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.3,0.5&quot;</span> KeyTime=<span class="string">&quot;0:0:2&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.4,0.6&quot;</span> KeyTime=<span class="string">&quot;0:0:3&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.5,0.7&quot;</span> KeyTime=<span class="string">&quot;0:0:4&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.6,0.8&quot;</span> KeyTime=<span class="string">&quot;0:0:5&quot;</span>/&gt;</span><br><span class="line">                        &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.7,0.9&quot;</span> KeyTime=<span class="string">&quot;0:0:6&quot;</span>/&gt;</span><br><span class="line">                    &lt;/PointAnimationUsingKeyFrames&gt;</span><br><span class="line">                &lt;/Storyboard&gt;</span><br><span class="line">            &lt;/Grid.Resources&gt;</span><br><span class="line">            &lt;StackPanel&gt;</span><br><span class="line">                &lt;Ellipse x:Name=<span class="string">&quot;ellipse&quot;</span>&gt;</span><br><span class="line">                    &lt;Ellipse.Fill&gt;</span><br><span class="line">                        &lt;LinearGradientBrush x:Name=<span class="string">&quot;myLinearGradientBrush&quot;</span></span><br><span class="line">                                             StartPoint=<span class="string">&quot;0,0&quot;</span> EndPoint=<span class="string">&quot;1,0&quot;</span>&gt;</span><br><span class="line">                            &lt;LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;White&quot;</span> Offset=<span class="string">&quot;0.001&quot;</span>/&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;Blue&quot;</span> Offset=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                            &lt;/LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                        &lt;/LinearGradientBrush&gt;</span><br><span class="line">                    &lt;/Ellipse.Fill&gt;</span><br><span class="line">                &lt;/Ellipse&gt;</span><br><span class="line">                &lt;Button Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;100&quot;</span> Click=<span class="string">&quot;Button_Click_8&quot;</span>/&gt;</span><br><span class="line">            &lt;/StackPanel&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_8(object sender, RoutedEventArgs e)</span><br><span class="line">&#123;</span><br><span class="line">    Discretestoryboard.Begin();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有一种动画类型是可以将动画化的值应用于其类型不是Double,Point,Color的属性的唯一方法,它就是关键帧动画ObjectAnimationUsingKeyFrames.使用Object值的动画非常不同.因为不可能在帧之间插入值.当帧的KeyTime到达时,动画化的值将立即设置为关键帧的Value中指定的值,由于没有任何插入,因此只有一种关键帧用于ObjectAnimationUsingKeyFrame.关键帧集合:DiscreteObjectKeyFrame.DiscreteObjectKeyFrame的Value通常使用属性元素语法设置.因为设置的对象值通常不可表示为字符串以采用属性语法填充Value.如果使用引用,例如StaticResource,则可以使用属性语法.<br>在使用的Button控件的默认样式里面可以发现,按钮的点击状态和不可用状态都使用了ObjectAnimationUsingKeyFrames的离散关键帧动画来改变按钮的背景画刷颜色.因为系统的背景资源、是SolidColorBrush对象,而不仅仅是Color值,但由于SolidColorBrush不是Double,Point或Color,因此必须使用ObjectAnimationUsingKeyFrames才能使用该资源.<br>另外,还可使用ObjectAnimationUsingKeyFrames来设置使用枚举值的属性的动画,如果把按钮的Disabled状态改成要隐藏按钮,可以获取Visibility枚举常量的Visibility属性,在这种情况下,可以使用属性语法设置该值,使用枚举值设置属性,例如Collapsed.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;VisualState x:Name=<span class="string">&quot;Disabled&quot;</span>&gt;</span><br><span class="line">&lt;Storyboard&gt;</span><br><span class="line">	&lt;ObjectAnimationUsingKeyFrames Storyboard.TargetName=<span class="string">&quot;ContentContainer&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Visibility&quot;</span>&gt;</span><br><span class="line">	&lt;DiscreteObjectKeyFrame KeyTime=<span class="string">&quot;0&quot;</span> Value=<span class="string">&quot;Collapsed&quot;</span>/&gt;</span><br><span class="line">	&lt;/ObjectAnimationUsingKeyFrames&gt;</span><br><span class="line">&lt;/Storyboard&gt;</span><br><span class="line">&lt;/VisualState&gt;</span><br></pre></td></tr></table></figure>
<p>9.4.缓动函数动画<br>Window10内置了11种缓动函数动画:BackEase,BounceEase,CircleEase,CubicEase,ElasticEase,ExponentialEase,PowerEase,QuadraticEase,QuinticEase和SineEase.<br>    有些缓动函数具有其自己的属性,例如BounceEase具有两个属性(Bounces和Bounciness),用于修改该特定的BounceEase随时间变化的函数行为,其他缓动函数(CubicEase)不具有除所有缓动函数共享的EasingMode属性之外的任何属性,并且始终产生相同的随时间变化的函数行为,根据你在具有多个属性的缓动函数上设置的属性,这些缓动函数中的某些函数会有些重叠,例如,QuadraticEase与其Power等于2的PowerEase完全相同.并且CircleEase基本上就是具有默认值的ExponentialEase.<br>BackEase缓动函数是唯一的,因为它可以更改正常范围之外的值(在由From/To设置时)或关键帧的值,它通过更改相反方向的值启动动画,按照预期从正常的From/To行为开始,再次返回至From或起始值,然后按正常行为运行动画.<br>    缓动函数可以以三种方式应用于动画:<br>    1.通过在关键帧动画中使用缓动关键,使用EasingColorKeyFrame.EasingFunction,EasingDoubleKeyFrame,EasingFunction或EasingPointKeyFrame.EasingFunction.<br>    2.通过在线性插值动画类型上设置EasingFunction属性,使用ColorAnimation.EasingFunction,DoubleAnimation.EasingFunction或PointAnimation.EasingFunction.<br>    3.通过将GeneratedEasingFunction设置为VisualTransition的一部分,这种方式专用于定义控件的视觉状态.<br>9.42.BackEase动画<br>BackEase:在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动通过指定动画的EasingMode属性值,可以控制动画中Back行为发生的时间.<br>用于此动画的函数公式如下所示:f(t)=t3-t<em>a</em>sin(t*Π) a:amplitude<br>EasingMode=”EaseIn”    EasingMode=”EaseOut”    EasingMode=”EaseInOut”<br>因为此动画导致值在前进前收回,所以动画可能会意外插入到负数中,当对不支持负数的属性进行动画处理时,可能会引发错误.如果将此动画应用到对象的Height(例如,对于EaseIn的EasingMode,应为0-200),则该动画将尝试对Height插入负数,从而引发错误.<br>下面用一个示例来演示BackEase的EaseInOut的动画效果,注意动画快要结束时可以发现第一个椭圆是先变大再变小,第二个椭圆的运动轨迹与上面的图形是相似的.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;Easestoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselScaleTransform&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;ScaleX&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselScaleTransform&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse4&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse4&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;!--第一个椭圆展示了BackEase的放大动画效果--&gt;</span><br><span class="line">                       &lt;Ellipse Name=<span class="string">&quot;ellipse3&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                           &lt;Ellipse.RenderTransform&gt;</span><br><span class="line">                               &lt;ScaleTransform x:Name=<span class="string">&quot;ellipselScaleTransform&quot;</span>&gt;</span><br><span class="line">                                   </span><br><span class="line">                               &lt;/ScaleTransform&gt;</span><br><span class="line">                           &lt;/Ellipse.RenderTransform&gt;</span><br><span class="line">                       &lt;/Ellipse&gt;</span><br><span class="line">                       &lt;!--第二个椭圆展示了BackEase的运动轨迹--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse4&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_10&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line"></span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_10(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Easestoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.43.BounceEase动画<br>BounceEase:创建弹跳效果.f(t)表示动画进度,t表示时间<br>EasingMode=”EaseIn”    EasingMode=”EaseOut” EasingMode=”EaseInOut”<br>可以使用Bounces属性指定弹跳次数并使用Bounciness属性指定弹跳程度(弹性大小).Bounciness属性指定下一个反弹的幅度缩放,例如反弹度值2会使渐入中下一个反弹的幅度翻倍,并且会使渐出中下一个反弹的幅度减半.<br>下面用一个示例演示BounceEase的EaseOut的动画效果,第一个椭圆会有几次变大变小的效果,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;Bouncestoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                            Storyboard.TargetName=<span class="string">&quot;ellipse5&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;80&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                            Storyboard.TargetName=<span class="string">&quot;ellipse5&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;Height&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                  </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse6&quot;</span>         Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse6&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;!--第一个椭圆展示了BounceEase的动画效果--&gt;</span><br><span class="line">                       &lt;Ellipse Name=<span class="string">&quot;ellipse5&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                       &lt;!--第二个椭圆展示了BounceEase的运动轨迹--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse6&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_11&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_11(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Bouncestoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.44.CircleEase动画<br>CircleEase:创建使用循环函数加速和/或减速的动画.通过指定EasingMode,可以控制动画加速与减速.<br>用于此函数的函数公式如下:<br>f(t)=1-(1-t2)平方根<br>t的有效值为-1&lt;=t&lt;=1,大于1的值将被计算为1,而小于-1的值则被计算为-1<br>这意味着此时间间隔之外的值的动画继续,但缓动函数在进入无效的域时暂停,并在离开无效的域时恢复.<br>下面用一个示例来演示一下CircleEase的EaseOut的动画效果,第一个椭圆的宽度会先快速的拉长然后再慢慢的拉长,第二个椭圆的运动轨迹与上面EaseOut的动画轨迹图形是相似的,类似沿着一个四分之一圆的轨迹进行运动.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;CircleEasestoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;80&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;ellipse7&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CircleEase EasingMode=<span class="string">&quot;EaseOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse8&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse8&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CircleEase EasingMode=<span class="string">&quot;EaseOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了CircleEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse7&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了CircleEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse8&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_12&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line"> private void Button_Click_12(object sender, RoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            CircleEasestoryboard.Begin();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>9.45.CubicEase动画<br>CubicEase:创建使用公式f(t)=t3加速和/或减速的动画,通过指定EasingMode,可以控制动画加速或减速.<br>下面来演示CircleEase的EaseOut的动画效果,第一个椭圆展示出来的是一种很自然的翻转效果,像是上面被推了一下然后突然翻转过来到前端时间比较慢,后半段时间速度就快速增大,第二个椭圆的运动轨迹与上面EaseInOut动画轨迹是相似的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;Cubicstoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;180&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselPlaneProjection&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;RotationX&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;CubicEase EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse10&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse10&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;CubicEase EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;!--第一个椭圆展示了CubicEase的动画效果--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse9&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                           &lt;Ellipse.Projection&gt;</span><br><span class="line">                               &lt;PlaneProjection RotationX=<span class="string">&quot;0&quot;</span> x:Name=<span class="string">&quot;ellipselPlaneProjection&quot;</span>&gt;</span><br><span class="line">                               &lt;/PlaneProjection&gt;</span><br><span class="line">                           &lt;/Ellipse.Projection&gt;</span><br><span class="line">                       &lt;/Ellipse&gt;</span><br><span class="line">                       &lt;!--第二个椭圆展示了CubicEase的运动轨迹--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse10&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_13&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line"> private void Button_Click_13(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Cubicstoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.46.ElasticEase动画<br>ElasticEase:创建类似于弹簧在停止前来回震荡的动画,通过指定EasingMode属性值,可以控制动画中”弹簧”行为发生的时间.<br>可以使用Oscillations属性指定动画来回振动的次数,以及使用Springiness属性指定振动弹性的张紧程度,<br>因为此动画导致值来回振动,所以此动画可能会意外插入到负数中.当对不支持负数的属性进行动画处理时,这可能会引发错误.<br>下面用一个示例来演示ElasticEase的EaseOut的动画效果,第一个椭圆和线条展示出来的是用有弹性的绳子栓住吊球,然后往下掉落的这种自然效果,线条相当于是有弹性的绳子,而第一个椭圆相当于吊球,第二个椭圆模拟了上面EaseOut的动画轨迹图形</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;Elasticstoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--线条的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                            Storyboard.TargetName=<span class="string">&quot;line1&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;Y2&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse11&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse12&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse12&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;!--线条展示了ElasticEase的动画效果--&gt;</span><br><span class="line">                       &lt;Line x:Name=<span class="string">&quot;line1&quot;</span> X1=<span class="string">&quot;50&quot;</span> Y1=<span class="string">&quot;0&quot;</span> X2=<span class="string">&quot;50&quot;</span> Y2=<span class="string">&quot;50&quot;</span></span><br><span class="line">                             Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;10&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                       &lt;!--第一个椭圆展示了ElasticEase的动画效果--&gt;</span><br><span class="line">                       &lt;Ellipse Name=<span class="string">&quot;ellipse11&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span> Width=<span class="string">&quot;100&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                       &lt;!--第二个椭圆展示了ElasticEase的运动轨迹--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse12&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_14&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_14(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Elasticstoryboard.Begin();  </span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.47.ExponentialEase动画<br>ExponentialEase:创建使用指数公式加速和/或减速的动画.通过指定EasingMode,可以控制动画加速与减速<br>下面来演示ExponentialEase的EaseIn的动画效果,第一个动画开始时非常缓慢,然后突然间加速冲到最底下,<br>第二个类似EaseIn动画轨迹图形</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;ExponentialStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse13&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;ExponentialEase Exponent=<span class="string">&quot;10&quot;</span> EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse14&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse14&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;ExponentialEase Exponent=<span class="string">&quot;10&quot;</span> EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;!--第一个椭圆展示了ExponentialEase的动画效果--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse13&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                       &lt;!--第二个椭圆展示了ExponentialEase的运动轨迹--&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse14&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_15&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_15(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           ExponentialStoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.48.PowerEase/QuadraticEase/QuarticEase/QuinticEase动画<br>PowerEase:创建使用公式f(t)=tp次方(其中,p等于Power属性)加速和/减速的动画<br>公式f(t)=tp次方,因此,PowerEase函数可由QuadraticEase(ft=t2),CubicEase(ft=t3),QuarticEase(ft=t4)和QuinticEase(ft=t5)替代.<br>如果希望用PowerEase函数来创建与QuadraticEase函数(ft=t2)创建的行为相同的行为,应将Power属性指定为2,QuadraticEase:创建使用ft=t2加速和/或减速的动画.QuarticEase:创建使用公式ft=t4加速和/或减速的动画<br>下面演示PowerEase的EaseIn的动画效果,通过Slider控件设置PowerEase的Power值,Power值越大第一个椭圆后面掉落的加速度就越大,加速的时间也越短.第二个椭圆的运动轨迹模拟了上面EaseIn的动画轨迹图形.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;powerStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse15&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;PowerEase EasingMode=<span class="string">&quot;EaseIn&quot;</span> x:Name=<span class="string">&quot;powerEase1&quot;</span>/&gt;</span><br><span class="line">                                   </span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse16&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse16&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;PowerEase EasingMode=<span class="string">&quot;EaseIn&quot;</span> x:Name=<span class="string">&quot;powerEase2&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;Ellipse Name=<span class="string">&quot;ellipse15&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse16&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_16&quot;</span>/&gt;</span><br><span class="line">                       &lt;Slider x:Name=<span class="string">&quot;powerSlider&quot;</span> Margin=<span class="string">&quot;200,500,0,0&quot;</span></span><br><span class="line">                               Width=<span class="string">&quot;200&quot;</span> Background=<span class="string">&quot;Red&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> Minimum=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_16(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           powerEase1.Power = powerSlider.Value;</span><br><span class="line">           powerEase2.Power= powerSlider.Value;</span><br><span class="line">           powerStoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.49.SineEase动画<br>SineEase:创建使用正弦公式加速和/或减速的动画.<br>ft=1-[sin(1-t)*(Π/2)]<br>下面用一个示例演示SineEase的EaseIn动画效果,相比PowerEase平缓了许多.第二个模拟了EaseIn动画轨迹图形</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                   &lt;Grid.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;SineStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse17&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;SineEase EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse18&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                           &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse18&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                               &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                   &lt;SineEase EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                               &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/Grid.Resources&gt;</span><br><span class="line">                   &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                       &lt;Ellipse Name=<span class="string">&quot;ellipse17&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                       &lt;Ellipse x:Name=<span class="string">&quot;ellipse18&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_17&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">private void Button_Click_17(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           SineStoryboard.Begin();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.5.基于帧动画<br>9.51.原理<br>基于帧动画的创建主要是依赖CompositionTarget类,CompositionTarget是一个静态类,表示应用程序要在其上进行绘制的显示画面.每次绘制场景时,都会引发Rendering事件,创建基于帧动画的语法很简单,只需要为静态的CompositionTarget.Rendering事件关联事件处理程序,然后在事件处理程序处理动画的内容.<br>如果要结束动画,就移除CompositionTarget.Rendering关联事件处理程序.由此可见,基于帧动画只能使用C#代码进行创建,不能像其他动画用Xaml来编写,同时也无法在样式,控件模板或数据模板中定义.<br>当构建基于帧的动画时:它们不是依赖于时间的.动画可能在性能好的设备上运动更快,因为帧速率会增加,从而会更频繁的调用CompositionTarget.Rendering事件.CompositionTarget.Rendering事件的调用频率并不是一个固定值,它是和设备及当前应用程序的运行状况紧密相关,如果程序在基于帧动画的时候还在处理其他耗时操作时,CompositionTarget.Rendering事件的调用频率就会比较低.由于CompositionTarget.Rendering事件可以根据当前的状况来调整动画的频率使得动画更加流畅,所以它比直接使用定时器DispatcherTimer做原始的动画处理更加优越.<br>9.52.基于帧动画的应用场景<br>1.线性插值动画和关键帧动画实现不了或很难实现的动画.<br>2.创建一个基于物理的动画或者构建粒子效果模型如火焰,雪以及气泡.<br>9.53.基于帧动画的实现<br>下面通过一个例子来演示基于帧动画的运用,动画要实现的效果是通过在Canvas面板中触摸滑动来控制矩形Rectangle滑块的运动,滑块会往面板触摸的方向运动,但是滑块不能离开Canvas面板.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"> &lt;Canvas Background=<span class="string">&quot;Gray&quot;</span> PointerMoved=<span class="string">&quot;Canvas_PointerMoved&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle x:Name=<span class="string">&quot;prectangle&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;100&quot;</span></span><br><span class="line">                               RadiusX=<span class="string">&quot;12.5&quot;</span> RadiusY=<span class="string">&quot;12.5&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.Fill&gt;</span><br><span class="line">                            &lt;LinearGradientBrush&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;Black&quot;</span> Offset=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;White&quot;</span> Offset=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;Black&quot;</span> Offset=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                            &lt;/LinearGradientBrush&gt;</span><br><span class="line">                        &lt;/Rectangle.Fill&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line"> ///基于帧动画</span><br><span class="line">            ///</span><br><span class="line">            CompositionTarget.Rendering += CompositionTarget_Rendering;</span><br><span class="line">            this.prectangle.RenderTransform = translateTransform;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">        /// 处理基于帧的事件,动画的逻辑在这个事件里面进行处理</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void CompositionTarget_Rendering(object sender, object e)</span><br><span class="line">        &#123;</span><br><span class="line">           var currentTime=DateTime.Now;</span><br><span class="line">            //计算两帧之间的时间差,把时间差作为计算位移的系数</span><br><span class="line">            double elapsedTime = (currentTime - preTime).TotalSeconds;</span><br><span class="line">            preTime=currentTime;</span><br><span class="line">            //控制矩形的移动不超过画布面板的边界</span><br><span class="line">            translateTransform.X += mouseLocation.X * elapsedTime;</span><br><span class="line">            <span class="keyword">if</span> (translateTransform.X &gt; 300) translateTransform.X = 300;</span><br><span class="line">            <span class="keyword">if</span>(translateTransform.X&lt;0)translateTransform.X = 0;</span><br><span class="line">            translateTransform.Y+= mouseLocation.Y * elapsedTime;</span><br><span class="line">            <span class="keyword">if</span> (translateTransform.Y &gt; 450) translateTransform.Y = 450;</span><br><span class="line">            <span class="keyword">if</span> (translateTransform.Y &lt; 0)translateTransform.Y= 0;</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line"> //触摸点的位置</span><br><span class="line">        Point mouseLocation;</span><br><span class="line">        //用于矩形的位移变换改变矩形的位置</span><br><span class="line">        TranslateTransform translateTransform=new TranslateTransform();</span><br><span class="line">        //用于保存上一帧时间,计算时间差</span><br><span class="line">        DateTime preTime=DateTime.Now;</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 通过PointerMoved事件获取当前的触摸点相对于矩形的坐标,滑动点在矩形左边X值为负值,右边X值为正值.在上边Y值为负值,在下便Y值为正值.</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void Canvas_PointerMoved(object sender, PointerRoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            mouseLocation = e.GetCurrentPoint(this.prectangle).Position;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>9.61.帧速率<br>帧速率是用于测量显示帧数的量度,测量单位为”每秒显示帧数”,是指每秒钟刷新画面的帧数，判断一个动画是否能够流畅的运行,就需要关注动画的帧速率指标是否足够高.<br>在Win10里面虽然不能直接设置动画帧速率,但是可以测量出来,在应用程序里面把属性Application.Current.Host.Settings.EnableFrameRateCounter设置为true将可以在设备的顶部左侧看到帧速率的计数变化情况,默认情况采用Debug调试状态下就会显示出应用当前的帧速率.帧速率的范围是0-60，帧速率越大,应用程序的响应性能越高.帧速率的值一般应在20以上,该值小于30表示存在性能问题.<br>默认情况下会在文件App.xaml.cs中添加启用帧速率计数器的代码.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (System.Diagnostics.Debugger.IsAttached) &#123; </span><br><span class="line">           this.DebugSettings.EnableFrameRateCounter = <span class="literal">true</span>;</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>
<p>表示当启动Debug状态调试应用程序时会启用帧速率计数器.其中Application.Current.Host.Settings.EnableFrameRateCounter=true表示启用帧速率计数器,设置为false则禁用帧速率计数器.<br>9.62.UI线程和构图线程<br>2.构图线程<br>工作是合并图形纹理并将其传递到GPU以供绘制,设备上的GPU将在称为自动缓存的进程中自动缓存并处理运行在构图线程上的动画,构图线程处理与变换特效(RenderTransform)和三维特效(Projection)属性关联的动画(如针对ScaleTransform,TranslateTransform,RotateTransform,PlaneProjection的属性改变的Storyboard动画)都是完全运行在构图线程上的.另外,Opacity和Clip属性设置也由构图线程处理.但是,如果使用OpacityMask或非矩形剪辑,则这些操作将传递到UI线程.<br>3.动画和线程<br>下面通过一个例子来演示用两种不同的方法来实现一个相同的动画效果,所实现的动画效果是让矩形的高度慢慢变成原来的两倍,第一种方式是用线性插值动画对矩形的Height属性进行动画处理,第二种方式也是线性插值动画,但是针对的动画目标属性是ScaleTransform的ScaleY属性,然后用一个按钮单击事件阻塞UI线程2秒钟,可以看到针对Height属性的动画会暂停2秒钟再继续运行,而针对ScaleTransform的ScaleY属性不会受UI线程阻塞的影响.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackPanel&gt;</span><br><span class="line">                   &lt;StackPanel.Resources&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;heightStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--针对Height属性的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;rectangle1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Height&quot;</span></span><br><span class="line">                                            RepeatBehavior=<span class="string">&quot;Forever&quot;</span></span><br><span class="line">                                            EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                            From=<span class="string">&quot;100&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:2&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                       &lt;Storyboard x:Name=<span class="string">&quot;scaleTransformStoryboard&quot;</span>&gt;</span><br><span class="line">                           &lt;!--针对ScaleTransform的ScaleY属性的动画--&gt;</span><br><span class="line">                           &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;scaleTransform1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span> From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:2&quot;</span>&gt;</span><br><span class="line">                           &lt;/DoubleAnimation&gt;</span><br><span class="line">                       &lt;/Storyboard&gt;</span><br><span class="line">                   &lt;/StackPanel.Resources&gt;</span><br><span class="line">                   &lt;Button Content=<span class="string">&quot;阻塞UI线程&quot;</span> Click=<span class="string">&quot;Button_Click_18&quot;</span>/&gt;</span><br><span class="line">                   &lt;Button x:Name=<span class="string">&quot;heightAnimationButton&quot;</span> Content=<span class="string">&quot;Height属性动画&quot;</span> Click=<span class="string">&quot;heightAnimationButton_Click&quot;</span>/&gt;</span><br><span class="line">                   &lt;Button x:Name=<span class="string">&quot;scaleTransformAnimationButton&quot;</span> Content=<span class="string">&quot;ScaleTransform属性动画&quot;</span> Click=<span class="string">&quot;scaleTransformAnimationButton_Click&quot;</span>/&gt;</span><br><span class="line">                   &lt;Rectangle Height=<span class="string">&quot;100&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span> x:Name=<span class="string">&quot;rectangle1&quot;</span>&gt;</span><br><span class="line">                       &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                           &lt;ScaleTransform x:Name=<span class="string">&quot;scaleTransform1&quot;</span>/&gt;</span><br><span class="line">                       &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                   &lt;/Rectangle&gt;</span><br><span class="line">               &lt;/StackPanel&gt;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">       /// 阻塞线程2秒钟</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_Click_18(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Task.Delay(2000).Wait();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void heightAnimationButton_Click(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           //播放改变高度属性的动画,高度由100变成200</span><br><span class="line">           scaleTransformStoryboard.Stop();</span><br><span class="line">           heightStoryboard.Begin();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void scaleTransformAnimationButton_Click(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           heightStoryboard.Stop();</span><br><span class="line">           scaleTransformStoryboard.Begin();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.7.模拟实现微信的彩蛋动画<br>9.72.星星创建工厂<br>实现星星的创建工厂StarFactory类,StarFactory类的作用是创建动画里面的星星对象,动画的实现需要向调用StarFactory类创建出星星对象,然后对星星进行动画处理,所以StarFactory类是一个非常单一的星星构造工厂,不涉及动画的操作,只涉及Path对象的创建<br>下面是星星图形形状的构造封装的3个方法:1._RefactorPoints方法是用于取两个点线段之间的1/3,2/3点和两点间的随机点,最后再加上原来的两个点,返回5个点的点集合;2._RecurseSide方法是封装两个点之间递归之后所取到的点集合;3._CreatePath方法则是把这些点集合连接起来创建一个Path图形表示星星图形.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">public class StarFactory</span><br><span class="line">   &#123;</span><br><span class="line">       public <span class="function"><span class="title">StarFactory</span></span>() &#123; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 把两个点转换成多级的点的集合</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;a&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;b&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;level&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       private static List&lt;Point&gt; _RecurseSide(Point a,Point b,int level) &#123;</span><br><span class="line">           ///递归完成后,返回此线段</span><br><span class="line">           <span class="keyword">if</span> (level==0)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="built_in">return</span> new List&lt;Point&gt; &#123; a,b&#125;;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               //首先,需要建立起第一次递归的点的列表,一直递归到级别为0</span><br><span class="line">               List&lt;Point&gt; newPoints = new List&lt;Point&gt;();</span><br><span class="line">               //把区域分成5个点</span><br><span class="line">               foreach (Point item <span class="keyword">in</span> _RefactorPoints(a,b))</span><br><span class="line">               &#123;</span><br><span class="line">                   newPoints.Add(item);</span><br><span class="line">               &#125;</span><br><span class="line">               List&lt;Point&gt; aggregatePoints= new List&lt;Point&gt;();</span><br><span class="line">               //把每一个线段进一步分解</span><br><span class="line">               <span class="keyword">for</span> (int i = 0; i &lt; newPoints.Count; i++)</span><br><span class="line">               &#123;</span><br><span class="line">                   int y = i + 1 == newPoints.Count ? 0 : i + 1;</span><br><span class="line">                   aggregatePoints.AddRange(_RecurseSide(newPoints[i], newPoints[y],level-1));</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="built_in">return</span> aggregatePoints;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     static Random _random= new Random();</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 通过输入两个点来构建一个有多个三角形组成的Star形状</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;a&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;b&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">       private static IEnumerable&lt;Point&gt; _RefactorPoints(Point a, Point b)</span><br><span class="line">       &#123;</span><br><span class="line">          //第一个点</span><br><span class="line">          yield <span class="built_in">return</span> a;</span><br><span class="line">           double dX = b.X - a.Y;</span><br><span class="line">           double dY= b.Y - a.Y;</span><br><span class="line">           //第一点到第二个点1/3处的一个点</span><br><span class="line">           yield <span class="built_in">return</span> new Point(a.X+dX/3.0,a.Y+dY/3.0);</span><br><span class="line">           double <span class="built_in">factor</span>=_random.NextDouble()- 0.5;</span><br><span class="line">           double vX = (a.X + b.X) / (2.0 + <span class="built_in">factor</span>)+Math.Sqrt(3.0+<span class="built_in">factor</span>)*(b.Y-a.Y)/(6.0+<span class="built_in">factor</span>*2.0);</span><br><span class="line">           double vY = (a.Y + b.Y) / (2.0 + <span class="built_in">factor</span>) + Math.Sqrt(3.0+<span class="built_in">factor</span>)*(a.X-b.X)/(6.0+<span class="built_in">factor</span>*2.0);</span><br><span class="line">           //中间的三角形的顶点</span><br><span class="line">           yield <span class="built_in">return</span> new Point(vX,vY);</span><br><span class="line">           //第二个点到第一个点1/3处的一个点</span><br><span class="line">           yield <span class="built_in">return</span> new Point(b.X-dX/3.0,b.Y-dY/3.0);</span><br><span class="line">           //第二个点</span><br><span class="line">           yield <span class="built_in">return</span> b;</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 使用一系列点来创建路径图形</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       private static Path _CreatePath(List&lt;Point&gt; points) &#123; </span><br><span class="line">           PathSegmentCollection segments= new PathSegmentCollection();</span><br><span class="line">           bool first = <span class="literal">true</span>;</span><br><span class="line">           //把点添加到线段里面</span><br><span class="line">           foreach (Point item <span class="keyword">in</span> points)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">if</span> (first)</span><br><span class="line">               &#123;</span><br><span class="line">                   first = <span class="literal">false</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">else</span></span><br><span class="line">               &#123;</span><br><span class="line">                   segments.Add(new LineSegment &#123; Point = item &#125;);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           PathGeometry pathGeometry= new PathGeometry();</span><br><span class="line">           //通过线段构建几何图形</span><br><span class="line">           pathGeometry.Figures.Add(new PathFigure</span><br><span class="line">           &#123;</span><br><span class="line">               IsClosed = <span class="literal">true</span>,</span><br><span class="line">               StartPoint = points[0],</span><br><span class="line">               Segments = segments</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="built_in">return</span> new Path &#123; Data = pathGeometry &#125;;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>2.星星颜色的随机生成<br>这里用LinearGradientBrush来填充Path图形,封装的方法_GetColor表示创建随机的颜色对象,_ColorFactory表示对Path图形填充随机的颜色画刷.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">        /// 添加颜色到路径图形</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;input&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private static void _ColorFactory(Path input) &#123;</span><br><span class="line">            LinearGradientBrush brush = new LinearGradientBrush();</span><br><span class="line">            brush.StartPoint = new Point(0,0);</span><br><span class="line">            brush.EndPoint= new Point(1.0,1.0);</span><br><span class="line">            GradientStop start=new GradientStop();</span><br><span class="line">            start.Color = _GetColor();</span><br><span class="line">            start.Offset = 0;</span><br><span class="line">            GradientStop middle=new GradientStop();</span><br><span class="line">            middle.Color = _GetColor();</span><br><span class="line">            middle.Offset=_random.NextDouble();</span><br><span class="line">            GradientStop end=new GradientStop();</span><br><span class="line">            end.Color= _GetColor();</span><br><span class="line">            end.Offset = 1.0;</span><br><span class="line">            brush.GradientStops.Add(start);</span><br><span class="line">            brush.GradientStops.Add(middle);</span><br><span class="line">            brush.GradientStops.Add(end);</span><br><span class="line">            input.Fill = brush;</span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 获取一个随机的颜色</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">        private static Color <span class="function"><span class="title">_GetColor</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            Color color = new Color();</span><br><span class="line">            color.A = (byte)(_random.Next(200) + 20);</span><br><span class="line">            color.R = (byte)(_random.Next(200) + 50);</span><br><span class="line">            color.G = (byte)(_random.Next(200) + 50);</span><br><span class="line">            color.B = (byte)(_random.Next(200) + 50);</span><br><span class="line">            <span class="built_in">return</span> color;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>3.创建星星对象<br>创建星星对象需要先有3个点,然后再利用这3个点根据创建星星图形的原理(3*4的n次方),n表示星星递归的层次.创建星星图形,然后用随机颜色画刷填充图形.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const int MIN = 0;</span><br><span class="line">       const int MAX = 2;</span><br><span class="line">       //随机数产生器</span><br><span class="line">       static <span class="built_in">readonly</span> Random _random=new Random();</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 创建一个Star</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       public static Path <span class="function"><span class="title">Create</span></span>() &#123; </span><br><span class="line">       Point a=new Point(0,0);</span><br><span class="line">           Point b = new Point(_random.NextDouble() * 70.0 + 15.0, 0);</span><br><span class="line">           Point c=new Point(0,b.X);</span><br><span class="line">           int levels=_random.Next(MIN,MAX);</span><br><span class="line">           List&lt;Point&gt; points=new List&lt;Point&gt;();</span><br><span class="line">           points.AddRange(_RecurseSide(a,b,levels));</span><br><span class="line">           points.AddRange(_RecurseSide(b,c,levels));</span><br><span class="line">           points.AddRange(_RecurseSide(c,a,levels));</span><br><span class="line">           //画边</span><br><span class="line">           Path retVal=_CreatePath(points);</span><br><span class="line">           //添加颜色</span><br><span class="line">           _ColorFactory(retVal);</span><br><span class="line">           //建立一个旋转的角度</span><br><span class="line">           RotateTransform rotate=new RotateTransform();</span><br><span class="line">           rotate.CenterX = 0.5;</span><br><span class="line">           rotate.CenterY = 0.5;</span><br><span class="line">           rotate.Angle=_random.NextDouble()*360.0;</span><br><span class="line">           retVal.SetValue(Path.RenderTransformProperty,rotate);</span><br><span class="line">           <span class="built_in">return</span> retVal;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>9.73.实现单个星星的动画轨迹<br>要实现对星星实体(StarEntity类)的封装,在StarEntity类里面要实现基于帧动画,在帧刷新事件处理程序里实现星星飘落的动画逻辑.首先需要处理的是确定星星在区域最顶部的随机位置,下落的随机速度和方向,然后在动画的过程中需要去判断星星是否碰撞到了区域的左边距或右边距,碰撞之后则需要再反弹回来往另外一边运动,最后还需要判断星星是否已经落到了最底下,如果落到了区域最底下,则需要移除CompositionTarget.Rendering事件和从画布上移除星星图形,还要触发StarflakeDied事件告知调用方星星已经销毁掉了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">public class StarEntity</span><br><span class="line">   &#123;</span><br><span class="line">       //左边距</span><br><span class="line">       const double LEFT = 460;</span><br><span class="line">       //上边距</span><br><span class="line">       const double TOP = 800;</span><br><span class="line">       //离开屏幕</span><br><span class="line">       const double GONE = 480;</span><br><span class="line">       //随机近似数</span><br><span class="line">       private double _affinity;</span><br><span class="line">       //Star实体的唯一ID</span><br><span class="line">       private Guid _identifier=Guid.NewGuid();</span><br><span class="line">       //随机数产生器</span><br><span class="line">       private static Random _raodom=new Random();</span><br><span class="line">       //Star所在的画布</span><br><span class="line">       private Canvas _surface;</span><br><span class="line">       //获取Star所在的画布</span><br><span class="line">       private Canvas Surface &#123;</span><br><span class="line">           get &#123; <span class="built_in">return</span> _surface; &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       //x,y坐标和相对速度</span><br><span class="line">       private double x, y, velocity;</span><br><span class="line">       //Star的路径图形</span><br><span class="line">       private Path _starflake;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 当Star飘落到底下时回收Star事件</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       private EventHandler StarflakeDied;</span><br><span class="line"></span><br><span class="line">       //获取Star实体的唯一ID</span><br><span class="line">       public Guid Identifier</span><br><span class="line">       &#123;</span><br><span class="line">           get &#123; <span class="built_in">return</span> _identifier; &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       //默认的构造器</span><br><span class="line">       public StarEntity(Action&lt;Path&gt; insert) : this(insert, <span class="literal">true</span>) &#123; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 星星对象构造方法 是否从顶下落下</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;insert&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;v&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       public StarEntity(Action&lt;Path&gt; insert, bool fromTop)</span><br><span class="line">       &#123;</span><br><span class="line">           _starflake = StarFactory.Create();</span><br><span class="line">           ///产生0-1的随机数</span><br><span class="line">           _affinity=_raodom.NextDouble();</span><br><span class="line">           ///设置速度,初始化x,y轴</span><br><span class="line">           velocity=_raodom.NextDouble()*2;</span><br><span class="line">           x = _raodom.NextDouble() * LEFT;</span><br><span class="line">           y=fromTop?0:_raodom.NextDouble() * TOP;</span><br><span class="line">           //设置Star在画布的位置</span><br><span class="line">           _starflake.SetValue(Canvas.LeftProperty,x);</span><br><span class="line">           _starflake.SetValue(Canvas.TopProperty,y);</span><br><span class="line">           //添加到画布上</span><br><span class="line">           insert(_starflake);</span><br><span class="line">           //记录下Star的画布</span><br><span class="line">           _surface = _starflake.Parent as Canvas;</span><br><span class="line">           //订阅基于帧动画事件</span><br><span class="line">           CompositionTarget.Rendering += CompositionTarget_Rendering;</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 基于帧动画事件处理</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">       private void CompositionTarget_Rendering(object sender, object e)</span><br><span class="line">       &#123;</span><br><span class="line">           _Frame();</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;44</span><br><span class="line">       /// Star下落的每一帧的处理</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       private void <span class="function"><span class="title">_Frame</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           //下降的y轴的大小</span><br><span class="line">           y = y + velocity + 3.0 * _raodom.NextDouble() - 1.0;</span><br><span class="line">           //判断是否离开了屏幕</span><br><span class="line">           <span class="keyword">if</span> (y&gt;GONE)</span><br><span class="line">           &#123;</span><br><span class="line">               CompositionTarget.Rendering -= CompositionTarget_Rendering;</span><br><span class="line">               _surface.Children.Remove(_starflake);</span><br><span class="line">               //通知外部,Star已经被清除</span><br><span class="line">               EventHandler handler = StarflakeDied;</span><br><span class="line">               <span class="keyword">if</span> (handler!=null)</span><br><span class="line">               &#123;</span><br><span class="line">                   handler(this,EventArgs.Empty);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               //水平轻推</span><br><span class="line">               double xFactor = 10.0 * _affinity;</span><br><span class="line">               <span class="keyword">if</span> (_affinity &lt; 0.5) xFactor *= -1.0;//小于0.5向左边移动,大于0.5向右边移动，等于0.5垂直下降</span><br><span class="line">               &#123;</span><br><span class="line">                   x = x + _raodom.NextDouble() * xFactor;</span><br><span class="line">               &#125;</span><br><span class="line">               //左边的边缘</span><br><span class="line">               <span class="keyword">if</span> (x&lt;0)</span><br><span class="line">               &#123;</span><br><span class="line">                   x = 0;</span><br><span class="line">                   _affinity = 1.0 - _affinity;</span><br><span class="line">               &#125;</span><br><span class="line">               //右边的边缘</span><br><span class="line">               <span class="keyword">if</span> (x&gt;LEFT)</span><br><span class="line">               &#123;</span><br><span class="line">                   x = LEFT;</span><br><span class="line">                   _affinity=1.0- _affinity;</span><br><span class="line">               &#125;</span><br><span class="line">               _starflake.SetValue(Canvas.LeftProperty,x);</span><br><span class="line">               _starflake.SetValue(Canvas.TopProperty,y);</span><br><span class="line">           &#125;</span><br><span class="line">           //转动</span><br><span class="line">           RotateTransform rotate = (RotateTransform)_starflake.GetValue(Path.RenderTransformProperty);</span><br><span class="line">           rotate.Angle += _raodom.NextDouble() * 4.0 * _affinity;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 重载获取唯一的对象码</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       public override int <span class="function"><span class="title">GetHashCode</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="built_in">return</span> Identifier.GetHashCode();</span><br><span class="line">       &#125;</span><br><span class="line">       public override bool Equals(object obj)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="built_in">return</span> obj is StarEntity &amp;&amp; ((StarEntity)obj).Identifier.Equals(Identifier);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>9.74.封装批量星星飘落的逻辑<br>实现一个StarBehavior类用附加属性的方式在Canvas上添加批量的星星飘落的动画,StarBehavior类里面通过AttachStarFlake属性表示是否在该Canvas面板上添加星星飘落动画,当设置为true则表示触发动画的开始,false则表示停止添加星星,直到星星全部飘落到底下时动画停止.在开始播放动画时会初始化多个StarEntity对象,并运行其飘落的动画效果,当飘落到底下StarEntity对象被销毁时,会触发StarflakeDied事件,在StarflakeDied事件里面继续初始化新的StarEntity对象,如果动画停止了,beginning=false,则不再创建新的StarEntity对象.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">using App1.Models;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line">using Windows.UI.Xaml;</span><br><span class="line">using Windows.UI.Xaml.Controls;</span><br><span class="line"></span><br><span class="line">namespace App1.Behaviors</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// StarBehavior类管理附加属性的行为触发批量星星的构造和动画的实现</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    public static class StarBehavior</span><br><span class="line">    &#123;</span><br><span class="line">        //屏幕上生成的Star数量</span><br><span class="line">        const int CAPACITY = 75;</span><br><span class="line">        //动画是否已经开始的标识符</span><br><span class="line">        private static bool begining=<span class="literal">false</span>;</span><br><span class="line">        //Star对象列表</span><br><span class="line">        private static List&lt;StarEntity&gt; _starflakes=new List&lt;StarEntity&gt;(CAPACITY);</span><br><span class="line">        //添加动画效果的属性</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public static bool GetAttachStarFlake(DependencyObject obj)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span> (bool)obj.GetValue(AttachStarFlakeProperty);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public static void SetAttachStarFlake(DependencyObject obj, bool value)</span><br><span class="line">        &#123;</span><br><span class="line">            obj.SetValue(AttachStarFlakeProperty, value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> AttachStarFlake.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty AttachStarFlakeProperty =</span><br><span class="line">            DependencyProperty.RegisterAttached(<span class="string">&quot;AttachStar&quot;</span>, typeof(bool), typeof(StarBehavior), new PropertyMetadata(<span class="literal">false</span>,new PropertyChangedCallback(_Attach)));</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 附加属性改变事件处理方法</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;d&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private static void _Attach(DependencyObject d, DependencyPropertyChangedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">           Canvas canvas= d as Canvas;</span><br><span class="line">            <span class="keyword">if</span> (canvas != null &amp;&amp; e.NewValue!=null &amp;&amp; e.NewValue.GetType().Equals(typeof(bool))) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((bool)e.NewValue) &#123;</span><br><span class="line">                    //画布上还有子元素证明星星还没完全飘落下去</span><br><span class="line">                    <span class="keyword">if</span> (canvas.Children.Count&gt;0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    //开始动画</span><br><span class="line">                    begining=<span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">for</span> (int i = 0; i &lt; _starflakes.Capacity; i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        StarEntity starflake = new StarEntity((o) =&gt; canvas.Children.Add(o));</span><br><span class="line">                        starflake.StarflakeDied +=new EventHandler(Starflake_StarflakeDied);</span><br><span class="line">                        _starflakes.Add(starflake);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    //结束动画</span><br><span class="line">                    begining = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //回收Star事件</span><br><span class="line">        private static void Starflake_StarflakeDied(object sender, EventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            StarEntity starflake=sender as StarEntity;</span><br><span class="line">            //获取Star的面板,用来添加一个新的Star</span><br><span class="line">            Canvas canvas = starflake.Surface;</span><br><span class="line">            _starflakes.Remove(starflake);</span><br><span class="line">            <span class="keyword">if</span> (begining)</span><br><span class="line">            &#123;</span><br><span class="line">                //如果动画还在继续,运行一个Star消失之后再创建一个新的Star</span><br><span class="line">                StarEntity newFlake = new StarEntity((o)=&gt;canvas.Children.Add(o),<span class="literal">true</span>);</span><br><span class="line">                newFlake.StarflakeDied += Starflake_StarflakeDied;</span><br><span class="line">                _starflakes.Add(newFlake);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>9.75.Star飘落演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;</span><br><span class="line">                   &lt;Canvas x:Name=<span class="string">&quot;myCanvas&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span> VerticalAlignment=<span class="string">&quot;Stretch&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">                   &lt;/Canvas&gt;</span><br><span class="line">                   &lt;Button x:Name=<span class="string">&quot;btn&quot;</span> VerticalAlignment=<span class="string">&quot;Bottom&quot;</span> Content=<span class="string">&quot;开始星星飘落&quot;</span> Click=<span class="string">&quot;btn_Click&quot;</span>/&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">       /// 按钮事件,播放动画和停止动画</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private async void btn_Click(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> ((bool)myCanvas.GetValue(StarBehavior.AttachStarFlakeProperty) == <span class="literal">false</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               //要等所有的星星全部落下去之后才可以再次播放动画</span><br><span class="line">               <span class="keyword">if</span> (myCanvas.Children.Count &gt; 0)</span><br><span class="line">               &#123;</span><br><span class="line">                   await new MessageDialog(<span class="string">&quot;星星动画未完全结束&quot;</span>).ShowAsync();</span><br><span class="line">                   <span class="built_in">return</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               myCanvas.SetValue(StarBehavior.AttachStarFlakeProperty, <span class="literal">true</span>);</span><br><span class="line">               button.Content = <span class="string">&quot;停止&quot;</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> &#123;</span><br><span class="line">               myCanvas.SetValue(StarBehavior.AttachStarFlakeProperty, <span class="literal">false</span>);</span><br><span class="line">               btn.Content = <span class="string">&quot;开始&quot;</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<h4 id="样式和模板"><a href="#样式和模板" class="headerlink" title="样式和模板"></a>样式和模板</h4><p>10.11.创建样式<br>10.21.控件模板(ControlTemplate)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button Content=<span class="string">&quot;Hello World&quot;</span>&gt;</span><br><span class="line">                   &lt;Button.Template&gt;</span><br><span class="line">                       &lt;ControlTemplate&gt;</span><br><span class="line">                           &lt;Grid&gt;</span><br><span class="line">                               &lt;Ellipse Width=<span class="string">&quot;&#123;TemplateBinding Button.Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;TemplateBinding Height&#125;&quot;</span></span><br><span class="line">                                        Fill=<span class="string">&quot;&#123;TemplateBinding Button.Background&#125;&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span></span><br><span class="line">                                          VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                          Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                           &lt;/Grid&gt;</span><br><span class="line">                       &lt;/ControlTemplate&gt;</span><br><span class="line">                   &lt;/Button.Template&gt;</span><br><span class="line">               &lt;/Button&gt;</span><br></pre></td></tr></table></figure>
<p>10.22.ContentControl和ContentPresenter<br>ContentPresenter是用来显示控件ContentControl的Content属性的,ContentPresneter也有Content属性,默认的情况下可以把Content定义的内容投影到ContentControl的Content里面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button&gt;</span><br><span class="line">                   &lt;Button.Template&gt;</span><br><span class="line">                       &lt;ControlTemplate&gt;</span><br><span class="line">                           &lt;Grid&gt;</span><br><span class="line">                               &lt;ContentPresenter HorizontalAlignment=<span class="string">&quot;&#123;TemplateBinding HorizontalAlignment&#125;&quot;</span> VerticalAlignment=<span class="string">&quot;&#123;TemplateBinding VerticalAlignment&#125;&quot;</span>/&gt;</span><br><span class="line">                           &lt;/Grid&gt;</span><br><span class="line">                       &lt;/ControlTemplate&gt;</span><br><span class="line">                   &lt;/Button.Template&gt;</span><br><span class="line">                   &lt;Button.Content&gt;</span><br><span class="line">                       &lt;Rectangle Fill=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Button.Content&gt;</span><br><span class="line">               &lt;/Button&gt;</span><br></pre></td></tr></table></figure>
<p>10.23.视觉状态管理(VisualStatesManager)<br>通过ControlTemplate修改过的Button控件,当我们单击控件时发现比系统默认的Button控件少了一些点击的状态,这时候就需要使用视觉状态管理类VisualStateManager了<br>VisualStateManager的作用是控制控件的状态转换,不同状态下的UI显示效果的区别及转换过程动画.视觉状态管理主要包括VisualStates(视觉状态),VisualStateGroups(视觉状态组)和VisualTransitions（视觉过度转换）.VisualStates是指控件在不同状态下显示的效果,如Button控件默认就包含(Normal,MouseOver,Pressed,Disabled,Unfocused,Focused)六种状态.Visual State Groups是为有互斥效果的控件提供的,对于相同的视觉状态组是互斥的,对于不同的视觉状态组是不互斥的,Visual Transitions是视觉状态切换时的过度的动画效果.<br>VisualStateManager通过在控件上设置VisualStateManager.VisualStateGroups附加属性向控件添加VisualStates和VisualTransitions.VisualStates是VisualState的集合,里面定义了多个VisualState表示控件在不同状态下的视觉表现效果,使用了Storyboard故事板属性来实现当前控件状态的转换,VisualTransitions是VisualTransition的集合,但是VisualTransitions不是必须的,如果控件在不同状态之间转换的时候不需要动画效果,就可以省略掉VisualTransitions.VisualTransition主要有三个属性:From(当前的状态),To(转换的状态)和GeneratedDuration(转换时间).状态的转换是通过调用VisualStateManager类的GoToState方法来实现的.<br>VisualStateManager的Xaml语法如下所示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button Content=<span class="string">&quot;Hello World&quot;</span> LostFocus=<span class="string">&quot;Button_LostFocus&quot;</span> Tapped=<span class="string">&quot;Button_Tapped&quot;</span>&gt;</span><br><span class="line">                   &lt;Button.Template&gt;</span><br><span class="line">                       &lt;ControlTemplate TargetType=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                           &lt;Border&gt;</span><br><span class="line">                               &lt;VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                                   &lt;VisualStateGroup x:Name=<span class="string">&quot;CommonStates&quot;</span>&gt;</span><br><span class="line">                                       &lt;VisualStateGroup.Transitions&gt;</span><br><span class="line">                                           &lt;VisualTransition From=<span class="string">&quot;Test1&quot;</span> To=<span class="string">&quot;Test2&quot;</span> GeneratedDuration=<span class="string">&quot;0:0:1.5&quot;</span>&gt;</span><br><span class="line">                                               &lt;Storyboard&gt;</span><br><span class="line">                                                   </span><br><span class="line">                                               &lt;/Storyboard&gt;</span><br><span class="line">                                           &lt;/VisualTransition&gt;</span><br><span class="line">                                       &lt;/VisualStateGroup.Transitions&gt;</span><br><span class="line">                                       &lt;!--创建状态Test1把Border背景的颜色改成红色--&gt;</span><br><span class="line">                                       &lt;VisualState x:Name=<span class="string">&quot;Test1&quot;</span>&gt;</span><br><span class="line">                                           &lt;Storyboard&gt;</span><br><span class="line">                                               &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                           &lt;/Storyboard&gt;</span><br><span class="line">                                       &lt;/VisualState&gt;</span><br><span class="line">                                       &lt;!--创建状态Test2把Border背景的颜色改成蓝色--&gt;</span><br><span class="line">                                       </span><br><span class="line">                                           &lt;VisualState x:Name=<span class="string">&quot;Test2&quot;</span>&gt;</span><br><span class="line">                                           &lt;Storyboard&gt;</span><br><span class="line">                                               &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                                           &lt;/Storyboard&gt;</span><br><span class="line">                                       &lt;/VisualState&gt;</span><br><span class="line">                                   &lt;/VisualStateGroup&gt;</span><br><span class="line">                               &lt;/VisualStateManager.VisualStateGroups&gt;</span><br><span class="line"></span><br><span class="line">                               &lt;Border.Background&gt;</span><br><span class="line">                                   &lt;!--定义Border背景的颜色,用于测试不同状态的显示效果--&gt;</span><br><span class="line">                                   &lt;SolidColorBrush x:Name=<span class="string">&quot;BorderBrush&quot;</span> Color=<span class="string">&quot;Black&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                               &lt;/Border.Background&gt;</span><br><span class="line">                               &lt;Grid&gt;</span><br><span class="line">                                   &lt;Ellipse x:Name=<span class="string">&quot;ellipse19&quot;</span> Width=<span class="string">&quot;&#123;TemplateBinding Button.Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;TemplateBinding Height&#125;&quot;</span> Fill=<span class="string">&quot;&#123;TemplateBinding Button.Background&#125;&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                   &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                              Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                                   &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                               &lt;/Grid&gt;</span><br><span class="line">                           &lt;/Border&gt;</span><br><span class="line">                       &lt;/ControlTemplate&gt;</span><br><span class="line">                   &lt;/Button.Template&gt;</span><br><span class="line">               &lt;/Button&gt;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">       /// 跳转到状态Test1</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_LostFocus(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           VisualStateManager.GoToState(sender as Button,<span class="string">&quot;Test1&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 跳转到状态Test2</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_Tapped(object sender, TappedRoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           VisualStateManager.GoToState(sender as Button,<span class="string">&quot;Test2&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>10.24.数据模板(DataTemplate)<br>DateTemplate和ControlTemplate所负责的任务是不一样的,ControlTemplate用于描述控件本身,而DataTemplate用于描述控件的数据对象的视觉格式.这两者并不是毫无关联,相反它们通常需要合作完成一些工作.在控件的模板上这两者有着非常微妙的关系,可以利用DataTemplate去辅助ControlTemplate实现一些效果.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button Content=<span class="string">&quot;Hello World&quot;</span> LostFocus=<span class="string">&quot;Button_LostFocus&quot;</span> Tapped=<span class="string">&quot;Button_Tapped&quot;</span>&gt;</span><br><span class="line">                  &lt;Button.Template&gt;</span><br><span class="line">                      &lt;ControlTemplate TargetType=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                          &lt;Border&gt;</span><br><span class="line">                              &lt;VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                                  &lt;VisualStateGroup&gt;</span><br><span class="line">                                      &lt;VisualStateGroup.Transitions&gt;</span><br><span class="line">                                          &lt;!--状态Test1转换为状态Test2的颜色变化动画--&gt;</span><br><span class="line">                                          &lt;VisualTransition From=<span class="string">&quot;Test1&quot;</span> To=<span class="string">&quot;Test2&quot;</span> GeneratedDuration=<span class="string">&quot;0:0:1.5&quot;</span>&gt;</span><br><span class="line">                                              &lt;Storyboard&gt;</span><br><span class="line">                                                  </span><br><span class="line">                                              &lt;/Storyboard&gt;</span><br><span class="line">                                          &lt;/VisualTransition&gt;</span><br><span class="line">                                         </span><br><span class="line">                                      &lt;/VisualStateGroup.Transitions&gt;</span><br><span class="line">                                      &lt;!--创建状态Test1把Border背景的颜色改成红色--&gt;</span><br><span class="line">                                      &lt;VisualState x:Name=<span class="string">&quot;Test3&quot;</span>&gt;</span><br><span class="line">                                          &lt;Storyboard&gt;</span><br><span class="line">                                              &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                          &lt;/Storyboard&gt;</span><br><span class="line">                                          </span><br><span class="line">                                      &lt;/VisualState&gt;</span><br><span class="line">                                      &lt;!--创建状态Test2把Border背景的颜色改成蓝色--&gt;</span><br><span class="line">                                      &lt;VisualState x:Name=<span class="string">&quot;Test4&quot;</span>&gt;</span><br><span class="line">                                          &lt;Storyboard&gt;</span><br><span class="line">                                              &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                                          &lt;/Storyboard&gt;</span><br><span class="line">                                      &lt;/VisualState&gt;</span><br><span class="line">                                      </span><br><span class="line">                                  &lt;/VisualStateGroup&gt;</span><br><span class="line">                              &lt;/VisualStateManager.VisualStateGroups&gt;</span><br><span class="line"></span><br><span class="line">                              &lt;Border.Background&gt;</span><br><span class="line">                                  &lt;SolidColorBrush x:Name=<span class="string">&quot;BorderBrush1&quot;</span></span><br><span class="line">                                                   Color=<span class="string">&quot;Black&quot;</span>/&gt;</span><br><span class="line">                              &lt;/Border.Background&gt;</span><br><span class="line">                              &lt;Grid&gt;</span><br><span class="line">                                  &lt;Ellipse x:Name=<span class="string">&quot;ellipse20&quot;</span> Width=<span class="string">&quot;&#123;Binding Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;Binding Height&#125;&quot;</span></span><br><span class="line">                                           Fill=<span class="string">&quot;&#123;Binding Background&#125;&quot;</span></span><br><span class="line">                                           Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                  &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                             Text=<span class="string">&quot;&#123;Binding&#125;&quot;</span>/&gt;</span><br><span class="line">                                  &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;Binding&#125;&quot;</span>/&gt;</span><br><span class="line">                                  </span><br><span class="line">                              &lt;/Grid&gt;</span><br><span class="line">                          &lt;/Border&gt;</span><br><span class="line">                      &lt;/ControlTemplate&gt;</span><br><span class="line">                  &lt;/Button.Template&gt;</span><br><span class="line">              &lt;/Button&gt;</span><br></pre></td></tr></table></figure>
<p>10.25.ItemTemplate,ContentTemplate和DataTemplate<br>ContentControl类是内容控件的基类,如Button,CheckBox,最明显的特征是这个控件有Content属性,具有Content属性的系统控件都是ContentControl的子类,ItemsControl类是列表控件的基类,如ListBox,它和ContentControl类类似,只不过ContentControl类是单项内容,ItemsControl是多项内容.<br>所有继承自ContentControl内容控件的ContentTemplate属性和所有继承自ItemsControl列表控件的ItemTemplate属性,都是DataTemplate类型,意思就是可以通过DataTemplate定义ContentControl和ItemsControl的控件的UI效果和数据显示.<br>10.26.数据模板的使用<br>DataTemplate是一种可视化的数据模板,其强大的作用在于可以把数据通过绑定的方式展现在控件上.<br>用DataTemplate去实现UI控件的内容显示,其实DataTemplate最主要的作用并不是去取代ControlTemplate的样式定义,而是通过数据绑定把数据控件的数据源信息展现到控件上.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Style x:Name=<span class="string">&quot;ItemsControlStyle&quot;</span> TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">            &lt;Setter Property=<span class="string">&quot;Template&quot;</span>&gt;</span><br><span class="line">                &lt;Setter.Value&gt;</span><br><span class="line">                    &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                        &lt;ScrollViewer BorderBrush=<span class="string">&quot;Red&quot;</span> BorderThickness=<span class="string">&quot;6&quot;</span>&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Background=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                                &lt;Border BorderBrush=<span class="string">&quot;Yellow&quot;</span> BorderThickness=<span class="string">&quot;3&quot;</span>&gt;</span><br><span class="line">                                    &lt;ItemsPresenter/&gt;</span><br><span class="line">                                &lt;/Border&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/ScrollViewer&gt;</span><br><span class="line">                    &lt;/ControlTemplate&gt;</span><br><span class="line">                &lt;/Setter.Value&gt;</span><br><span class="line">            &lt;/Setter&gt;</span><br><span class="line">        &lt;/Style&gt;</span><br><span class="line"> ObservableCollection&lt;People&gt; peoples = new ObservableCollection&lt;People&gt;();</span><br><span class="line">            peoples.Add(new <span class="function"><span class="title">People</span></span>() &#123; FirstName=<span class="string">&quot;lee2&quot;</span>,LastName=<span class="string">&quot;Terry2&quot;</span>&#125;);</span><br><span class="line">            peoples.Add(new <span class="function"><span class="title">People</span></span>() &#123; FirstName=<span class="string">&quot;lee3&quot;</span>,LastName=<span class="string">&quot;Terry3&quot;</span>&#125;);</span><br><span class="line">            peoples.Add(new <span class="function"><span class="title">People</span></span>() &#123; FirstName = <span class="string">&quot;lee4&quot;</span>, LastName = <span class="string">&quot;Terry4&quot;</span> &#125;);</span><br><span class="line">            peoples.Add(new <span class="function"><span class="title">People</span></span>() &#123; FirstName = <span class="string">&quot;lee5&quot;</span>, LastName = <span class="string">&quot;Terry5&quot;</span> &#125;);</span><br><span class="line">            itemsControl.ItemsSource = peoples;</span><br><span class="line">            itemsControl1.ItemsSource = peoples; </span><br><span class="line">  &lt;ItemsControl x:Name=<span class="string">&quot;itemsControl1&quot;</span> ItemTemplate=<span class="string">&quot;&#123;StaticResource PersonNameDataTemplate&#125;&quot;</span> Style=<span class="string">&quot;&#123;StaticResource ItemsControlStyle&#125;&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>10.27.读取和更换数据模板<br>动态更换样式<br>1.定义3个DataTemplate资源,一个是非选中状态,一个是选中状态,还有一个是默认的状态,其实默认状态和非选中状态是一样的,但是默认状态的数据项样式不能在C#中再次调用.在两个模板中都添加了Tap事件,用户捕获点击事件.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListBox x:Name=<span class="string">&quot;listbox&quot;</span> ItemTemplate=<span class="string">&quot;&#123;StaticResource dataTemplateDefaultKey&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;!--选中数据项的样式--&gt;</span><br><span class="line">       &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateSelectKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateSelectName&quot;</span>&gt;</span><br><span class="line">           &lt;Grid Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span> Background=<span class="string">&quot;Red&quot;</span>&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">           &lt;/Grid&gt;</span><br><span class="line">       &lt;/DataTemplate&gt;</span><br><span class="line">       &lt;!--默认数据项的样式,注意默认的数据项样式不能在C<span class="comment">#中再次调用--&gt;</span></span><br><span class="line">       &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateDefaultKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateDefaultName&quot;</span>&gt;</span><br><span class="line">           &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span>&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span>/&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;,&quot;</span>/&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span>/&gt;</span><br><span class="line">           &lt;/StackPanel&gt;</span><br><span class="line">       &lt;/DataTemplate&gt;</span><br><span class="line">       &lt;!--非选中数据项的样式--&gt;</span><br><span class="line">       &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateNoSelectKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateNoSelectName&quot;</span>&gt;</span><br><span class="line">           &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span>&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span>/&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;,&quot;</span>/&gt;</span><br><span class="line">               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span>/&gt;</span><br><span class="line">           &lt;/StackPanel&gt;</span><br><span class="line">       &lt;/DataTemplate&gt;</span><br><span class="line"> private void StackPanel_Tapped(object sender, TappedRoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           //获取到的对象是ListBoxItem</span><br><span class="line">           ListBoxItem myListBoxItem = (ListBoxItem)(listbox.ContainerFromItem((sender as Panel).DataContext));</span><br><span class="line">           //在ListBoxItem中查找ContentPresenter</span><br><span class="line">           ContentPresenter myContentPresenter = FindVisualChild&lt;ContentPresenter&gt;(myListBoxItem);</span><br><span class="line">           //ContentPresenter myContentPresenter = (ContentPresenter)(listbox.ContainerFromItem((sender as Panel).DataContext));</span><br><span class="line">           <span class="keyword">if</span> (myContentPresenter.ContentTemplate.Equals(dataTemplateSelectName)) &#123; </span><br><span class="line">               myContentPresenter.ContentTemplate = dataTemplateNoSelectName;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               myContentPresenter.ContentTemplate = dataTemplateSelectName;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private childItem FindVisualChild&lt;childItem&gt;(DependencyObject obj) <span class="built_in">where</span> childItem:DependencyObject</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">for</span> (int i = 0; i &lt; VisualTreeHelper.GetChildrenCount(obj); i++)</span><br><span class="line">           &#123;</span><br><span class="line">               DependencyObject child=VisualTreeHelper.GetChild(obj, i);</span><br><span class="line">               <span class="keyword">if</span> (child != null &amp;&amp; child is childItem)</span><br><span class="line">                   <span class="built_in">return</span> (childItem)child;</span><br><span class="line">               <span class="keyword">else</span></span><br><span class="line">               &#123;</span><br><span class="line">                   childItem childOfChild=FindVisualChild&lt;childItem&gt;(child);</span><br><span class="line">                   <span class="keyword">if</span> (childOfChild != null)</span><br><span class="line">                       <span class="built_in">return</span> childOfChild;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="built_in">return</span> null;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h4><p>绑定四个组件:绑定目标对象,目标属性,绑定源,以及要使用的绑定源中的值的路径.<br>例如,如果要将TextBox的内容绑定到Employee对象的Name属性,则目标对象是TextBox,目标属性是Text，要使用的值是Name,源对象是Employee对象.<br>11.12.创建绑定<br>1.定义源对象<br>2.设置DataContext属性绑定到源对象<br>3.使用Binding标记扩展来绑定数据源对象的属性.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> public class MyData &#123; </span><br><span class="line">        public string Title &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  public MyData myData = new MyData &#123; Title = <span class="string">&quot;这是绑定的标题!&quot;</span> &#125;;</span><br><span class="line">this.DataContext = myData;</span><br><span class="line"> &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Title&#125;&quot;</span> Margin=<span class="string">&quot;12,100,0,28&quot;</span></span><br><span class="line">                               FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br></pre></td></tr></table></figure>
<p>11.13.用元素值绑定<br>用元素值绑定就是将某一个控件元素作为绑定的数据源,绑定的对象是控件元素,而绑定的数据源同时也是控件元素,这种绑定的方式,可以轻松实现两个控件之间的值的交互影响,用元素值进行绑定是通过设置Binding的ElementName属性和Path属性来实现的,ElementName属性赋值为数据源控件的Name的值,Path属性赋值则赋值为数据源控件的某个属性,这个属性就是数据源控件的一个数据变化的反映<br>2.在C#中可以通过类似语法指定属性的子属性,例如,字句Path=ShoppingCart.Order设置与对象或属性ShoppingCart的Order属性的绑定,也就是说ShoppingCart是绑定数据源的属性,而Order则是ShoppingCart的属性,相当于是数据源的属性的属性.<br>3.若要绑定到附加属性,应在附加属性周围放置圆括号,例如,若要绑定到附加属性Grid.Row,则语法是Path=(Grid.Row).<br>4.可以使用数组的索引器来实现数据的绑定.例如,字句Path=ShoppongCart[0]将绑定设置为与数组属性的内部对应的索引的数值.<br>5.可以在Path字句中混合索引器和子属性,例如,Path=ShoppingCart.ShippingInfo[MailingAddress.Street].<br>6.在索引器内部,可以由多个由逗号分隔的索引器参数.可以使用圆括号指定每个参数的类型.Path=”[(sys:Int32)42,(sys:Int32)24]”,其中sys映射到System命名空间.<br>7.如果源为集合视图,则可以用斜杠”/“指定当前项,例如,字句Path=/用于设置到视图中当前项的绑定,如果源为集合,则此语法指定默认集合视图的当前项.<br>8.可以结合使用属性名和斜杠来遍历作为集合的属性,例如,Path=/Offices/ManagerName指定源集合的当前项,该源集合包含作为集合的Offices属性,其当前项是一个包含ManagerName属性的对象.<br>9.也可以使用句点”.”路径绑定到当前源.例如,Text=”{Binding}”等效于Text=”{Binding Path=.}”<br>下面给出控制圆的半径的示例,圆形的半径绑定到Slider控件的值,从而实现通过即时改变Slider控件的值来改变Slider控件的值来改变圆的大小.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;圆形的半径会根据slider控件的值而改变&quot;</span>/&gt;</span><br><span class="line">                    &lt;Slider Name=<span class="string">&quot;slider&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;半径为:&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Name=<span class="string">&quot;txtblk&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> FontSize=<span class="string">&quot;48&quot;</span>/&gt;</span><br><span class="line">                    &lt;Ellipse Height=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Width=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Stroke=<span class="string">&quot;Black&quot;</span> StrokeThickness=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">``</span><br><span class="line">11.14.三种绑定模式</span><br><span class="line">1.OneTime</span><br><span class="line">OneTime表示一次绑定,在绑定创建时使用数据源更新目标,适用于只显示数据而不进行数据的更新.OneTime绑定会导致源属性初始化目标属性,但不传播后续更改.</span><br><span class="line">2.OneWay</span><br><span class="line">OneWay表示单向绑定,在绑定创建时或源数据发生变化时更新到目标,适用于显示变化的数据,这是默认模式.OneWay绑定导致对源属性的更改会自动更新目标属性,但是对目标属性的更改不会传播回源属性.此绑定类型适用于绑定的控件为隐式只读控件的情况,如果无需监视目标属性的更改,则使用OneWay的绑定模式可避免TwoWay绑定模式的系统开销</span><br><span class="line">3.TwoWay</span><br><span class="line">TwoWay表示双向绑定,可以同时更新源数据和目标数据,TwoWay绑定导致对源属性的更改会自动更新目标属性,而对目标属性的更改也会自动更新源属性.此绑定类型适用于输入框或其他完全交互式UI方案.大多数UI元素内部实现的属性都默认为OneWay绑定,但是一些依赖项属性,通常为用户可编辑的控件的属性,如TextBox的Text属性和CheckBox的IsChecked属性,默认为TwoWay绑定.</span><br><span class="line">下面演示三种绑定模式的区别</span><br><span class="line">``` bash</span><br><span class="line">&lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Slider x:Name=<span class="string">&quot;slider&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--OneTime--&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;41&quot;</span> Text=<span class="string">&quot;OneTime&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;112&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=OneTime&#125;&quot;</span> Width=<span class="string">&quot;269&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;46&quot;</span> Text=<span class="string">&quot;OneWay&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;99&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--OneWay--&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=OneWay&#125;&quot;</span> Width=<span class="string">&quot;269&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Height=<span class="string">&quot;40&quot;</span> FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;TwoWay&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;94&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--TwoWay--&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=TwoWay&#125;&quot;</span> Width=<span class="string">&quot;268&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;43&quot;</span> Text=<span class="string">&quot;slider的值:&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;43&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Width=<span class="string">&quot;185&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br></pre></td></tr></table></figure>
<p>11.15.更改通知</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class MyData : INotifyPropertyChanged</span><br><span class="line">    &#123;</span><br><span class="line">        private string title;</span><br><span class="line"></span><br><span class="line">        public string Title &#123; get =&gt; title;</span><br><span class="line">            <span class="built_in">set</span> &#123; title = value;</span><br><span class="line">                OnPropertyChanged(<span class="string">&quot;Title&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void OnPropertyChanged(string name)</span><br><span class="line">        &#123;</span><br><span class="line">            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public event PropertyChangedEventHandler PropertyChanged;</span><br><span class="line">    &#125;</span><br><span class="line">  private void Button_Click_19(object sender, RoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            myData.Title = <span class="string">&quot;New Title&quot;</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>11.16.绑定数据转换<br>绑定数据转换需要通过Binding.Converter属性表示获取或设置转换器对象.当数据在源和目标之间传递时,绑定引擎调用该对象来修改数据.可以对任何的绑定设置一个转换器,通过创建一个类和实现IValueConverter接口来针对每个具体的应用场景自定义该转换器.所以转换器是派生自IValueConverter接口的类.它包含两种方法:Convert和ConvertBack方法.如果为绑定定义了Converter参数,则绑定引擎会调用Convert和ConvertBack方法.从源传递数据时,绑定引擎调用Convert并将返回的数据传递给目标,从目标传递数据时,绑定引擎调用ConvertBack并将返回的数据传递给源,如果只是要获取从数据源到绑定目标的单向绑定,只需要实现Convert方法.实现了转换器的逻辑之后,若要在绑定中使用转换器,首先要创建转换器类的实例.将转换器类的实例设置为程序中资源的XAML.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">    public class Clock : INotifyPropertyChanged</span><br><span class="line">    &#123;</span><br><span class="line">        int hour, minute, second;</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">        public <span class="function"><span class="title">Clock</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            //h获取当前的时间</span><br><span class="line">            Tmr_Tick(null, null);</span><br><span class="line">            //使用定时器来触发时间来改变类的时分秒属性</span><br><span class="line">            //每0.1秒获取一次当前的时间</span><br><span class="line">            DispatcherTimer tmr = new DispatcherTimer();</span><br><span class="line">            tmr.Interval = TimeSpan.FromSeconds(0.1);</span><br><span class="line">            tmr.Tick += Tmr_Tick;</span><br><span class="line">            tmr.Start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public int Hour</span><br><span class="line">        &#123;</span><br><span class="line">            protected <span class="built_in">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (value != hour)</span><br><span class="line">                &#123;</span><br><span class="line">                    hour = value;</span><br><span class="line">                    PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(<span class="string">&quot;Hour&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            get</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">return</span> hour;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //分钟属性</span><br><span class="line">        public int Minute</span><br><span class="line">        &#123;</span><br><span class="line">            get =&gt; minute;</span><br><span class="line">            <span class="built_in">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (minute != value)</span><br><span class="line">                &#123;</span><br><span class="line">                    minute = value;</span><br><span class="line">                    PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(<span class="string">&quot;Minute&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        public int Second &#123; get =&gt; second;</span><br><span class="line">            <span class="built_in">set</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (second != value)</span><br><span class="line">                &#123;</span><br><span class="line">                    second = value;</span><br><span class="line">                    PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(<span class="string">&quot;Second&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 时间触发器</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private void Tmr_Tick(object sender, object e)</span><br><span class="line">        &#123;</span><br><span class="line">            DateTime dt=DateTime.Now;</span><br><span class="line">            Hour= dt.Hour;</span><br><span class="line">            Minute= dt.Minute;</span><br><span class="line">            Second= dt.Second;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 属性值改变事件</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public event PropertyChangedEventHandler PropertyChanged;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  public class HoursToDayStringConverter:IValueConverter</span><br><span class="line">    &#123;</span><br><span class="line">        public object Convert(object value, Type targetType, object parameter, string language)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (int.Parse(value.ToString())&lt;12)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="string">&quot;Dear Master,Good Morning&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (int.Parse(value.ToString())&gt;12)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="string">&quot;Dear Master,Good Afternoon&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="string">&quot;Dear Master,Good &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public object ConvertBack(object value, Type targetType, object parameter, string language)</span><br><span class="line">        &#123;</span><br><span class="line">           <span class="built_in">return</span> DateTime.Now.Hour;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;Grid&gt;</span><br><span class="line">                    &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span> DataContext=<span class="string">&quot;&#123;StaticResource clock&#125;&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;30&quot;</span> Text=<span class="string">&quot;&#123;Binding Hour,Converter=&#123;StaticResource booleanToDayString&#125;&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;30&quot;</span> Text=<span class="string">&quot;现在的时间是:&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Hour&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;小时&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Minute&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;分钟&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Second&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;秒&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line"> &lt;models:Clock x:Key=<span class="string">&quot;clock&quot;</span>/&gt;</span><br><span class="line">        &lt;converters:HoursToDayStringConverter x:Key=<span class="string">&quot;booleanToDayString&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>11.2.绑定集合<br>绑定目标:ItemsControl对象(ListView等列表控件)ItemsSource属性.<br>绑定对象:OneWay<br>数据源:集合对象 值<br>若要将列表控件绑定到集合对象,应使用列表控件自带的ItemsSource属性,而不是DataContext属性.<br>可以将ItemSource属性视为列表控件的内容,为列表项提供数据,还需要注意的是,绑定是OneWay模式,因为ItemSource属性默认情况下支持OneWay绑定.<br>11.21.数据集合<br>在实现列表绑定集合之前,必须要选择使用一个数据集合类或自定义实现一个数据集合类才能实例化出数据源的集合对象,不同的数据集合所实现的绑定的效果是有差异的.<br>1.ObservaleCollection<T>集合.<br>ObservableCollection<T>类是实现了INotifyCollectionChanged接口的数据集合类,使用ObservableCollection<T>类的实例与列表控件及进行绑定可以动态地往数据源地集合对象增加或删除数据,并且可以把这种变更通知到UI上,这就是ObservableCollection<T>类最大地特点.<br>2.其他的实现了IEnumerable接口的集合,如List<T>,Collection<T>等.<br>凡是实现了IEnumerable接口的集合都可以作为列表绑定的数据集合,给列表的ItemSource属性赋值,但是没有实现INotifyCollectionChanged接口的集合就无法设置动态绑定,所以List<T>,Collection<T>等集合适合于绑定静态数据,也就是绑定了列表控件之后就不需要再对项目进行插入和删除操作.<br>3.自定义实现集合.<br>当win10内置集合类无法满足需求时,可以通过自定义集合来封装数据绑定的集合的逻辑,自定义集合类就需要根据所需的功能去实现IEnumerable,INotifyCollectionChanged等相关的接口.最常用的实现方案是使用IList接口,因为它提供可以按索引逐个访问的对象的非泛型集合,因而可提供最佳性能.<br>11.22.绑定列表控件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class Food</span><br><span class="line">   &#123;</span><br><span class="line">       public string Name &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">       public string Description &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">       public string IconUri &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">       public string Type &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">public List&lt;Food&gt; AllFood &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">       public void <span class="function"><span class="title">AddFruits</span></span>() &#123;</span><br><span class="line">           AllFood = new List&lt;Food&gt;();</span><br><span class="line">           Food item0 = new <span class="function"><span class="title">Food</span></span>() &#123; Name = <span class="string">&quot;Tomato&quot;</span>, IconUri = <span class="string">&quot;Images/Tomato.png&quot;</span>, Type = <span class="string">&quot;Healthy&quot;</span>, Description = <span class="string">&quot;Tomato tastes delicious. &quot;</span> &#125;;</span><br><span class="line">           Food item1 = new <span class="function"><span class="title">Food</span></span>() &#123; Name = <span class="string">&quot;Beer&quot;</span>, IconUri = <span class="string">&quot;Images/Beer.png&quot;</span>, Type = <span class="string">&quot;NotDetermined&quot;</span>, Description = <span class="string">&quot;Dont konw Beer is Delicious.&quot;</span> &#125;;</span><br><span class="line">           Food item2 = new <span class="function"><span class="title">Food</span></span>() &#123; Name = <span class="string">&quot;fries&quot;</span>, IconUri = <span class="string">&quot;Images/fries.png&quot;</span>, Type = <span class="string">&quot;Unhealthy&quot;</span>, Description = <span class="string">&quot;This is Unhealthy food.&quot;</span> &#125;;</span><br><span class="line">           AllFood.Add(item0);</span><br><span class="line">           AllFood.Add(item1);</span><br><span class="line">           AllFood.Add(item2);</span><br><span class="line">           listviewItemtemplate.ItemsSource = AllFood;</span><br><span class="line">       &#125;</span><br><span class="line">&lt;ListView x:Name=<span class="string">&quot;listviewItemtemplate&quot;</span>&gt;</span><br><span class="line">                   &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                       &lt;!--列表的ItemTemplate属性是一个DataTemplate类型--&gt;</span><br><span class="line">                       &lt;!--创建一个DataTemplate的元素对象--&gt;</span><br><span class="line">                       &lt;DataTemplate&gt;</span><br><span class="line">                           &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                               &lt;!--绑定Food类的IconUri属性--&gt;</span><br><span class="line">                               &lt;Image Source=<span class="string">&quot;&#123;Binding IconUri&#125;&quot;</span> Stretch=<span class="string">&quot;None&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> FontSize=<span class="string">&quot;40&quot;</span> Margin=<span class="string">&quot;24 0 24 0&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Description&#125;&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                           &lt;/StackPanel&gt;</span><br><span class="line">                       &lt;/DataTemplate&gt;</span><br><span class="line">                   &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">               &lt;/ListView&gt;</span><br></pre></td></tr></table></figure>
<p>11.23.绑定ObservableCollection<T>集合<br>在列表绑定中实现了把集合的数据通过数据模板展示到列表上,使用DataTemplate可以很灵活的去实现列表项的显示效果,但是这个列表却是一个静态的列表,也就是说列表的数据并不会增加或减少.如果要实现一个动态8绑定的列表,就需要用到ObservableCollection<T>集合作为数据的绑定源.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;</span><br><span class="line">                   &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                       &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                       &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                   &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                   &lt;StackPanel Margin=<span class="string">&quot;12,60,0,28&quot;</span>&gt;</span><br><span class="line">                       &lt;Button Content=<span class="string">&quot;AddItem&quot;</span> Click=<span class="string">&quot;Button_Click_20&quot;</span>/&gt;</span><br><span class="line">                       &lt;Button Content=<span class="string">&quot;RemoveItem&quot;</span> Click=<span class="string">&quot;Button_Click_21&quot;</span>/&gt;</span><br><span class="line">                       </span><br><span class="line">                   &lt;/StackPanel&gt;</span><br><span class="line">                   &lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                       &lt;ListView x:Name=<span class="string">&quot;Obser&quot;</span>&gt;</span><br><span class="line">                           &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                               &lt;DataTemplate&gt;</span><br><span class="line">                                   &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                                       &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderId&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                       &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Width=<span class="string">&quot;280&quot;</span>/&gt;</span><br><span class="line">                                   &lt;/StackPanel&gt;</span><br><span class="line">                               &lt;/DataTemplate&gt;</span><br><span class="line">                           &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                       &lt;/ListView&gt;</span><br><span class="line">                   &lt;/Grid&gt;</span><br><span class="line">               &lt;/Grid&gt;</span><br><span class="line">ObservableCollection&lt;OrderModel&gt; OrderModels=new ObservableCollection&lt;OrderModel&gt;();</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// Add</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_Click_20(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           Random random= new Random();</span><br><span class="line">           OrderModels.Add(new OrderModel &#123; OrderId = random.Next(1000), OrderName = <span class="string">&quot;OrderName&quot;</span> + random.Next(1000) &#125;);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       private void Button_Click_21(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> (Obser.SelectedItem != null) &#123; </span><br><span class="line">               OrderModel orderModel= Obser.SelectedItem as OrderModel;</span><br><span class="line">               <span class="keyword">if</span> (OrderModels.Contains(orderModel))</span><br><span class="line">               &#123;</span><br><span class="line">                   OrderModels.Remove(orderModel);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"> listviewItemtemplate.ItemsSource = AllFood;</span><br><span class="line">           Obser.ItemsSource = OrderModels;</span><br></pre></td></tr></table></figure>
<p>11.24.绑定自定义集合<br>实现自定义的集合最常用的就是从IList接口派生实现自定义集合类.<br>IList接口表示可按照索引单独访问的对象的非泛型集合.IList接口是从ICollection接口派生出来的,并且是所有非泛型列表的基接口,ICollection则是从IEnumerable接口派生出来的,ICollection接口是定义所有非泛型集合的大小,枚举数和同步方法,IEnumerable接口是指公开枚举数,该枚举数支持在非泛型集合上进行简单迭代.所以IList接口同时具备ICollection接口和IEnumerable接口的共性,IEnumerable只包含一个方法,GetEnumerator,返回IEnumerator,IEnumerator可以通过集合循环显示Current属性和MoveNext和Rest方法.<br>ICollecion接口方法和属性<br>Count 该属性可确定集合中的元素个数,它返回的值与Length属性相同.<br>IsSychoronized 该属性确定集合是否是纯种安全的,对于数组,这个属性总是返回false,对于同步访问,SyncRoot属性可以用于线程安全的访问.<br>CopyTo 该方法可以将数组的元素复制到现有的数组中,它类似于表态方法Array.Copy().<br>IList接口方法和属性<br>Add 该方法用于在集合中添加元素,对于数组,该方法会抛出NotSupportedException异常.<br>Clear 该方法会清除数组中的所有元素,值类型设置为0,引用类型设置为NULL<br>Contains 该方法可以确定某个元素是否在数组中,其返回值是true或false.这个方法会对数组中的所有元素进行线性搜索,直到找到所需元素为止.<br>IndexOf 该方法与Contains方法类似,也是对数组中的所有元素进行线性搜索,不同的是IndexOf方法会返回所找到的第一个元素的索引.<br>Insert,Remove RemoveAt 对于集合,Insert方法用于插入元素,Remove和RemoveAt可删除元素.对于数组,这些方法都抛出NotSupportedException异常.<br>IsFixedSize 数组的大小总是固定的,所以这个属性问题返回true.<br>IsReadOnly 数组总是可读/写的,所以这个属性返回false.<br>Item(表现显示为this[int index])该属性可以用整形索引访问数组.<br>只要实现了IList接口的集合类都可以与列表控件进行绑定,所以需要自定义一个集合类来实现IList接口,因为IList接口是从ICollection接口和IEnumerable接口派生出来的,所以这三个接口的方法都需要在自定义的集合类里面实现.在ICollection接口里面,Count属性表示列表的长度,IList接口的IList.this[int index]属性表示列表某个索引的数据项,在自定义集合里面可以通过Count属性设置列表的长度,通过IList.this[int index]属性返回集合数据,所以,在自定义集合里面IList.this[int index]属性和Count属性是两个必须要实现的属性接口,<br>可以在IList.this[int index]属性的实现里面处理集合项生成的逻辑.<br>下面给出自定义集合并与列表控件实现数据绑定.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">public class MyList : IList</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">#region MyRegion</span></span><br><span class="line"></span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 在这个属性里面,index表示集合项的索引,通过索引返回该索引对应的对象</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;index&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">       /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        public object this[int index] &#123;</span><br><span class="line">            get &#123; </span><br><span class="line">            //随机生成一个OrderModel对象并返回</span><br><span class="line">            Random random=new Random();</span><br><span class="line">                <span class="built_in">return</span> new OrderModel &#123; OrderId = random.Next(1000), OrderName = <span class="string">&quot;OrderName&quot;</span> + random.Next(1000) &#125;;</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="built_in">set</span> =&gt; throw new NotImplementedException(); &#125;</span><br><span class="line">        <span class="comment">#endregion</span></span><br><span class="line">        public bool IsFixedSize =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">        public bool IsReadOnly =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">        public int Count =&gt; 10;</span><br><span class="line"></span><br><span class="line">        public bool IsSynchronized =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">        public object SyncRoot =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">        public int Add(object value)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void <span class="function"><span class="title">Clear</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public bool Contains(object value)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void CopyTo(Array array, int index)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IEnumerator <span class="function"><span class="title">GetEnumerator</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int IndexOf(object value)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void Insert(int index, object value)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void Remove(object value)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void RemoveAt(int index)</span><br><span class="line">        &#123;</span><br><span class="line">            throw new NotImplementedException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;ListView x:Name=<span class="string">&quot;Ilist&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderId&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Width=<span class="string">&quot;280&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line"> Ilist.ItemsSource =new MyList();</span><br></pre></td></tr></table></figure>
<p>12.列表编程<br>12.1.列表控件的使用<br>在Win10中相关的列表控件有ItemsControl控件,ListBox控件,ListView控件,GridView控件和SemanticZoom控件则是更高级的列表控件.最简单展示数据:ItemsControl,实现列表的选择等功能:ListView,实现网格布局:GridView,如果要实现分组索引的列表,可以选用SemanticZoom控件.<br>12.11.ItemsControl</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;ItemsControl x:Name=<span class="string">&quot;itemsControl2&quot;</span>&gt;</span><br><span class="line">                   &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                       &lt;DataTemplate&gt;</span><br><span class="line">                           &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/StackPanel&gt;</span><br><span class="line">                       &lt;/DataTemplate&gt;</span><br><span class="line">                   &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">               &lt;/ItemsControl&gt;</span><br><span class="line">//创建一个有100个数据项的集合绑定到列表</span><br><span class="line">           List&lt;Item&gt; items= new List&lt;Item&gt;();</span><br><span class="line">           <span class="keyword">for</span> (int i = 0; i &lt; 100; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               items.Add(new Item &#123; FirstName=<span class="string">&quot;Li&quot;</span>+i,LastName=<span class="string">&quot;Lei&quot;</span>+i&#125;);</span><br><span class="line">           &#125;</span><br><span class="line">           itemsControl2.ItemsSource = items;</span><br></pre></td></tr></table></figure>
<p>2.让ItemsControl控件滚动起来<br>ItemsControl控件内置的模板是不支持滚动的,如果要让ItemsControl的数据滚动起来,需要自定义ItemsControl的控件模板,把ItemsControl控件的数据项面板放在ScrollViewer控件上,就可以让列表的数据滚动起来了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;ItemsControl x:Name=<span class="string">&quot;ItemsControl3&quot;</span>&gt;</span><br><span class="line">                    &lt;ItemsControl.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                            &lt;ScrollViewer&gt;</span><br><span class="line">                                &lt;ItemsPresenter/&gt;</span><br><span class="line">                            &lt;/ScrollViewer&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.Template&gt;</span><br><span class="line">                    &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span></span><br><span class="line">                                           FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">                &lt;/ItemsControl&gt;</span><br></pre></td></tr></table></figure>
<p>3.大数据量数据的绑定<br>ItemsControl控件初始化2000个数据项的时候耗费了非常多的时间.ItemsControl控件本身是不支持数据的虚拟化的,<br>还需要另外的布局处理.<br>12.12.ListBox实现下拉点击刷新列表<br>ListBox控件是在ItemsControl控件的基础上进行封装的,把列表项选择,虚拟化等功能集成在一起.<br>下面用ListBox实现一个下拉点击刷新列表的交互效果.通常当一个列表包含很多数据,可以采用这种方式来分布加载列表的数据,特别是当列表的数据从网络请求时,这种分步加载的方式优势就更加明显了.<br>1.点击按钮放哪里 通过修改ListBox控件的ControlTemplate,把Button控件放在ScrollViewer里面,然后按钮就可以跟随列表滚动,点击按钮发出刷新的逻辑.第二个问题解决方式是使用ObservableCollection<T>集合类型来存储集合的数据,<br>跟列表进行绑定,ObservableCollection<T>表示一个动态数据集合,在添加项,移除项或刷新整个列表时,此集合将向列表提供通知从而可以刷新列表.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListBox ItemsSource=<span class="string">&quot;&#123;Binding Items&#125;&quot;</span> SelectionChanged=<span class="string">&quot;ListBox_SelectionChanged&quot;</span>&gt;</span><br><span class="line">                   &lt;ListBox.Template&gt;</span><br><span class="line">                       &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                           &lt;ScrollViewer&gt;</span><br><span class="line">                               &lt;StackPanel&gt;</span><br><span class="line">                                   &lt;ItemsPresenter/&gt;</span><br><span class="line">                                   &lt;Button Content=<span class="string">&quot;加载更多&quot;</span> Click=<span class="string">&quot;Button_Click_22&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Margin=<span class="string">&quot;12&quot;</span>/&gt;</span><br><span class="line">                                   </span><br><span class="line">                               &lt;/StackPanel&gt;</span><br><span class="line">                           &lt;/ScrollViewer&gt;</span><br><span class="line">                       &lt;/ControlTemplate&gt;</span><br><span class="line">                   &lt;/ListBox.Template&gt;</span><br><span class="line">                   &lt;ListBox.ItemTemplate&gt;</span><br><span class="line">                       &lt;DataTemplate&gt;</span><br><span class="line">                           &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                               </span><br><span class="line">                           &lt;/StackPanel&gt;</span><br><span class="line">                       &lt;/DataTemplate&gt;</span><br><span class="line">                   &lt;/ListBox.ItemTemplate&gt;</span><br><span class="line">               &lt;/ListBox&gt;</span><br><span class="line">public ObservableCollection&lt;Item&gt; Items &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">Items = new ObservableCollection&lt;Item&gt;();</span><br><span class="line">           <span class="keyword">for</span> (int i = 0; i &lt; 5; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               Items.Add(new Item &#123; FirstName=<span class="string">&quot;Li&quot;</span>+i,LastName=<span class="string">&quot;Lei&quot;</span>+i&#125;);</span><br><span class="line">           &#125;</span><br><span class="line">           this.DataContext = this;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">       /// 按钮单击事件,加载更多的数据集合</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private void Button_Click_22(object sender, RoutedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           //往原来列表的集合,继续添加5个数据项,这同时触发列表UI发生变化</span><br><span class="line">           int count=Items.Count;</span><br><span class="line">           <span class="keyword">for</span> (int i = count; i &lt; count+5; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               Items.Add(new Item &#123; FirstName=<span class="string">&quot;Li&quot;</span>+i,LastName=<span class="string">&quot;Lei&quot;</span>+i&#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 选中事件的处理程序</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       private async void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)</span><br><span class="line">       &#123;</span><br><span class="line">           string selectedInfo = <span class="string">&quot;&quot;</span>;</span><br><span class="line">           //获取选中的项目</span><br><span class="line">           foreach (var item <span class="keyword">in</span> e.AddedItems)</span><br><span class="line">           &#123;</span><br><span class="line">               selectedInfo += (item as Item).FirstName + (item as Item).LastName;</span><br><span class="line">           &#125;</span><br><span class="line">           await new MessageDialog(selectedInfo).ShowAsync();</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>12.13.ListView实现下拉自动刷新列表<br>ListView比ListBox功能更加强大,在列表的外观上,ListView控件可以直接通过ContainerContentChanging事件来监控到相关的列表数据加载的情况,也就是说,可以通过ContainerContentChanging事件间接的获取到列表数据虚拟化的运行情况.<br>前面的章节介绍过一个使用ListBox控件判断列表滚动到底的例子.实现的原理是通过可视化树获取ListBox的ScrollViewer控件,然后根据ScrollViewer控件的垂直位移属性来判断ListBox控件什么时候滚动到底.在ListView控件里面,可以使用一种更加智能的方式来实现下拉刷新.这个例子是通过ListView控件的ContainerContentChanging事件去控制自动刷新的逻辑,因为ListView控件是对数据进行虚拟化处理的,当列表向下滚动的时候下面的数据就会不断地被实例化,当数据实例化的时候就会触发ContainerContentChanging事件.所以只需要监控当列表最后一个数据实例化的时候就可以发出数据刷新的逻辑就可以了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView x:Name=<span class="string">&quot;listView&quot;</span> ItemsSource=<span class="string">&quot;&#123;Binding Items&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span></span><br><span class="line">                                           FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line"> Items = new ObservableCollection&lt;Item&gt;();</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 100; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Items.Add(new Item &#123; FirstName=<span class="string">&quot;Li&quot;</span>+i,LastName=<span class="string">&quot;Lei&quot;</span>+i&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            this.DataContext = this;</span><br><span class="line">            //订阅列表的ContainerContentChanging事件</span><br><span class="line">            listView.ContainerContentChanging += ListView_ContainerContentChanging;</span><br><span class="line"> /// &lt;summary&gt;</span><br><span class="line">        /// 在这里判断刷新的时机</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;args&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private void ListView_ContainerContentChanging(ListViewBase sender, ContainerContentChangingEventArgs args)</span><br><span class="line">        &#123;</span><br><span class="line">            //因为该事件会被多个线程进入,所以添加线程锁,控制下面的代码只能单个线程去执行</span><br><span class="line">            lock (o)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isLoading)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (args.ItemIndex==listView.Items.Count-1)</span><br><span class="line">                    &#123;</span><br><span class="line">                        //设置IsLoading为<span class="literal">true</span>,在加载数据的过程中,禁止多次进入</span><br><span class="line">                        isLoading= <span class="literal">true</span>;</span><br><span class="line">                        //模拟后台耗时任务拉取数据的场景</span><br><span class="line">                        Task.Factory.StartNew(async () =&gt;</span><br><span class="line">                        &#123;</span><br><span class="line">                            await Task.Delay(3000);</span><br><span class="line">                            //调用UI线程添加数据</span><br><span class="line">                            await this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =&gt;</span><br><span class="line">                            &#123;</span><br><span class="line">                                int count = Items.Count;</span><br><span class="line">                                <span class="keyword">for</span> (int i = count; i &lt; count + 50; i++)</span><br><span class="line">                                &#123;</span><br><span class="line">                                    Items.Add(new Item &#123; FirstName = <span class="string">&quot;Li&quot;</span> + i, LastName = <span class="string">&quot;Lei&quot;</span> + i &#125;);</span><br><span class="line">                                &#125;</span><br><span class="line">                                //修改加载的状态</span><br><span class="line">                                isLoading = <span class="literal">false</span>;</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //线程锁的对象</span><br><span class="line">        private object o = new object();</span><br><span class="line">        //数据加载的标识</span><br><span class="line">        public bool isLoading = <span class="literal">false</span>;</span><br><span class="line">        //绑定的数据集合</span><br><span class="line">        public ObservableCollection&lt;Item&gt; Items &#123; get; <span class="built_in">set</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>12.14.GridView实现网格列表<br>网格列表是指列表按照网格布局的方式进行布局<br>GridView控件的使用方式和ListView控件是一样的,通过ItemTemplate来设置列表项目的模板,不过在GridView控件设置ItemTemplate模板的时候要注意设置它的高度和宽度,GridView控件的布局就会按照Item实际的大小进行布局,可能导致网格布局的错乱.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> &lt;GridView x:Name=<span class="string">&quot;gridView&quot;</span>&gt;</span><br><span class="line">                    &lt;GridView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> </span><br><span class="line">                                           Width=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> </span><br><span class="line">                                           Width=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/GridView.ItemTemplate&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;GridView.ItemContainerStyle&gt;</span><br><span class="line">                        &lt;Style TargetType=<span class="string">&quot;GridViewItem&quot;</span>&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;BorderBrush&quot;</span> Value=<span class="string">&quot;Gray&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;BorderThickness&quot;</span> Value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;HorizontalContentAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;VerticalContentAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Style&gt;</span><br><span class="line">                    &lt;/GridView.ItemContainerStyle&gt;</span><br><span class="line">                &lt;/GridView&gt;</span><br><span class="line"> Items = new ObservableCollection&lt;Item&gt;();</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 100; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Items.Add(new Item &#123; FirstName=<span class="string">&quot;Li&quot;</span>+i,LastName=<span class="string">&quot;Lei&quot;</span>+i&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            this.DataContext = this;</span><br><span class="line">gridView.ItemsSource= Items;</span><br></pre></td></tr></table></figure>
<p>12.15.SemanticZoom实现分组列表<br>实现分组,同时会提供两个具有相同内容的不同视图,其中一个是主视图,另一个视图是可以让用户进行快速导航的分组视图.<br>SemanticZoom控件支持对GridView和ListView控件的视图效果进行缩放,在SemanticZoom中包含两个列表控件(GridView或ListView):一个控件提供放大视图,另外一个提供缩小视图,放大视图提供一个详细信息视图(ZoomedInView)以让用户查看详细信息,缩小视图提供一个缩小索引视图(ZoomedOutView)让用户快速定位要查看信息的大致范围或者分组<br>1.SemanticZoom控件的样式设置<br>SemanticZoom控件实现分组列表会比实现非分组列表复杂一些,实现分组列表还需要设置两大属性的内容:<br>ZoomedOutView内容和ZoomedInView内容.这两个属性内容含义如下所示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;SemanticZoom.ZoomedInView&gt;</span><br><span class="line">	在这里放置GridView(或ListView)以表示放大视图,显示详细信息</span><br><span class="line">&lt;/SemanticZoom.ZoomedInView&gt;</span><br><span class="line">&lt;SemanticZoom.ZoomOutView&gt;</span><br><span class="line">在这里放置GridView(或ListView)以表示缩小视图,一般情况下绑定Group.Title</span><br><span class="line">&lt;/SemanticZoom.ZoomOutView&gt;</span><br></pre></td></tr></table></figure>
<p>在赋值给ZoomInView属性的列表控件里面,一般需要设置ItemTemplate模板和GroupStyle.HeaderTemplate模板.ItemTemplate模板要设置的内容就是列表详细信息所展示的内容.G.H<br>模板是指分组的组头模板,如在人脉里面”a”,”b”这些就是属于列表的组头,如果同样是一个列表的集合,也是通过模板的绑定形式来进行定义.<br>在赋值给ZoomedOutView属性的列表控件里面,也需要设置其ItemTemplate模板,ZoomedOutView里面的ItemTemplate模板和ZoomedInView里面的模板的作用是不一样的,这里的ItemTemplate模板是指当点击组头的时候弹出的组头的索引面板项目展示,如点击人脉的a,b就会弹出一个字母的现实面板,当你点击某个字母的时候就会重新回到列表的界面并跳到列表字母所属的组项目的位置.同时还可以使用ItemsPanel来设置列表的布局,使用ItemContainerStyle来设置列表项目的容器样式,这些功能的使用和单独的GridView(或ListView)列表的使用是一样的.<br>2.SemanticZoom控件的数据源创建<br>SemanticZoom控件的数据源创建需要用到Windows.UI.Xaml.Data命名空间下的CollectionViewSource.<br>CollectionViewSource是专为数据绑定UI视图互动而设置的,尤其是对于要实现分组的情况,更需要他.创建一个CollectionViewSource对象既可以使用Xaml的方式来进行,也可以使用C#代码来创建,在CollectionViewSource对象中通常需要设置下面几个重要的属性:<br>1.Source属性:设置分组后的数据源,赋值给Source属性的对象是列表嵌套列表的集合对象.<br>2.IsSourceGrouped属性:指示是否允许分组<br>3.ItemsPath属性:是分组后,组内部所包含列表的属性路径.<br>4.View属性:获取当前与CollectionViewSource实例关联的视图对象.<br>5.View.CollectionGroups属性:返回该视图关联的所有集合组.<br>在绑定数据时,需要把ZoomedInView里面的列表控件的ItemsSource绑定到CollectionViewSource对象的View属性,用于展示CollectionViewSource对象所关联的视图.把ZoomedOutView里面的列表控件的ItemSource绑定到CollectionViewSource对象的View.CollectionGroups属性,用于展示分组的视图.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;!--创建数据源对象,注意ItemContent属性就是数据源中真正的基础数据的列表属性,必须设置该属性的值数据源才能定位到实际绑定的数据实体对象--&gt;</span><br><span class="line">                        &lt;CollectionViewSource x:Name=<span class="string">&quot;itemcollectSource&quot;</span> IsSourceGrouped=<span class="string">&quot;True&quot;</span> ItemsPath=<span class="string">&quot;ItemContent&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;SemanticZoom x:Name=<span class="string">&quot;semanticZoom&quot;</span>&gt;</span><br><span class="line">                        &lt;SemanticZoom.ZoomedInView&gt;</span><br><span class="line">                            &lt;!--在这里放置GridView(或ListView)以表示放大视图--&gt;</span><br><span class="line">                            &lt;ListView x:Name=<span class="string">&quot;inView&quot;</span>&gt;</span><br><span class="line">                                &lt;ListView.GroupStyle&gt;</span><br><span class="line">                                    &lt;GroupStyle&gt;</span><br><span class="line">                                        &lt;!--用于显示列表有的数据项的模板--&gt;</span><br><span class="line">                                        &lt;GroupStyle.HeaderTemplate&gt;</span><br><span class="line">                                            &lt;DataTemplate&gt;</span><br><span class="line">                                                &lt;Border Background=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;80&quot;</span>&gt;</span><br><span class="line">                                                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Key&#125;&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                                &lt;/Border&gt;</span><br><span class="line">                                            &lt;/DataTemplate&gt;</span><br><span class="line">                                        &lt;/GroupStyle.HeaderTemplate&gt;</span><br><span class="line">                                    &lt;/GroupStyle&gt;</span><br><span class="line">                                &lt;/ListView.GroupStyle&gt;</span><br><span class="line">                                &lt;!--用于显示列表的数据项的模板--&gt;</span><br><span class="line">                                &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                                    &lt;DataTemplate&gt;</span><br><span class="line">                                        &lt;StackPanel&gt;</span><br><span class="line">                                            &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Title&#125;&quot;</span> Height=<span class="string">&quot;40&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                        &lt;/StackPanel&gt;</span><br><span class="line">                                    &lt;/DataTemplate&gt;</span><br><span class="line">                                &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                            &lt;/ListView&gt;</span><br><span class="line">                        &lt;/SemanticZoom.ZoomedInView&gt;</span><br><span class="line">                        &lt;SemanticZoom.ZoomedOutView&gt;</span><br><span class="line">                            &lt;!--在这里放置GridView(或ListView)以表示缩小视图--&gt;</span><br><span class="line">                            &lt;GridView x:Name=<span class="string">&quot;outView&quot;</span>&gt;</span><br><span class="line">                                &lt;!--用于显示弹出的分组列表视图的数据项的模板--&gt;</span><br><span class="line">                                &lt;GridView.ItemTemplate&gt;</span><br><span class="line">                                    &lt;DataTemplate&gt;</span><br><span class="line">                                        &lt;Border Height=<span class="string">&quot;60&quot;</span>&gt;</span><br><span class="line">                                            &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Group.Key&#125;&quot;</span> FontSize=<span class="string">&quot;24&quot;</span>/&gt;</span><br><span class="line">                                        &lt;/Border&gt;</span><br><span class="line">                                    &lt;/DataTemplate&gt;</span><br><span class="line">                                &lt;/GridView.ItemTemplate&gt;</span><br><span class="line">&lt;!--列表布局模板--&gt;</span><br><span class="line">                                &lt;GridView.ItemsPanel&gt;</span><br><span class="line">                                    &lt;ItemsPanelTemplate&gt;</span><br><span class="line">                                        &lt;WrapGrid ItemWidth=<span class="string">&quot;100&quot;</span> ItemHeight=<span class="string">&quot;75&quot;</span> MaximumRowsOrColumns=<span class="string">&quot;1&quot;</span> VerticalChildrenAlignment=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/ItemsPanelTemplate&gt;</span><br><span class="line">                                &lt;/GridView.ItemsPanel&gt;</span><br><span class="line">                                &lt;!--列表项目容器的样式设置--&gt;</span><br><span class="line">                                &lt;GridView.ItemContainerStyle&gt;</span><br><span class="line">                                    &lt;Style TargetType=<span class="string">&quot;GridViewItem&quot;</span>&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;BorderBrush&quot;</span> Value=<span class="string">&quot;Gray&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;Background&quot;</span> Value=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;BorderThickness&quot;</span> Value=<span class="string">&quot;3&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;HorizontalAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;VerticalAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/Style&gt;</span><br><span class="line">                                &lt;/GridView.ItemContainerStyle&gt;</span><br><span class="line">                            &lt;/GridView&gt;</span><br><span class="line">                        &lt;/SemanticZoom.ZoomedOutView&gt;</span><br><span class="line">                    &lt;/SemanticZoom&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line"> public void <span class="function"><span class="title">GetSezData</span></span>() &#123; </span><br><span class="line">            //先创建一个普通的数据集合</span><br><span class="line">            List&lt;BookItem&gt; mainItem=new List&lt;BookItem&gt;();</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 10; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                mainItem.Add(new BookItem &#123; Content = <span class="string">&quot;A类别&quot;</span>, Title = <span class="string">&quot;TestA&quot;</span> + i &#125;);</span><br><span class="line">                mainItem.Add(new BookItem &#123; Content = <span class="string">&quot;B类别&quot;</span>, Title = <span class="string">&quot;TestB&quot;</span> + i &#125;);</span><br><span class="line">                mainItem.Add(new BookItem &#123; Content = <span class="string">&quot;C类别&quot;</span>, Title = <span class="string">&quot;TestC&quot;</span> + i &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            //使用LINQ语法把普通的数据集合转换为分组的数据集合.</span><br><span class="line">            List&lt;ItemInGroup&gt; Items=(from item <span class="keyword">in</span> mainItem group item by item.Content into newItems select new ItemInGroup &#123; Key=newItems.Key,ItemContent=newItems.ToList()&#125;).ToList();</span><br><span class="line">            //设置CollectionViewSource对象的数据源</span><br><span class="line">            this.itemcollectSource.Source= Items;</span><br><span class="line">            //分别对两个视图进行绑定</span><br><span class="line">            outView.ItemsSource = itemcollectSource.View.CollectionGroups;</span><br><span class="line">            inView.ItemsSource = itemcollectSource.View;</span><br><span class="line">        &#125;</span><br><span class="line"> internal class ItemInGroup</span><br><span class="line">    &#123;</span><br><span class="line">        public string Key &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">        public List&lt;BookItem&gt; ItemContent &#123; get; <span class="built_in">set</span>; &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>12.2.虚拟化技术<br>允许应用程序只把在屏幕当前和屏幕附近的UI元素初始化了,其他UI元素都是处于虚构的状态,还可以利用虚拟化技术来做更多的优化,如当虚拟化发生时,可以去主动的回收暂时不使用的内存,从而可以对程序暂用的内存进行优化.也可以利用虚拟化的布局控件去实现自定义的虚拟化的功能需求.<br>12.21.列表的虚拟化<br>标准布局系统可以创建项容器并为每个与列表控件关联的项计算布局.在自定义集合里面可以通过Count属性设置列表的长度,通过IList.this[int index]属性返回数据项和打印出相关的数据信息.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public class VirtualDataList : IList</span><br><span class="line">   &#123;</span><br><span class="line">       public object this[int index] &#123; get &#123;</span><br><span class="line">               //当获取集合的某个数据项的时候把这个数据的索引项打印出来</span><br><span class="line">               Debug.WriteLine(<span class="string">&quot;当前加载的数据Data&quot;</span>+index.ToString());</span><br><span class="line">               <span class="built_in">return</span> new Data &#123; Name = <span class="string">&quot;data&quot;</span> + index.ToString() &#125;;</span><br><span class="line">           &#125; <span class="built_in">set</span> =&gt; throw new NotImplementedException(); &#125;</span><br><span class="line"></span><br><span class="line">       public bool IsFixedSize =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public bool IsReadOnly =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public int Count =&gt; 1000;</span><br><span class="line"></span><br><span class="line">       public bool IsSynchronized =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public object SyncRoot =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public int Add(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void <span class="function"><span class="title">Clear</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public bool Contains(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void CopyTo(Array array, int index)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public IEnumerator <span class="function"><span class="title">GetEnumerator</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public int IndexOf(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void Insert(int index, object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void Remove(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void RemoveAt(int index)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;ListView ItemsSource=<span class="string">&quot;&#123;Binding Data&#125;&quot;</span>&gt;</span><br><span class="line">                   &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                       &lt;DataTemplate&gt;</span><br><span class="line">                           &lt;StackPanel&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> Height=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                           &lt;/StackPanel&gt;</span><br><span class="line">                       &lt;/DataTemplate&gt;</span><br><span class="line">                   &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">               &lt;/ListView&gt;</span><br></pre></td></tr></table></figure>
<p>12.22.VirtualizingStackPanel,ItemsStackPanel和ItemsWrapGrid虚拟化排列布局控件<br>都是虚拟化布局控件,一般情况下在界面的布局上很少会用到这些虚拟化排列的控件,大部分都是封装在列表的布局面板上使用,主要目的就是为了实现列表上大数据量的虚拟化,从而极大的提高列表的效率.<br>其实这3个虚拟化布局控件都是列表控件的默认布局排列的方式,其中VirtualizingStackPanel控件是ListBox的默认布局面板,ItemsStackPanel是ListView的默认布局面板,ItemsWrapGrid是GridView的默认布局面板.<br>VirtualizingStackPanel控件和ItemsStackpanel控件都表示沿着水平方向或垂直方向将内容虚拟化的排列在一行上,所实现的排列布局效果和StackPanel控件是一样的,不同的是这些控件可以实现虚拟化的逻辑.对于数据较多的列表布局,使用VirtualizingStackPanel控件或ItemsStackPanel控件会比StackPanel高效很多,因为虚拟化控件只是把当前屏幕范围内的数据显示出来,其他的数据都通过虚拟化的技术进行处理,并没有进行UI的初始化显示,所以效率很高,ItemsWrapGrid控件实现的是网格的虚拟化布局效果,虚拟化原理和ItemsStackPanel控件类似,只不过排列的方式不一样.<br>如果使用ItemsControl列表控件来展示数据,要给这个列表增加虚拟化的功能,ItemsStackPanel对象元素必须包含在一个ItemsPanelTemplate中,给ItemsControl控件增加ItemsStackPanel虚拟化布局.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">public class ImageList : IList</span><br><span class="line">   &#123;</span><br><span class="line">       public object this[int index] &#123; get &#123;</span><br><span class="line">               //加载的图片是程序里面的图片资源,20张图片循环加载</span><br><span class="line">               int imageIndex = 20 - index % 20;</span><br><span class="line">               Debug.WriteLine(<span class="string">&quot;加载的集合索引是:&quot;</span>+index);</span><br><span class="line">               <span class="built_in">return</span> new ImageItem &#123; ImageName = <span class="string">&quot;图片&quot;</span> + index, Image = new BitmapImage(new Uri($<span class="string">&quot;ms-appx:///Assets/thumb/thumb_&#123;imageIndex&#125;.webp&quot;</span>, UriKind.RelativeOrAbsolute)) &#125;;</span><br><span class="line">           &#125; <span class="built_in">set</span> =&gt; throw new NotImplementedException(); &#125;</span><br><span class="line"></span><br><span class="line">       public bool IsFixedSize =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public bool IsReadOnly =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public int Count =&gt; 100;</span><br><span class="line"></span><br><span class="line">       public bool IsSynchronized =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public object SyncRoot =&gt; throw new NotImplementedException();</span><br><span class="line"></span><br><span class="line">       public int Add(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void <span class="function"><span class="title">Clear</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public bool Contains(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void CopyTo(Array array, int index)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public IEnumerator <span class="function"><span class="title">GetEnumerator</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public int IndexOf(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void Insert(int index, object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void Remove(object value)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public void RemoveAt(int index)</span><br><span class="line">       &#123;</span><br><span class="line">           throw new NotImplementedException();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>2.实现ItemsControl的横向虚拟化布局.<br>要实现ItemsControl的横向虚拟化布局,除了使用ItemsStackPanel控件的Horizontal布局,还需要在ItemsControl中设置ScrollViewer,HorizontalScrollBarVisibility=”Auto”,这样列表就可以水平滚动了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;ItemsControl x:Name=<span class="string">&quot;imageList&quot;</span>&gt;</span><br><span class="line">                   &lt;ItemsControl.ItemsPanel&gt;</span><br><span class="line">                       &lt;ItemsPanelTemplate&gt;</span><br><span class="line">                           &lt;!--设置横向布局--&gt;</span><br><span class="line">                           &lt;ItemsStackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>/&gt;</span><br><span class="line">                       &lt;/ItemsPanelTemplate&gt;</span><br><span class="line">                   &lt;/ItemsControl.ItemsPanel&gt;</span><br><span class="line">                   &lt;ItemsControl.Template&gt;</span><br><span class="line">                       &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                           &lt;!--设置水平滚动--&gt;</span><br><span class="line">                           &lt;ScrollViewer ScrollViewer.HorizontalScrollBarVisibility=<span class="string">&quot;Visible&quot;</span> ScrollViewer.VerticalScrollBarVisibility=<span class="string">&quot;Disabled&quot;</span>&gt;</span><br><span class="line">                               &lt;!--&lt;StackPanel&gt;--&gt;</span><br><span class="line">                                   &lt;ItemsPresenter/&gt;</span><br><span class="line">                               &lt;!--&lt;/StackPanel&gt;--&gt;</span><br><span class="line">                           &lt;/ScrollViewer&gt;</span><br><span class="line">                       &lt;/ControlTemplate&gt;</span><br><span class="line">                   &lt;/ItemsControl.Template&gt;</span><br><span class="line">                   &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                       &lt;DataTemplate&gt;</span><br><span class="line">                          </span><br><span class="line">                               &lt;StackPanel&gt;</span><br><span class="line">                               &lt;Image Source=<span class="string">&quot;&#123;Binding Image&#125;&quot;</span> Width=<span class="string">&quot;144&quot;</span> Height=<span class="string">&quot;240&quot;</span> Stretch=<span class="string">&quot;Uniform&quot;</span>/&gt;</span><br><span class="line">                               &lt;TextBlock Text=<span class="string">&quot;&#123;Binding ImageName&#125;&quot;</span>/&gt;</span><br><span class="line">                           &lt;/StackPanel&gt;</span><br><span class="line">                           </span><br><span class="line">                       &lt;/DataTemplate&gt;</span><br><span class="line">                   &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">               &lt;/ItemsControl&gt;</span><br><span class="line">imageList.ItemsSource = new ImageList();</span><br></pre></td></tr></table></figure>
<p>12.24.大数据量网络图片列表的异步加载和内存优化<br>实现网络图片列表数据集合大加载:1.图片的加载比较耗时2.不断地滑动会让数据集合加载的图片占用的内存越来越高.<br>1.可以采用异步加载的方式来解决,这样的列表加载完之后,图片再显示出来,列表首次加载的速度会很快,我们可以通过后台线程调用网络请求下载图片,下载完图片之后再触发UI线程把图片加载出来.<br>2.要解决内存的问题,可以使用弱引用类型(WeakReference类)来存储图片的数据.弱引用就是不保证不被垃圾回收期回收的对象,它拥有比较短暂的生命周期,在垃圾回收器扫描它所管辖的内存区域过程中,一旦发现了只具有弱引用的对象,就会回收它的内存.不过一般情况下,垃圾回收器的线程优先级很低,也就不会很快发现那些只有弱引用的对象.当内存的使用影响程序流畅运行时,垃圾回收器就会按照优先次序把存在时间长的弱引用对象回收,而释放内存.所以弱引用特别适合在当前这种情况下,占用大量内存,但通过垃圾回收功能回收以后很容易重新创建的图片对象.图片下载完之后会存放在弱引用对象里面,当检查到数据被回收的时候,再进行异步加载,当然也可以把图片用独立存储存起来,这样就免去了再次请求网络的操作.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"> &lt;ListView x:Name=<span class="string">&quot;InternetImage&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> Height=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;&#123;Binding ImageSource&#125;&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line"> public void <span class="function"><span class="title">GetInternetImage</span></span>() &#123; </span><br><span class="line">            List&lt;ImageData&gt; Items=new List&lt;ImageData&gt;();</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 1000; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                //在网络地址后面加上index=i是为了保证每个网络地址不一样</span><br><span class="line">                //这样就不会产生网络数据缓存,更加接近真实的网络图片列表</span><br><span class="line">                Items.Add(new ImageData &#123; Name = <span class="string">&quot;Test&quot;</span> + i, Page = this, ImageUri = new Uri(<span class="string">&quot;http://pic002.cnblogs.com/images/2012/152755/2012120917494440.png?index=&quot;</span> + i) &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            InternetImage.ItemsSource= Items;</span><br><span class="line">        &#125;</span><br><span class="line"> public class ImageData : INotifyPropertyChanged</span><br><span class="line">    &#123;</span><br><span class="line">        private Uri imageUri;</span><br><span class="line"></span><br><span class="line">        public <span class="function"><span class="title">ImageData</span></span>() &#123; &#125;</span><br><span class="line">        public string Name &#123; <span class="built_in">set</span>; get; &#125;</span><br><span class="line">        public Page Page &#123; <span class="built_in">set</span>; get; &#125;</span><br><span class="line">        public Uri ImageUri</span><br><span class="line">        &#123;</span><br><span class="line">            get =&gt; imageUri;</span><br><span class="line">            <span class="built_in">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (imageUri == value)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                imageUri = value;</span><br><span class="line">                bitmapImage = null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //弱引用对象,用于存储下载好的图片对象</span><br><span class="line">        WeakReference bitmapImage;</span><br><span class="line">        private ImageSource imageSource;</span><br><span class="line"></span><br><span class="line">        //ImageSource属性用于绑定到列表的Image控件上</span><br><span class="line">        public ImageSource ImageSource &#123;</span><br><span class="line"></span><br><span class="line">            get &#123;</span><br><span class="line">                <span class="keyword">if</span> (bitmapImage != null)</span><br><span class="line">                &#123;</span><br><span class="line">                    //如果弱引用没有回收,则取弱引用的值</span><br><span class="line">                    <span class="keyword">if</span> (bitmapImage.IsAlive)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">return</span> (ImageSource)bitmapImage.Target;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        Debug.WriteLine(<span class="string">&quot;数据已经被回收&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                    //弱引用已经被回收,那么则通过图片网路地址进行异步下载</span><br><span class="line">                    <span class="keyword">if</span> (ImageUri!=null)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Task.Factory.StartNew(() =&gt; &#123; DownloadImage(imageUri); &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">return</span> null;</span><br><span class="line">                </span><br><span class="line">            &#125; </span><br><span class="line">            </span><br><span class="line">           &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 下载图片的方法</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;imageUri&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private async void DownloadImage(Uri imageUri)</span><br><span class="line">        &#123;</span><br><span class="line">            List&lt;Byte&gt; allBytes = new List&lt;byte&gt;();</span><br><span class="line">            Stream streamForUI;</span><br><span class="line">            //通过网络下载图片数据</span><br><span class="line">            using (var response=await HttpWebRequest.Create(imageUri).GetResponseAsync())</span><br><span class="line">            &#123;</span><br><span class="line">                using (Stream responseStream=response.GetResponseStream())</span><br><span class="line">                &#123;</span><br><span class="line">                    byte[] buffer = new byte[4000];</span><br><span class="line">                    int bytesRead = 0;</span><br><span class="line">                    <span class="keyword">while</span> ((bytesRead = await responseStream.ReadAsync(buffer,0,4000))&gt;0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        allBytes.AddRange(buffer.Take(bytesRead));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            streamForUI = new MemoryStream((int)allBytes.Count);</span><br><span class="line">            streamForUI.Write(allBytes.ToArray(),0,allBytes.Count);</span><br><span class="line">            streamForUI.Seek(0, SeekOrigin.Begin);</span><br><span class="line">            //触发UI线程处理位图和UI更新</span><br><span class="line">            await Page.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                BitmapImage bm=new BitmapImage();</span><br><span class="line">                bm.SetSource(streamForUI.AsRandomAccessStream());</span><br><span class="line">                //把图片位图对象存放到弱引用对象里面</span><br><span class="line">                <span class="keyword">if</span> (bitmapImage==null)</span><br><span class="line">                &#123;</span><br><span class="line">                    bitmapImage = new WeakReference(bm);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    bitmapImage.Target = bm;</span><br><span class="line">                    //触发UI绑定属性的改变</span><br><span class="line">                    PropertyChanged?.Invoke(this,new PropertyChangedEventArgs(<span class="string">&quot;ImageSource&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 属性改变事件</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;proeprty&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        async void OnPropertyChanged(string proeprty) &#123;</span><br><span class="line">            var handler = PropertyChanged;</span><br><span class="line">            await Page.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (handler!=null)</span><br><span class="line">                &#123;</span><br><span class="line">                    handler(this,new PropertyChangedEventArgs(proeprty));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        public event PropertyChangedEventHandler PropertyChanged;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="图表编程"><a href="#图表编程" class="headerlink" title="图表编程"></a>图表编程</h4><p>13.1.动态生成折线图和区域图<br>区域图其实就是在折线图的基础上实现了区域的显示效果,这两者非常类似.<br>13.11.折线图和区域图原理<br>折线图可以通过Polyline图形来进行创建,我们要实现的折线图就是一种特殊的Polyline图形.一般的折线图的X轴坐标都是等量递增的,Y轴的坐标是随意变化的,我们需要根据这种变化的规律来给Polyline控件库的Point属性来赋值.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Polyline Stroke=<span class="string">&quot;LightBlue&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span> Height=<span class="string">&quot;150&quot;</span> Points=<span class="string">&quot;0,10 50,40 100,90 150,50 200,50 250,10 300,100 350,30 400,0&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>区域图的规则和折线图是类似的,只不过区域图是一个闭合的图形,相当于把折线图和X轴组合起来形成一个区域,区域图可以通过Polygon图形去实现,Polygon图形和Polyline图形的区别在于一个是闭合的而另一个是非闭合的,这也是区域图和折线图的区别.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Polygon Fill=<span class="string">&quot;AliceBlue&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span> Height=<span class="string">&quot;150&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span> Points=<span class="string">&quot;0,150 0,10 50,40 100,90 150,50 200,50 250,10 300,100 350,30 400,0 400,150&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>13.12.生成图形逻辑封装<br>创建折线图和区域图最关键的部分就是把相关的数据集合转换为X轴和Y轴的坐标,然后根据坐标生成图形.<br>下面实现了一个生成折线图的PointCollection的方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private PointCollection GetLineChartPointCollection(List&lt;double&gt; datas,double topheight,double perWidth,double topValue) &#123; </span><br><span class="line">            PointCollection pointCollection=new PointCollection();</span><br><span class="line">            double x = 0;//X坐标</span><br><span class="line">            foreach (var data <span class="keyword">in</span> datas)</span><br><span class="line">            &#123;</span><br><span class="line">                double y;   //Y坐标</span><br><span class="line">                <span class="keyword">if</span> (data &gt; topValue) y = 0;</span><br><span class="line">                <span class="keyword">else</span> y = (topheight - (data * topheight) / topValue);</span><br><span class="line">                Point point =new Point(x,y);</span><br><span class="line">                pointCollection.Add(point);</span><br><span class="line">                x += perWidth;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">return</span> pointCollection;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>该方法通过参数传递进行折线图表展示的数据集合,图表的最高高度,两个数据之间的X轴的间隔和图表数值的最大的值,j然后根据这些数据来产生一个坐标的点集合.图表数值的最大值是为了控制数据集合里面的数值相差太大而导致图表显示异常,所以做了一个最大值的控制.如果datas数据里面有比topValue大的数据,将会用topValue来代替,Y坐标的产生公式是y=(topHeight-(data*topHeight)/topValue),计算出点和顶部的距离就是Y坐标,X坐标就是有规律地递增.<br>定义好PointCollection的生成方法后,就可以在UI上生成折线图了,下面是UI上的代码,通过Button事件调用GetLineChartPointCollection方法生成一个折线图.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;chartCanvas&quot;</span> Height=<span class="string">&quot;400&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                    &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;折线图&quot;</span> Click=<span class="string">&quot;Button_Click_23&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;区域图&quot;</span> Click=<span class="string">&quot;Button_Click_24&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line"> /// &lt;summary&gt;</span><br><span class="line">        /// 生成折线图</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void Button_Click_23(object sender, RoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            chartCanvas.Children.Clear();</span><br><span class="line">            List&lt;double&gt; datas=new List&lt;double&gt;() &#123; 23,23,45,26,45,36,29,30,27,38,36,52,27,35&#125;;</span><br><span class="line">            PointCollection pointCollection = GetLineChartPointCollection(datas,400,30,100);</span><br><span class="line">            Polyline polyline=new <span class="function"><span class="title">Polyline</span></span>() &#123; Points=pointCollection,Stroke=new SolidColorBrush(Colors.Red)&#125;;</span><br><span class="line">            chartCanvas.Children.Add(polyline);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>生成区域图,如果直接使用Polygon图形来生成区域图,只需要在GetLineChartPointCollection方法里面添加上一个开始点在X轴的映射坐标和一个结束点在X轴的映射坐标就可以了.除了使用Polygon图形来实现,还可以用Path图形来实现,实现的效果也是一样的.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> private PathGeometry GetLineChartPathGeometry(List&lt;double&gt; datas, double topHeight, double perWidth, double topValue) &#123; </span><br><span class="line">            PathGeometry pathGeometry=new PathGeometry();</span><br><span class="line">            PathFigureCollection pathFigures=new PathFigureCollection();</span><br><span class="line">            //使用数据集合第一个点在X轴的投影点作为Path图形的开始点</span><br><span class="line">            PathFigure pathFigure=new <span class="function"><span class="title">PathFigure</span></span>() &#123; StartPoint=new Point(0,topHeight)&#125;;</span><br><span class="line">            //新建一个PathSegmentCollection集合来添加LineSegment线段的对象</span><br><span class="line">            PathSegmentCollection pathSegmentCollection=new PathSegmentCollection();</span><br><span class="line">            double x = 0; //x坐标</span><br><span class="line">            foreach (double data <span class="keyword">in</span> datas)</span><br><span class="line">            &#123;</span><br><span class="line">                double y;//Y坐标</span><br><span class="line">                <span class="keyword">if</span> (data &gt; topValue) y = 0;</span><br><span class="line">                <span class="keyword">else</span> y = (topHeight - (data * topHeight) / topValue);</span><br><span class="line">                Point point=new Point(x,y);</span><br><span class="line">                LineSegment lineSegment=new <span class="function"><span class="title">LineSegment</span></span>() &#123; Point=point&#125;;</span><br><span class="line">                pathSegmentCollection.Add(lineSegment);</span><br><span class="line">                x+= perWidth;</span><br><span class="line">            &#125;</span><br><span class="line">            x-=perWidth;</span><br><span class="line">            LineSegment lineSegmentEnd = new <span class="function"><span class="title">LineSegment</span></span>() &#123; Point = new Point(x, topHeight) &#125;;</span><br><span class="line">            pathSegmentCollection.Add(lineSegmentEnd);</span><br><span class="line">            pathFigure.Segments = pathSegmentCollection;</span><br><span class="line">            pathFigures.Add(pathFigure);</span><br><span class="line">            pathGeometry.Figures = pathFigures; <span class="built_in">return</span> pathGeometry;</span><br><span class="line">        &#125;</span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">        /// 生成区域图</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sender&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;e&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void Button_Click_24(object sender, RoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            chartCanvas.Children.Clear();</span><br><span class="line">            List&lt;double&gt; datas = new List&lt;double&gt; &#123; 23, 23, 45, 26, 45, 36, 29, 30, 27, 38, 36, 52, 27, 35 &#125;;</span><br><span class="line">            PathGeometry pathGeometry = GetLineChartPathGeometry(datas,400,30,100);</span><br><span class="line">            Path path = new Path &#123; Data = pathGeometry, Fill = new SolidColorBrush(Colors.Red) &#125;;</span><br><span class="line">            chartCanvas.Children.Add(path);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>13.2.实现饼图控件<br>要实现一个饼图控件,首先要实现饼图片形状,有一些重要的属性,如饼图半径Radius,内圆半径InnerRadius,旋转角度RotationAngle,片形角度WedgeAngle,点innerArcStartPoint,点innerArcEndPoint,点outerArcStartPoint和outerArcEndPoint,这4个点的坐标需要通过半径和角度相关的属性计算出来,计算出这4个点的坐标之后,通过这4个点创建一个Path图形,这个Path图形由两条直线和两条弧线组成,形成了一个饼图片形形状,通过这种方式不仅把这个饼图片形形状创建好了,连这个图形在整个饼图的位置也设置好了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">    /// 自定义饼图图片形形状</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    public class PiePiece:Path</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">#region 依赖属性</span></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 饼图半径</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double Radius</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(RadiusProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(RadiusProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> Radius.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty RadiusProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;Radius&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 距离饼图中心的距离</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double PushOut</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(PushOutProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(PushOutProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> PushOut.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty PushOutProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;PushOut&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 饼图内圆半径</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double InnerRadius</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(InnerRadiusProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(InnerRadiusProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> InnerRadius.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty InnerRadiusProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;InnerRadius&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 饼图片形的角度</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double WedgeAngle</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(WedgeAngleProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(WedgeAngleProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> WedgeAngle.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty WedgeAngleProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;WedgeAngle&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 旋转的角度</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double RotationAngle</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(RotationAngleProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(RotationAngleProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> RotationAngle.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty RotationAngleProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;RotationAngle&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 注册中心点的X坐标属性</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double CentreX</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(CentreXProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(CentreXProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> CentreX.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty CentreXProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;CentreX&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 中心点的Y坐标</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double CentreY</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(CentreYProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(CentreYProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> CentreY.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty CentreYProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;CentreY&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 饼图片形所占饼图的百分比</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double Percentage</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(PercentageProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(PercentageProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> Percentage.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty PercentageProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;Percentage&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public double PieceValue</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; <span class="built_in">return</span> (double)GetValue(PieceValueProperty); &#125;</span><br><span class="line">            <span class="built_in">set</span> &#123; SetValue(PieceValueProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store <span class="keyword">for</span> PieceValue.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static <span class="built_in">readonly</span> DependencyProperty PieceValueProperty =</span><br><span class="line">            DependencyProperty.Register(<span class="string">&quot;PieceValue&quot;</span>, typeof(double), typeof(PiePiece), new PropertyMetadata(0));</span><br><span class="line">        private double lastWidth=0;</span><br><span class="line">        private double lastHeight=0;</span><br><span class="line">        private PathFigure figure;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">#endregion</span></span><br><span class="line">        public <span class="function"><span class="title">PiePiece</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">            CreatePathData(0,0);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void CreatePathData(double width, double height)</span><br><span class="line">        &#123;</span><br><span class="line">            //用于退出布局的循环逻辑</span><br><span class="line">            <span class="keyword">if</span> (lastWidth == width &amp;&amp; lastHeight == height) <span class="built_in">return</span>;</span><br><span class="line">            lastWidth = width;</span><br><span class="line">            lastHeight = height;</span><br><span class="line">            Point startPoint = new Point(CentreX,CentreY);</span><br><span class="line">            //计算饼图片形内圆弧的开始点</span><br><span class="line">            Point innerArcStartPoint = ComputeCartesianCCoordinate(RotationAngle,InnerRadius);</span><br><span class="line">            //根据中心点来校正坐标的位置</span><br><span class="line">            innerArcStartPoint = Offset(innerArcStartPoint,CentreX,CentreY);</span><br><span class="line">            //计算饼图片形内圆弧的结束点</span><br><span class="line">            Point innerArcEndPoint=ComputeCartesianCCoordinate(RotationAngle+WedgeAngle,InnerRadius);</span><br><span class="line">            innerArcEndPoint = Offset(innerArcEndPoint,CentreX,CentreY);</span><br><span class="line">            //计算饼图片形外圆弧的开始点</span><br><span class="line">            Point outerArcStartPoint = ComputeCartesianCCoordinate(RotationAngle,Radius);</span><br><span class="line">            outerArcStartPoint = Offset(outerArcStartPoint,CentreX,CentreY);</span><br><span class="line">            //计算饼图片形外圆弧的结束点</span><br><span class="line">            Point outerArcEndPoint=ComputeCartesianCCoordinate(RotationAngle+WedgeAngle,Radius);</span><br><span class="line">            outerArcEndPoint = Offset(outerArcEndPoint,CentreX,CentreY);</span><br><span class="line">            //判断饼图片形的角度是否大于180度</span><br><span class="line">            bool largeArc = WedgeAngle &gt; 180.0;</span><br><span class="line">            //把扇面饼图往偏离中心点推出一部分</span><br><span class="line">            <span class="keyword">if</span> (PushOut&gt;0)</span><br><span class="line">            &#123;</span><br><span class="line">                Point offset = ComputeCartesianCCoordinate(RotationAngle+WedgeAngle/2,PushOut);</span><br><span class="line"></span><br><span class="line">                //根据偏移量来重新设置圆弧的坐标</span><br><span class="line">                innerArcStartPoint = Offset(innerArcStartPoint,offset.X,offset.Y);</span><br><span class="line">                innerArcEndPoint = Offset(innerArcEndPoint,offset.X,offset.Y);</span><br><span class="line">                outerArcStartPoint = Offset(outerArcStartPoint,offset.X,offset.Y);</span><br><span class="line">                outerArcEndPoint = Offset(outerArcEndPoint,offset.X,offset.Y);</span><br><span class="line">            &#125;</span><br><span class="line">            //外圆的大小</span><br><span class="line">            Size outerArcSize = new Size(Radius,Radius);</span><br><span class="line">            //内圆的大小</span><br><span class="line">            Size innerArcSize = new Size(InnerRadius,InnerRadius);</span><br><span class="line">            var geometry = new PathGeometry();</span><br><span class="line">            figure = new PathFigure();</span><br><span class="line">            //从内圆开始坐标开始画一个闭合的扇形图形</span><br><span class="line">            figure.StartPoint = innerArcStartPoint;</span><br><span class="line">            AddLine(outerArcStartPoint);</span><br><span class="line">            AddArc(outerArcEndPoint,outerArcSize,largeArc,SweepDirection.Clockwise);</span><br><span class="line">            AddLine(innerArcEndPoint);</span><br><span class="line">            AddArc(innerArcStartPoint,innerArcSize,largeArc,SweepDirection.Counterclockwise);</span><br><span class="line">            figure.IsClosed= <span class="literal">true</span>;</span><br><span class="line">            geometry.Figures.Add(figure);</span><br><span class="line">            this.Data= geometry;</span><br><span class="line">        &#125;</span><br><span class="line">        protected override Size MeasureOverride(Size availableSize)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span> availableSize; </span><br><span class="line">        &#125;</span><br><span class="line"> protected override Size ArrangeOverride(Size finalSize)</span><br><span class="line">        &#123;</span><br><span class="line">            CreatePathData(finalSize.Width,finalSize.Height);</span><br><span class="line">            <span class="built_in">return</span> finalSize;</span><br><span class="line">        &#125;</span><br><span class="line">        //把点进行偏移转换</span><br><span class="line">        private Point Offset(Point point,double offsetX,double offsetY) &#123;</span><br><span class="line">            point.X += offsetX;</span><br><span class="line">            point.Y += offsetY;</span><br><span class="line">            <span class="built_in">return</span> point;</span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 根据角度和半径来计算出圆弧上的点的坐标</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;rotationAngle&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;innerRadius&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;returns&gt;&lt;/returns&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private Point ComputeCartesianCCoordinate(double angle, double radius)</span><br><span class="line">        &#123;</span><br><span class="line">            //转换成弧度单位</span><br><span class="line">            double angleRad = (Math.PI / 180.0) * (angle-90);</span><br><span class="line">            double x=radius*Math.Cos(angleRad);</span><br><span class="line">            double y=radius*Math.Sin(angleRad);</span><br><span class="line">            <span class="built_in">return</span> new Point(x, y);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 在图形中添加一个点</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;x&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;y&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void AddPoint(double x,double y) &#123; </span><br><span class="line">            LineSegment segment= new LineSegment();</span><br><span class="line">            segment.Point= new Point(x+0.5*StrokeThickness,y+0.5*StrokeThickness);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 在图形中添加一条线段</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;point&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void AddLine(Point point) &#123; </span><br><span class="line">            LineSegment segment= new LineSegment();</span><br><span class="line">            segment.Point= point;</span><br><span class="line">            figure.Segments.Add(segment);</span><br><span class="line">        &#125;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 在图形中添加一个圆弧</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;point&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;size&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;largeArc&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=<span class="string">&quot;sweepDirection&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">        private void AddArc(Point point,Size size,bool largeArc,SweepDirection sweepDirection) &#123; </span><br><span class="line">            ArcSegment segment= new ArcSegment();</span><br><span class="line">            segment.Point= point;</span><br><span class="line">            segment.Size= size;</span><br><span class="line">            segment.IsLargeArc= largeArc;</span><br><span class="line">            segment.SweepDirection= sweepDirection;</span><br><span class="line">            figure.Segments.Add(segment);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>13.22.封装饼图控件<br>创建好了PiePiece形状之后,下面开始就要开始创建利用PiePiece形状来创建饼图控件了.创建饼图控件是通过UserControl控件来实现的,UserControl控件的Xaml代码里面只有一个Grid面板,用来加载PiePiece形状来组成饼图.<br>在饼图控件里面需要自定义一些相关的属性,用来传递相关的参数.属性HoleSize表示饼图内圆的大小,按照比例来计算,属性pieWidth表示饼图的宽度.饼图的数据集合是通过控件数据的上下文属性DataContext属性来传递,在初始化饼图的时候需要把DataContext的数据读取出来然后再创建PiePiece图形,每个PiePiece图形都添加了Tap事件,用来实现当用户单击饼图的时候,相应的某一块回往外推出去.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">&lt;UserControl</span><br><span class="line">    x:Class=&quot;App1.Controls.PiePlotter&quot;</span><br><span class="line">    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span><br><span class="line">    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span><br><span class="line">    xmlns:local=&quot;using:App1.Controls&quot;</span><br><span class="line">    xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span><br><span class="line">    xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span><br><span class="line">    mc:Ignorable=&quot;d&quot;</span><br><span class="line">    d:DesignHeight=&quot;300&quot;</span><br><span class="line">    d:DesignWidth=&quot;400&quot;</span><br><span class="line">    FontFamily=&quot;&#123;StaticResource PhoneFontFamilyNormal&#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line"></span><br><span class="line">    &lt;Grid x:Name=&quot;LayoutRoot&quot;&gt;</span><br><span class="line">    &lt;/Grid&gt;</span><br><span class="line">&lt;/UserControl&gt;</span><br><span class="line">using App1.Models;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.IO;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Runtime.InteropServices.WindowsRuntime;</span><br><span class="line">using Windows.Foundation;</span><br><span class="line">using Windows.Foundation.Collections;</span><br><span class="line">using Windows.UI.Xaml;</span><br><span class="line">using Windows.UI.Xaml.Controls;</span><br><span class="line">using Windows.UI.Xaml.Controls.Primitives;</span><br><span class="line">using Windows.UI.Xaml.Data;</span><br><span class="line">using Windows.UI.Xaml.Input;</span><br><span class="line">using Windows.UI.Xaml.Media;</span><br><span class="line">using Windows.UI.Xaml.Navigation;</span><br><span class="line"></span><br><span class="line">//https://go.microsoft.com/fwlink/?LinkId=234236 上介绍了“用户控件”项模板</span><br><span class="line"></span><br><span class="line">namespace App1.Controls</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 饼图控件</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    public sealed partial class PiePlotter : UserControl</span><br><span class="line">    &#123;</span><br><span class="line">        public PiePlotter()</span><br><span class="line">        &#123;</span><br><span class="line">            this.InitializeComponent();</span><br><span class="line">        &#125;</span><br><span class="line">        #region 依赖属性</span><br><span class="line">        //注册内圆大小属性</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 内圆的大小,按比例来计算</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double HoleSize</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; return (double)GetValue(HoleSizeProperty); &#125;</span><br><span class="line">            set &#123; SetValue(HoleSizeProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store for HoleSize.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static readonly DependencyProperty HoleSizeProperty =</span><br><span class="line">            DependencyProperty.Register(&quot;HoleSize&quot;, typeof(double), typeof(PiePlotter), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 饼图宽度</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        public double PieWidth</span><br><span class="line">        &#123;</span><br><span class="line">            get &#123; return (double)GetValue(PieWidthProperty); &#125;</span><br><span class="line">            set &#123; SetValue(PieWidthProperty, value); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Using a DependencyProperty as the backing store for PieWidth.  This enables animation, styling, binding, etc...</span><br><span class="line">        public static readonly DependencyProperty PieWidthProperty =</span><br><span class="line">            DependencyProperty.Register(&quot;PieWidth&quot;, typeof(double), typeof(PiePlotter), new PropertyMetadata(0));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line">        //饼图的片形PiePiece的集合</span><br><span class="line">        private List&lt;PiePiece&gt; piePieces= new List&lt;PiePiece&gt;();</span><br><span class="line">        //选中的当前饼图的数据项</span><br><span class="line">        private PieDataItem CurrentItem;</span><br><span class="line">        //初始化展示饼图的方法</span><br><span class="line">        public void ShowPie() &#123;</span><br><span class="line">            //获取控件的数据上下文,转换成数据集合</span><br><span class="line">            List&lt;PieDataItem&gt; myCollectionView = (List&lt; PieDataItem &gt;)this.DataContext;</span><br><span class="line">            if (myCollectionView == null)</span><br><span class="line">                return;</span><br><span class="line">            //半径的大小</span><br><span class="line">            double halfWidth = PieWidth / 2;</span><br><span class="line">            //内圆半径大小</span><br><span class="line">            double innerRadius = halfWidth * HoleSize;</span><br><span class="line">            //计算图表数据的总和</span><br><span class="line">            double total = 0;</span><br><span class="line">            foreach (PieDataItem item in myCollectionView)</span><br><span class="line">            &#123;</span><br><span class="line">                total += item.Value;</span><br><span class="line">            &#125;</span><br><span class="line">            //通过PiePiece构建饼图</span><br><span class="line">            LayoutRoot.Children.Clear();</span><br><span class="line">            piePieces.Clear();</span><br><span class="line">            double accumulativeAngle = 0;</span><br><span class="line">            foreach (PieDataItem item in myCollectionView)</span><br><span class="line">            &#123;</span><br><span class="line">                bool selectedItem = item == CurrentItem;</span><br><span class="line">                double wedgeAngle = item.Value * 360 / total;</span><br><span class="line">                //根据数据来创建饼图的每一块图形</span><br><span class="line">                PiePiece piePiece= new PiePiece() &#123; </span><br><span class="line">                    Radius=halfWidth,</span><br><span class="line">                    InnerRadius=innerRadius,</span><br><span class="line">                    CentreX=halfWidth,</span><br><span class="line">                    CentreY=halfWidth,</span><br><span class="line">                    PushOut=(selectedItem?10.0:0),</span><br><span class="line">                    WedgeAngle=wedgeAngle,</span><br><span class="line">                    PieceValue=item.Value,</span><br><span class="line">                    RotationAngle=accumulativeAngle,</span><br><span class="line">                    Fill=item.Brush,</span><br><span class="line">                    Tag=item</span><br><span class="line">                &#125;;</span><br><span class="line">                //添加饼图片形的点击事件</span><br><span class="line">                piePiece.Tapped += PiePiece_Tapped;</span><br><span class="line">                piePieces.Add(piePiece);</span><br><span class="line">                LayoutRoot.Children.Add(piePiece);</span><br><span class="line">                accumulativeAngle+= wedgeAngle;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void PiePiece_Tapped(object sender, TappedRoutedEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            PiePiece piePiece = sender as PiePiece;</span><br><span class="line">            CurrentItem = piePiece.Tag as PieDataItem;</span><br><span class="line">            ShowPie();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>13.3.线性报表<br>一个完整的线性报表包括网格图,坐标轴,图例和线性图形这四部分.网格图是指报表背景的网格,主要目的是清晰的查看坐标点的位置.坐标轴是水平坐标体系的X轴和Y轴,图例是集中于报表一角或一侧的报表上各种符号和颜色所代表内容与指标的说明,有助于更好的认识报表.线性图形就是图表里面的主体图形.<br>13.31.实现图形表格和坐标轴<br>首先封装一个图表的基础样式的ChartStyle类,这个类主要定义了X轴,Y轴的坐标范围,网格面板的大小和把网格面板的点转换为坐标体系的点的方法.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">   /// 图表基础样式类</span><br><span class="line">   /// &lt;/summary&gt;</span><br><span class="line">   public class ChartStyle</span><br><span class="line">   &#123;</span><br><span class="line">       //X轴最小坐标</span><br><span class="line">       private double xmin = 0;</span><br><span class="line">       //X轴最大坐标</span><br><span class="line">       private double xmax = 1;</span><br><span class="line">       //Y轴最小坐标</span><br><span class="line">       private double ymin = 0;</span><br><span class="line">       //Y轴最大坐标</span><br><span class="line">       private double ymax = 1;</span><br><span class="line">       //网格面板</span><br><span class="line">       private Canvas chartCanvas;</span><br><span class="line"></span><br><span class="line">       public <span class="function"><span class="title">ChartStyle</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public double Xmin &#123; get =&gt; xmin; <span class="built_in">set</span> =&gt; xmin = value; &#125;</span><br><span class="line">       public double Xmax &#123; get =&gt; xmax; <span class="built_in">set</span> =&gt; xmax = value; &#125;</span><br><span class="line">       public double Ymin &#123; get =&gt; ymin; <span class="built_in">set</span> =&gt; ymin = value; &#125;</span><br><span class="line">       public double Ymax &#123; get =&gt; ymax; <span class="built_in">set</span> =&gt; ymax = value; &#125;</span><br><span class="line">       </span><br><span class="line">       public Canvas ChartCanvas &#123; get =&gt; chartCanvas; <span class="built_in">set</span> =&gt; chartCanvas = value; &#125;</span><br><span class="line">       //定义网格面板的宽度和高度</span><br><span class="line">       public void ResizeCanvas(double width,double height) &#123; </span><br><span class="line">           ChartCanvas.Width = width;</span><br><span class="line">           ChartCanvas.Height = height;</span><br><span class="line">       &#125;</span><br><span class="line">       //把面板的点转换成为图表坐标体系的点坐标</span><br><span class="line">       public Point NormalizePoint(Point pt) &#123;</span><br><span class="line">           <span class="keyword">if</span> (ChartCanvas.Width.ToString()==<span class="string">&quot;Nan&quot;</span>)</span><br><span class="line">               ChartCanvas.Width = 400;</span><br><span class="line">           <span class="keyword">if</span> (ChartCanvas.Height.ToString() == <span class="string">&quot;Nan&quot;</span>)</span><br><span class="line">               ChartCanvas.Height = 400;</span><br><span class="line">           Point result = new Point();</span><br><span class="line">           result.X = (pt.X - Xmin) * ChartCanvas.Width / (Xmax - Xmin);</span><br><span class="line">           result.Y=ChartCanvas.Height-(pt.Y-Ymin)*ChartCanvas.Height/ (Ymax - Ymin);</span><br><span class="line">           <span class="built_in">return</span> result;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>从ChartStyle类派生出ChartStyleGridlines类表示网格线条类,通过ChartStyleGridlines类来初始化图表的网格线条和X轴,Y轴,ChartStyleGridlines类定义图表的标题,X轴和Y轴单位间距,网格颜色等属性.是用Line对象来绘制网格的图表.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">   /// 网格线条类</span><br><span class="line">   /// &lt;/summary&gt;</span><br><span class="line">   public class ChartStyleGridlines : ChartStyle</span><br><span class="line">   &#123;</span><br><span class="line">       private string title;</span><br><span class="line">       private Canvas textCanvas1;</span><br><span class="line">       private bool isXGrid = <span class="literal">true</span>;</span><br><span class="line">       private bool isYGrid = <span class="literal">true</span>;</span><br><span class="line">       private Brush gridlineColor = new SolidColorBrush(Colors.LightGray);</span><br><span class="line">       private double xTick = 1;</span><br><span class="line">       private double yTick = 0.5;</span><br><span class="line">       private GridlinePatternEnum gridlinePattern;</span><br><span class="line"></span><br><span class="line">       //图表标题</span><br><span class="line">       public string Title &#123; get =&gt; title; <span class="built_in">set</span> =&gt; title = value; &#125;</span><br><span class="line">       //添加X轴和Y轴的面板</span><br><span class="line">       public Canvas textCanvas &#123; get =&gt; textCanvas1; <span class="built_in">set</span> =&gt; textCanvas1 = value; &#125;</span><br><span class="line">       //是否创建水平线条</span><br><span class="line">       public bool IsXGrid &#123; get =&gt; isXGrid; <span class="built_in">set</span> =&gt; isXGrid = value; &#125;</span><br><span class="line">       //是否创建垂直线条</span><br><span class="line">       public bool IsYGrid &#123; get =&gt; isYGrid; <span class="built_in">set</span> =&gt; isYGrid = value; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 网格颜色画刷</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       public Brush GridlineColor &#123; get =&gt; gridlineColor; <span class="built_in">set</span> =&gt; gridlineColor = value; &#125;</span><br><span class="line">       //X轴单位间距</span><br><span class="line">       public double XTick &#123; get =&gt; xTick; <span class="built_in">set</span> =&gt; xTick = value; &#125;</span><br><span class="line">       public double YTick &#123; get =&gt; yTick; <span class="built_in">set</span> =&gt; yTick = value; &#125;</span><br><span class="line">       //线条类型</span><br><span class="line">       public GridlinePatternEnum GridlinePattern &#123;</span><br><span class="line">           get =&gt; gridlinePattern; <span class="built_in">set</span> =&gt; gridlinePattern = value;</span><br><span class="line">       &#125;</span><br><span class="line">       private double leftOffset = 20;</span><br><span class="line">       private double rightOffset = 10;</span><br><span class="line">       private double bottomOffset = 15;</span><br><span class="line">       private Line gridline = new Line();</span><br><span class="line"></span><br><span class="line">       public <span class="function"><span class="title">ChartStyleGridlines</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           title = <span class="string">&quot;Title&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 添加网格图表的样式</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;tbTitle&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       public void AddChartStyle(TextBlock tbTitle) &#123;</span><br><span class="line">           Point pt = new Point();</span><br><span class="line">           Line tick=new Line();</span><br><span class="line">           double offset = 0;</span><br><span class="line">           double dx, dy;</span><br><span class="line">           TextBlock tb = new TextBlock();</span><br><span class="line">           //确定右边的偏移量</span><br><span class="line">           tb.Text = Xmax.ToString();</span><br><span class="line">           tb.Measure(new Size(Double.PositiveInfinity,double.PositiveInfinity));</span><br><span class="line">           Size size = tb.DesiredSize;</span><br><span class="line">           rightOffset = size.Width / 2 + 2;</span><br><span class="line">           //确定左边的偏移量</span><br><span class="line">           <span class="keyword">for</span> (dy =Ymin; dy &lt;=Ymax; dy+=YTick)</span><br><span class="line">           &#123;</span><br><span class="line">               pt = NormalizePoint(new Point(Xmin,dy));</span><br><span class="line">               tb=new TextBlock();</span><br><span class="line">               tb.Text = dy.ToString();</span><br><span class="line">               tb.TextAlignment = TextAlignment.Right;</span><br><span class="line">               tb.Measure(new Size(double.PositiveInfinity,double.PositiveInfinity));</span><br><span class="line">               size= tb.DesiredSize;</span><br><span class="line">               <span class="keyword">if</span> (offset &lt; size.Width)</span><br><span class="line">                   offset = size.Width;</span><br><span class="line">           &#125;</span><br><span class="line">           leftOffset = offset + 5;</span><br><span class="line">           ChartCanvas.Width=textCanvas.Width-leftOffset-rightOffset;</span><br><span class="line">           ChartCanvas.Height = textCanvas.Height - bottomOffset - size.Height / 2;</span><br><span class="line">           Canvas.SetLeft(ChartCanvas, leftOffset);</span><br><span class="line">           Canvas.SetTop(ChartCanvas,bottomOffset);</span><br><span class="line">           //创建报表的边框</span><br><span class="line">           Rectangle chartRect= new Rectangle();</span><br><span class="line">           chartRect.Stroke = new SolidColorBrush(Colors.Black);</span><br><span class="line">           chartRect.Width=ChartCanvas.Width;</span><br><span class="line">           chartRect.Height=ChartCanvas.Height;</span><br><span class="line">           ChartCanvas.Children.Add(chartRect);</span><br><span class="line">           //创建垂直线条</span><br><span class="line">           <span class="keyword">if</span> (IsYGrid == <span class="literal">true</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">for</span> (dx = Xmin + XTick; dx &lt; Xmax; dx += XTick)</span><br><span class="line">               &#123;</span><br><span class="line">                   gridline = new Line();</span><br><span class="line">                   AddLinePattern();</span><br><span class="line">                   gridline.X1 = NormalizePoint(new Point(dx,Ymin)).X;</span><br><span class="line">                   gridline.Y1 = NormalizePoint(new Point(dx, Ymin)).Y;</span><br><span class="line">                   gridline.X2 = NormalizePoint(new Point(dx,Ymax)).X;</span><br><span class="line">                   gridline.Y2 = NormalizePoint(new Point(dx, Ymax)).Y;</span><br><span class="line">                   ChartCanvas.Children.Add(gridline);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           //创建水平线条</span><br><span class="line">           <span class="keyword">if</span> (IsXGrid==<span class="literal">true</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">for</span> (dy=Ymin+YTick;dy&lt;Ymax;dy+=YTick)</span><br><span class="line">               &#123;</span><br><span class="line">                   gridline = new Line();</span><br><span class="line">                   AddLinePattern();</span><br><span class="line">                   gridline.X1 = NormalizePoint(new Point(Xmin, dy)).X;</span><br><span class="line">                   gridline.Y1 = NormalizePoint(new Point(Xmin,dy)).Y;</span><br><span class="line">                   gridline.X2= NormalizePoint(new Point(Xmax,dy)).X;</span><br><span class="line">                   gridline.Y2= NormalizePoint(new Point(Xmax,dy)).Y;</span><br><span class="line">                   ChartCanvas.Children.Add(gridline);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           //创建X轴</span><br><span class="line">           <span class="keyword">for</span> (dx=Xmin;dx&lt;=Xmax;dx+=XTick)</span><br><span class="line">           &#123;</span><br><span class="line">               pt = NormalizePoint(new Point(dx,Ymin));</span><br><span class="line">               tick = new Line();</span><br><span class="line">               tick.Stroke = new SolidColorBrush(Colors.Black);</span><br><span class="line">               tick.X1 = pt.X; tick.Y1=pt.Y;</span><br><span class="line">               tick.X2= pt.X;tick.Y2= pt.Y-5;</span><br><span class="line">               ChartCanvas.Children.Add(tick);</span><br><span class="line">               tb=new TextBlock();</span><br><span class="line">               tb.Text = dx.ToString();</span><br><span class="line">               tb.Measure(new Size(double.PositiveInfinity,double.PositiveInfinity));</span><br><span class="line">               size = tb.DesiredSize;</span><br><span class="line">               textCanvas.Children.Add(tb);</span><br><span class="line">               Canvas.SetLeft(tb,leftOffset+pt.X-size.Width/2);</span><br><span class="line">               Canvas.SetTop(tb,pt.Y+10+size.Height/2);</span><br><span class="line">           &#125;</span><br><span class="line">           //创建Y轴</span><br><span class="line">           <span class="keyword">for</span> (dy=Ymin;dy&lt;=Ymax;dy+=YTick)</span><br><span class="line">           &#123;</span><br><span class="line">               pt=NormalizePoint(new Point(Xmin,dy));</span><br><span class="line">               tick=new Line();</span><br><span class="line">               tick.Stroke = new SolidColorBrush(Colors.Black);</span><br><span class="line"></span><br><span class="line">               tick.X1 = pt.X;</span><br><span class="line">               tick.Y1=pt.Y;</span><br><span class="line">               tick.X2= pt.X+5;</span><br><span class="line">               tick.Y2= pt.Y;</span><br><span class="line">               ChartCanvas.Children.Add(tick);</span><br><span class="line">               tb.Text = dy.ToString();</span><br><span class="line">               tb.Measure(new Size(double.PositiveInfinity,double.PositiveInfinity));</span><br><span class="line">               size= tb.DesiredSize;</span><br><span class="line">               textCanvas.Children.Add(tb);</span><br><span class="line">               Canvas.SetLeft(tb,-30);</span><br><span class="line">               Canvas.SetTop(tb,pt.Y);</span><br><span class="line">           &#125;</span><br><span class="line">           //图表标题</span><br><span class="line">           tbTitle.Text = Title;</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 添加线条的样式</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">       private void <span class="function"><span class="title">AddLinePattern</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           gridline.Stroke = gridlineColor;</span><br><span class="line">           gridline.StrokeThickness = 1;</span><br><span class="line">           switch (gridlinePattern)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">case</span> GridlinePatternEnum.Solid:</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">               <span class="keyword">case</span> GridlinePatternEnum.Dash:</span><br><span class="line">                   DoubleCollection doubleCollection= new DoubleCollection();</span><br><span class="line">                   doubleCollection.Add(4);</span><br><span class="line">                   doubleCollection.Add(3);</span><br><span class="line">                   gridline.StrokeDashArray= doubleCollection;</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">               <span class="keyword">case</span> GridlinePatternEnum.Dot:</span><br><span class="line">                   doubleCollection = new DoubleCollection();</span><br><span class="line">                   doubleCollection.Add(1);</span><br><span class="line">                   doubleCollection.Add(2);</span><br><span class="line">                   gridline.StrokeDashArray= doubleCollection;</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">               <span class="keyword">case</span> GridlinePatternEnum.DashDot:</span><br><span class="line">                   doubleCollection = new DoubleCollection();</span><br><span class="line">                   doubleCollection.Add(4);</span><br><span class="line">                   doubleCollection.Add(2);</span><br><span class="line">                   doubleCollection.Add(1);</span><br><span class="line">                   doubleCollection.Add(2);</span><br><span class="line">                   gridline.StrokeDashArray= doubleCollection;</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">               default:</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>13.32.定义线性数据图形类<br>线性数据图是在报表展现数据走势的图形,定义一个线性数据图形类DataSeries.在这个类里面定义了一个多边形Polyline类的属性LineSeries来表示绘制线性图形,除此之外,还有线条颜色属性LineColor,线条大小属性LineThickness.线条类型属性LinePattern和图形名称属性SeriesName.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">   /// 线性数据图形类</span><br><span class="line">   /// &lt;/summary&gt;</span><br><span class="line">   public class DataSeries</span><br><span class="line">   &#123;</span><br><span class="line">       //线性图表</span><br><span class="line">       private Polyline lineSeries = new Polyline();</span><br><span class="line">       private Brush lineColor;</span><br><span class="line">       private double lineThickness = 1;</span><br><span class="line">       private string seriesName=<span class="string">&quot;Default Name&quot;</span>;</span><br><span class="line">       private LinePatternEnum linePattern;</span><br><span class="line"></span><br><span class="line">       public <span class="function"><span class="title">DataSeries</span></span>()</span><br><span class="line">       &#123;</span><br><span class="line">           LineColor = new SolidColorBrush(Colors.Black);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       public Polyline LineSeries &#123; get =&gt; lineSeries; <span class="built_in">set</span> =&gt; lineSeries = value; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 线条颜色</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       public Brush LineColor &#123; get =&gt; lineColor; <span class="built_in">set</span> =&gt; lineColor = value; &#125;</span><br><span class="line">       //线条大小</span><br><span class="line">       public double LineThickness &#123; get =&gt; lineThickness; <span class="built_in">set</span> =&gt; lineThickness = value; &#125;</span><br><span class="line">       //线条类型</span><br><span class="line">       public LinePatternEnum LinePattern &#123; get =&gt; linePattern; <span class="built_in">set</span> =&gt; linePattern = value; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 图形名称</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       public string SeriesName &#123; get =&gt; seriesName; <span class="built_in">set</span> =&gt; seriesName = value; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 添加线条的样式</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       public void <span class="function"><span class="title">AddLinePattern</span></span>() &#123; </span><br><span class="line">           //</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">public enum LinePatternEnum</span><br><span class="line">   &#123;</span><br><span class="line">       Solid=1,</span><br><span class="line">       Dash=2,</span><br><span class="line">       Dot=3,</span><br><span class="line">       DashDot=4,</span><br><span class="line">       None=5</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>上面的DataSeries类只是封装了单个线性图形的基本属性和形状,下面再定义一个DataCollection类表示图形数据集合类,用于实现把线性图形按照定义的坐标体系添加到界面的面板上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">   /// 图形数据集合类</span><br><span class="line">   /// &lt;/summary&gt;</span><br><span class="line">   public class DataCollection</span><br><span class="line">   &#123;</span><br><span class="line">       private List&lt;DataSeries&gt; dataList;</span><br><span class="line"></span><br><span class="line">       //线性数据图形类集合</span><br><span class="line">       public List&lt;DataSeries&gt; DataList &#123; get =&gt; dataList; <span class="built_in">set</span> =&gt; dataList = value; &#125;</span><br><span class="line">       public <span class="function"><span class="title">DataCollection</span></span>() &#123; </span><br><span class="line">           dataList= new List&lt;DataSeries&gt;();</span><br><span class="line">       &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 往Canvas面板上按照坐标系的坐标来添加线性图形</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;canvas&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;cs&quot;</span>&gt;&lt;/param&gt;</span><br><span class="line">       public void AddLines(Canvas canvas,ChartStyle cs) &#123;</span><br><span class="line">           int j = 0;</span><br><span class="line">           foreach (DataSeries ds <span class="keyword">in</span> dataList)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">if</span> (ds.SeriesName==<span class="string">&quot;Default Name&quot;</span>)</span><br><span class="line">               &#123;</span><br><span class="line">                   ds.SeriesName = <span class="string">&quot;DataSeries&quot;</span> + j.ToString();</span><br><span class="line">               &#125;</span><br><span class="line">               ds.AddLinePattern();</span><br><span class="line">               <span class="keyword">for</span> (int i = 0; i &lt; ds.LineSeries.Points.Count; i++)</span><br><span class="line">               &#123;</span><br><span class="line">                   ds.LineSeries.Points[i] = cs.NormalizePoint(ds.LineSeries.Points[i]);</span><br><span class="line">               &#125;</span><br><span class="line">               canvas.Children.Add(ds.LineSeries);</span><br><span class="line">               j++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>13.33.实现图例<br>图例的实现其实就是把整个报表用到的图形用简单的线段画出来并标出名称,图例类Legend类里面定义了一个AddLegend方法,通过使用报表中的ChartStyleGridlines对象和DataCollection对象作为参数,然后取出报表中图形的样本和名称,添加到Canvas面板上,这样就实现了一个图例的模块.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">public class Legend</span><br><span class="line">   &#123;</span><br><span class="line">       public bool IsLegend &#123; get; private <span class="built_in">set</span>; &#125;</span><br><span class="line">       public Canvas legendCanvas &#123; get; private <span class="built_in">set</span>; &#125;</span><br><span class="line">       public bool IsBorder &#123; get; private <span class="built_in">set</span>; &#125;</span><br><span class="line">       /// &lt;summary&gt;</span><br><span class="line">       /// 添加图例</span><br><span class="line">       /// &lt;/summary&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;cs&quot;</span>&gt;报表的网格图形对象&lt;/param&gt;</span><br><span class="line">       /// &lt;param name=<span class="string">&quot;dc&quot;</span>&gt;报表的图形数据集合对象&lt;/param&gt;</span><br><span class="line">       public void AddLegend(ChartStyleGridlines cs,DataCollection dc) &#123; </span><br><span class="line">           TextBlock tb= new TextBlock();</span><br><span class="line">           <span class="keyword">if</span> (dc.DataList.Count &lt; 1 || !IsLegend)</span><br><span class="line">               <span class="built_in">return</span>;</span><br><span class="line">           int n = 0;</span><br><span class="line">           //取出每个图形的名称</span><br><span class="line">           string[] legendLabels = new string[dc.DataList.Count];</span><br><span class="line">           foreach (DataSeries ds <span class="keyword">in</span> dc.DataList)</span><br><span class="line">           &#123;</span><br><span class="line">               legendLabels[n] = ds.SeriesName;</span><br><span class="line">               n++;</span><br><span class="line">           &#125;</span><br><span class="line">           double legendWidth = 0;</span><br><span class="line">           Size size = new Size(0,0);</span><br><span class="line">           //创建每个图形名称的TextBlock控件</span><br><span class="line">           <span class="keyword">for</span> (int i = 0; i &lt; legendLabels.Length; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               tb = new TextBlock();</span><br><span class="line">               tb.Text= legendLabels[i];</span><br><span class="line">               tb.Measure(new Size(double.PositiveInfinity,double.PositiveInfinity));</span><br><span class="line">               size = tb.DesiredSize;</span><br><span class="line">               <span class="keyword">if</span> (legendWidth &lt; size.Width)</span><br><span class="line">                   legendWidth = size.Width;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">           //80是预留给线条示例的长度位置</span><br><span class="line">           legendWidth += 80;</span><br><span class="line">           legendCanvas.Width = legendWidth + 5;</span><br><span class="line">           //30是分配给每个图形示例的高度</span><br><span class="line">           double legendHeight=30*dc.DataList.Count;</span><br><span class="line"></span><br><span class="line">           double sx = 6;</span><br><span class="line">           double sy = 15;</span><br><span class="line">           double textheight = size.Height;</span><br><span class="line">           double lineLength = 34;</span><br><span class="line">           //创建图例的边框</span><br><span class="line">           Rectangle legendRect= new Rectangle();</span><br><span class="line">           legendRect.Stroke = new SolidColorBrush(Colors.Black);</span><br><span class="line">           legendRect.Width= legendWidth;</span><br><span class="line">           legendRect.Height= legendHeight;</span><br><span class="line">           <span class="keyword">if</span> (IsLegend &amp;&amp; IsBorder)</span><br><span class="line">               legendCanvas.Children.Add(legendRect);</span><br><span class="line">           n = 1;</span><br><span class="line">           //创建每个图形的线段</span><br><span class="line">           foreach (DataSeries ds <span class="keyword">in</span> dc.DataList)</span><br><span class="line">           &#123;</span><br><span class="line">               double xSymbol = sx + lineLength / 2;</span><br><span class="line">               double xText = 2 * sx + lineLength;</span><br><span class="line">               double yText = n * sy + (2 * n - 1) * textheight / 2;</span><br><span class="line">               Line line=new Line();</span><br><span class="line">               line.X1 = sx;</span><br><span class="line">               line.Y1=sy;</span><br><span class="line">               line.X2 = sx + lineLength;</span><br><span class="line">               line.Y2 = yText;</span><br><span class="line">               legendCanvas.Children.Add(line);</span><br><span class="line">               tb=new TextBlock();</span><br><span class="line">               tb.FontSize = 15;</span><br><span class="line">               tb.Text = ds.SeriesName;</span><br><span class="line">               legendCanvas.Children.Add(tb);</span><br><span class="line">               Canvas.SetTop(tb,yText-15);</span><br><span class="line">               Canvas.SetLeft(tb,xText+10);</span><br><span class="line">               n++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>13.34.实现线性报表<br>上面已经把图形表格,坐标轴,线性数据图形和图例的相关逻辑都封装好了,下面就要利用这些封装好的模板来创建一个线性报表,首先需要再Xaml页面上定义3个Canvas面板分别表示图例面板,坐标轴面板和线性图形面板,然后再利用上面封装的类来初始化这些面板生成线性报表.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br></pre></td><td class="code"><pre><span class="line">&lt;Page</span><br><span class="line">    x:Class=<span class="string">&quot;App1.BlankPage&quot;</span></span><br><span class="line">    xmlns=<span class="string">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></span><br><span class="line">    xmlns:x=<span class="string">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></span><br><span class="line">    xmlns:<span class="built_in">local</span>=<span class="string">&quot;using:App1&quot;</span></span><br><span class="line">    xmlns:d=<span class="string">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span></span><br><span class="line">    xmlns:mc=<span class="string">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span> xmlns:controls=<span class="string">&quot;using:App1.Controls&quot;</span> xmlns:models=<span class="string">&quot;using:App1.Models&quot;</span> xmlns:converters=<span class="string">&quot;using:App1.Converters&quot;</span></span><br><span class="line">   </span><br><span class="line">    mc:Ignorable=<span class="string">&quot;d&quot;</span></span><br><span class="line">    Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;Page.Resources&gt;</span><br><span class="line">        </span><br><span class="line">            &lt;DataTemplate x:Key=<span class="string">&quot;PersonNameDataTemplate&quot;</span>&gt;</span><br><span class="line">            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;,&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/StackPanel&gt;</span><br><span class="line">        &lt;/DataTemplate&gt;</span><br><span class="line">        &lt;Style x:Name=<span class="string">&quot;ItemsControlStyle&quot;</span> TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">            &lt;Setter Property=<span class="string">&quot;Template&quot;</span>&gt;</span><br><span class="line">                &lt;Setter.Value&gt;</span><br><span class="line">                    &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                        &lt;ScrollViewer BorderBrush=<span class="string">&quot;Red&quot;</span> BorderThickness=<span class="string">&quot;6&quot;</span>&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Background=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                                &lt;Border BorderBrush=<span class="string">&quot;Yellow&quot;</span> BorderThickness=<span class="string">&quot;3&quot;</span>&gt;</span><br><span class="line">                                    &lt;ItemsPresenter/&gt;</span><br><span class="line">                                &lt;/Border&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/ScrollViewer&gt;</span><br><span class="line">                    &lt;/ControlTemplate&gt;</span><br><span class="line">                &lt;/Setter.Value&gt;</span><br><span class="line">            &lt;/Setter&gt;</span><br><span class="line">        &lt;/Style&gt;</span><br><span class="line">        &lt;!--选中数据项的样式--&gt;</span><br><span class="line">        &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateSelectKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateSelectName&quot;</span>&gt;</span><br><span class="line">            &lt;Grid Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span> Background=<span class="string">&quot;Red&quot;</span>&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">            &lt;/Grid&gt;</span><br><span class="line">        &lt;/DataTemplate&gt;</span><br><span class="line">        &lt;!--默认数据项的样式,注意默认的数据项样式不能在C<span class="comment">#中再次调用--&gt;</span></span><br><span class="line">        &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateDefaultKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateDefaultName&quot;</span>&gt;</span><br><span class="line">            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span>&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;,&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/StackPanel&gt;</span><br><span class="line">        &lt;/DataTemplate&gt;</span><br><span class="line">        &lt;!--非选中数据项的样式--&gt;</span><br><span class="line">        &lt;DataTemplate x:Key=<span class="string">&quot;dataTemplateNoSelectKey&quot;</span> x:Name=<span class="string">&quot;dataTemplateNoSelectName&quot;</span>&gt;</span><br><span class="line">            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Tapped=<span class="string">&quot;StackPanel_Tapped&quot;</span>&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;,&quot;</span>/&gt;</span><br><span class="line">                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/StackPanel&gt;</span><br><span class="line">        &lt;/DataTemplate&gt;</span><br><span class="line"></span><br><span class="line">        &lt;models:Clock x:Key=<span class="string">&quot;clock&quot;</span>/&gt;</span><br><span class="line">        &lt;converters:HoursToDayStringConverter x:Key=<span class="string">&quot;booleanToDayString&quot;</span>/&gt;</span><br><span class="line">    &lt;/Page.Resources&gt;</span><br><span class="line">    &lt;Grid&gt;</span><br><span class="line">        &lt;Grid.RowDefinitions&gt;</span><br><span class="line">            &lt;RowDefinition Height=<span class="string">&quot;auto&quot;</span>/&gt;</span><br><span class="line">            &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">        &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">        &lt;Grid&gt;</span><br><span class="line">            &lt;Button x:Name=<span class="string">&quot;backButton&quot;</span> Margin=<span class="string">&quot;24,24,24,24&quot;</span> Click=<span class="string">&quot;backButton_Click&quot;</span> Style=<span class="string">&quot;&#123;StaticResource NavigationBackButtonNormalStyle&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;/Grid&gt;</span><br><span class="line">        &lt;Pivot Title=<span class="string">&quot;控件&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Border&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Border Background=<span class="string">&quot;Coral&quot;</span> Padding=<span class="string">&quot;10&quot;</span> CornerRadius=<span class="string">&quot;30,38,150,29&quot;</span> BorderThickness=<span class="string">&quot;8 15 10 2&quot;</span> BorderBrush=<span class="string">&quot;Azure&quot;</span>/&gt;</span><br><span class="line">                    &lt;Border BorderThickness=<span class="string">&quot;1,3,5,7&quot;</span> BorderBrush=<span class="string">&quot;Blue&quot;</span> CornerRadius=<span class="string">&quot;10&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;蓝色的Border&quot;</span> ToolTipService.ToolTip=<span class="string">&quot;这是蓝色的Border吗?&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> TextAlignment=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/Border&gt;</span><br><span class="line">                    &lt;!--单击后显示边框--&gt;</span><br><span class="line">                    &lt;Border x:Name=<span class="string">&quot;TextBorder&quot;</span> BorderThickness=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                        &lt;Border.BorderBrush&gt;</span><br><span class="line">                            &lt;SolidColorBrush Color=<span class="string">&quot;Red&quot;</span> Opacity=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Border.BorderBrush&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;请单击我一下!&quot;</span> PointerPressed=<span class="string">&quot;TextBlock_PointerPressed&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Border&gt;</span><br><span class="line">                    &lt;!--颜色渐变的边框--&gt;</span><br><span class="line">                    &lt;Border x:Name=<span class="string">&quot;brdTest&quot;</span> BorderThickness=<span class="string">&quot;4&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;150&quot;</span>&gt;</span><br><span class="line">                        &lt;Border.BorderBrush&gt;</span><br><span class="line">                            &lt;LinearGradientBrush x:Name=<span class="string">&quot;borderLinearGradientBrush&quot;</span> MappingMode=<span class="string">&quot;RelativeToBoundingBox&quot;</span> StartPoint=<span class="string">&quot;0.5,0&quot;</span> EndPoint=<span class="string">&quot;0.5,1&quot;</span>&gt;</span><br><span class="line">                                &lt;LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                    &lt;GradientStop Color=<span class="string">&quot;Yellow&quot;</span> Offset=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                                    &lt;GradientStop Color=<span class="string">&quot;Blue&quot;</span> Offset=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                                &lt;/LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                            &lt;/LinearGradientBrush&gt;</span><br><span class="line">                        &lt;/Border.BorderBrush&gt;</span><br><span class="line">                    &lt;/Border&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;HyperlinkButton&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;HyperlinkButton Width=<span class="string">&quot;200&quot;</span> Content=<span class="string">&quot;链接按钮&quot;</span> Background=<span class="string">&quot;Blue&quot;</span> Foreground=<span class="string">&quot;Orange&quot;</span> FontWeight=<span class="string">&quot;Bold&quot;</span> Margin=<span class="string">&quot;0,0,0,30&quot;</span>/&gt;</span><br><span class="line">                    &lt;HyperlinkButton Content=<span class="string">&quot;Google&quot;</span> NavigateUri=<span class="string">&quot;http://goole.com&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                &lt;ScrollViewer&gt;</span><br><span class="line">                    &lt;StackPanel Orientation=<span class="string">&quot;Vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;你好&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> HorizontalAlignment=<span class="string">&quot;Left&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                        &lt;StackPanel x:Name=<span class="string">&quot;sp_Show&quot;</span>&gt;</span><br><span class="line">                            &lt;Button x:Name=<span class="string">&quot;bt_addXaml&quot;</span> Content=<span class="string">&quot;加载Xaml按钮&quot;</span> Click=<span class="string">&quot;bt_addXaml_Click&quot;</span>/&gt;</span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;StackPanel x:Name=<span class="string">&quot;stackPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                            &lt;TextBox&gt;</span><br><span class="line">                            &lt;/TextBox&gt;</span><br><span class="line">                            &lt;Button Content=<span class="string">&quot;遍历&quot;</span> Click=<span class="string">&quot;Button_Click1&quot;</span>&gt;</span><br><span class="line">                            &lt;/Button&gt;</span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;Button HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> Content=<span class="string">&quot;Hello,App&quot;</span> Click=<span class="string">&quot;Button_Click&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> Height=<span class="string">&quot;80&quot;</span> Name=<span class="string">&quot;button1&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;300&quot;</span> Click=<span class="string">&quot;button1_Click&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮2&quot;</span> FontSize=<span class="string">&quot;48&quot;</span> FontStyle=<span class="string">&quot;Italic&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> Background=<span class="string">&quot;Blue&quot;</span> BorderThickness=<span class="string">&quot;10&quot;</span> BorderBrush=<span class="string">&quot;Yellow&quot;</span> Padding=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;Button Width=<span class="string">&quot;165&quot;</span>&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;Assets/StoreLogo.png&quot;</span> Stretch=<span class="string">&quot;None&quot;</span> Height=<span class="string">&quot;61&quot;</span> Width=<span class="string">&quot;94&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/Button&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;Button&gt;</span><br><span class="line">                            &lt;SymbolIcon Symbol=<span class="string">&quot;Emoji2&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Button&gt;</span><br><span class="line">                        &lt;StackPanel&gt;</span><br><span class="line">                            &lt;TextBox InputScope=<span class="string">&quot;TelephoneNumber&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBox.Header&gt;</span><br><span class="line">                                    请输入电话号码:</span><br><span class="line">                                &lt;/TextBox.Header&gt;</span><br><span class="line">                            &lt;/TextBox&gt;</span><br><span class="line">                            &lt;TextBox x:Name=<span class="string">&quot;TextBox1&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span> AcceptsReturn=<span class="string">&quot;True&quot;</span> Header=<span class="string">&quot;输入信息:&quot;</span> SelectionHighlightColor=<span class="string">&quot;Red&quot;</span> TextChanged=<span class="string">&quot;TextBox1_TextChanged&quot;</span> SelectionChanged=<span class="string">&quot;TextBox1_SelectionChanged&quot;</span> Paste=<span class="string">&quot;TextBox1_Paste&quot;</span>/&gt;</span><br><span class="line">                            &lt;TextBlock x:Name=<span class="string">&quot;textblock2&quot;</span> Text=<span class="string">&quot;操作信息:&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                            &lt;TextBlock x:Name=<span class="string">&quot;textBlock1&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/ScrollViewer&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ScrollViewer&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Orientation=<span class="string">&quot;Vertical&quot;</span>&gt;</span><br><span class="line">                    &lt;ScrollViewer Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span> VerticalScrollBarVisibility=<span class="string">&quot;Visible&quot;</span> HorizontalScrollBarVisibility=<span class="string">&quot;Visible&quot;</span>&gt;</span><br><span class="line">                    &lt;ScrollViewer.Content&gt;</span><br><span class="line">                        &lt;StackPanel&gt;</span><br><span class="line">                            &lt;Image Source=<span class="string">&quot;ms-appx:///Assets/StoreLogo.png&quot;</span>/&gt;</span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;/ScrollViewer.Content&gt;</span><br><span class="line">                &lt;/ScrollViewer&gt;</span><br><span class="line">               </span><br><span class="line">                    &lt;ScrollViewer Name=<span class="string">&quot;scrollViewer1&quot;</span> VerticalScrollBarVisibility=<span class="string">&quot;Hidden&quot;</span> Height=<span class="string">&quot;300&quot;</span>&gt;</span><br><span class="line">                        &lt;StackPanel Name=<span class="string">&quot;stkpnImage&quot;</span>/&gt;</span><br><span class="line">                    &lt;/ScrollViewer&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;往上&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Click=<span class="string">&quot;btnUp_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;往下&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Click=<span class="string">&quot;btnDown_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;停止&quot;</span> FontSize=<span class="string">&quot;30&quot;</span></span><br><span class="line">                            Click=<span class="string">&quot;stop_Click&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ProgressBar&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;选择ProgressBar的类型:&quot;</span>/&gt;</span><br><span class="line">                    &lt;RadioButton Content=<span class="string">&quot;Determinate类型&quot;</span> Height=<span class="string">&quot;71&quot;</span> Name=<span class="string">&quot;radioButton1&quot;</span> GroupName=<span class="string">&quot;Type&quot;</span>/&gt;</span><br><span class="line">                    &lt;RadioButton Content=<span class="string">&quot;Indeterminate类型&quot;</span> Height=<span class="string">&quot;71&quot;</span> Name=<span class="string">&quot;radioButton2&quot;</span> GroupName=<span class="string">&quot;Type&quot;</span> IsChecked=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;启动ProgressBar&quot;</span> Height=<span class="string">&quot;72&quot;</span> x:Name=<span class="string">&quot;begin&quot;</span> Click=<span class="string">&quot;begin_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;取消ProgressBar&quot;</span> Height=<span class="string">&quot;72&quot;</span> x:Name=<span class="string">&quot;cancel&quot;</span> Click=<span class="string">&quot;cancel_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;ProgressBar x:Name=<span class="string">&quot;progressBar1&quot;</span> IsIndeterminate=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line"></span><br><span class="line">                </span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Slider&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid Name=<span class="string">&quot;controlGrid&quot;</span>&gt;</span><br><span class="line">                        &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                            &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                            &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                            &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;Grid.ColumnDefinitions&gt;</span><br><span class="line">                            &lt;ColumnDefinition Width=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                            &lt;ColumnDefinition Width=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                            &lt;ColumnDefinition Width=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Grid.ColumnDefinitions&gt;</span><br><span class="line">                        &lt;!--设置红色--&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;红色&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;redSlider&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;255&quot;</span></span><br><span class="line">                        ValueChanged=<span class="string">&quot;redSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;redText&quot;</span> Grid.Row=<span class="string">&quot;2&quot;</span> Text=<span class="string">&quot;0&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--设置绿色--&gt;</span><br><span class="line">                        &lt;TextBlock Grid.Column=<span class="string">&quot;1&quot;</span> Text=<span class="string">&quot;绿色&quot;</span> Foreground=<span class="string">&quot;Green&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;greenSlider&quot;</span> Foreground=<span class="string">&quot;Green&quot;</span> FontSize=<span class="string">&quot;20&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;255&quot;</span> ValueChanged=<span class="string">&quot;redSlider_ValueChanged&quot;</span> Grid.Column=<span class="string">&quot;1&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span>&gt;&lt;/Slider&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;greenText&quot;</span> Grid.Column=<span class="string">&quot;1&quot;</span> Grid.Row=<span class="string">&quot;2&quot;</span> Foreground=<span class="string">&quot;Green&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--设置蓝色--&gt;</span><br><span class="line">                        &lt;TextBlock Grid.Column=<span class="string">&quot;2&quot;</span> Grid.Row=<span class="string">&quot;0&quot;</span> Text=<span class="string">&quot;蓝色&quot;</span> Foreground=<span class="string">&quot;Blue&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;blueSlider&quot;</span> Grid.Column=<span class="string">&quot;2&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span> Foreground=<span class="string">&quot;Blue&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;255&quot;</span> ValueChanged=<span class="string">&quot;redSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;blueText&quot;</span> Grid.Column=<span class="string">&quot;2&quot;</span> Grid.Row=<span class="string">&quot;2&quot;</span> Text=<span class="string">&quot;0&quot;</span> Foreground=<span class="string">&quot;Blue&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;!--设置--&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                    &lt;Ellipse Height=<span class="string">&quot;100&quot;</span> x:Name=<span class="string">&quot;ellipse2&quot;</span> Stroke=<span class="string">&quot;Black&quot;</span> StrokeThickness=<span class="string">&quot;1&quot;</span> Width=<span class="string">&quot;224&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;textBlockColor&quot;</span> Text=<span class="string">&quot;颜色&quot;</span> FontSize=<span class="string">&quot;26&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;TimePicker DatePicker&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Grid.Row=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">                    &lt;TimePicker x:Name=<span class="string">&quot;time&quot;</span> Header=<span class="string">&quot;请选择时间:&quot;</span> TimeChanged=<span class="string">&quot;time_TimeChanged&quot;</span>/&gt;</span><br><span class="line">                    &lt;DatePicker x:Name=<span class="string">&quot;date&quot;</span> Header=<span class="string">&quot;请选择日期:&quot;</span></span><br><span class="line">                        DateChanged=<span class="string">&quot;date_DateChanged&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;infoTime&quot;</span> FontSize=<span class="string">&quot;20&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Hub&quot;</span>&gt;</span><br><span class="line">                &lt;!--在大标题上添加程序的图标--&gt;            </span><br><span class="line">                    &lt;Hub&gt;</span><br><span class="line">                        &lt;Hub.Header&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;Assets/StoreLogo.scale-100.png&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;My App&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/Hub.Header&gt;</span><br><span class="line">                        &lt;HubSection Header=<span class="string">&quot;first item&quot;</span>&gt;</span><br><span class="line">                            &lt;HubSection.ContentTemplate&gt;</span><br><span class="line">                                &lt;DataTemplate&gt;</span><br><span class="line">                                    &lt;StackPanel&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;第一个Item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;这是第一个item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/StackPanel&gt;</span><br><span class="line">                                &lt;/DataTemplate&gt;</span><br><span class="line">                            &lt;/HubSection.ContentTemplate&gt;</span><br><span class="line">                        &lt;/HubSection&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;HubSection Header=<span class="string">&quot;second item&quot;</span>&gt;</span><br><span class="line">                            &lt;HubSection.ContentTemplate&gt;</span><br><span class="line">                                &lt;DataTemplate&gt;</span><br><span class="line">                                    &lt;StackPanel&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;第二个Item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;这是第二个item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/StackPanel&gt;</span><br><span class="line">                                &lt;/DataTemplate&gt;</span><br><span class="line">                            &lt;/HubSection.ContentTemplate&gt;</span><br><span class="line">                        &lt;/HubSection&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;HubSection Header=<span class="string">&quot;Third item&quot;</span>&gt;</span><br><span class="line">                            &lt;HubSection.ContentTemplate&gt;</span><br><span class="line">                                &lt;DataTemplate&gt;</span><br><span class="line">                                    &lt;StackPanel&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;第三个Item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;这是第三个item&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/StackPanel&gt;</span><br><span class="line">                                &lt;/DataTemplate&gt;</span><br><span class="line">                            &lt;/HubSection.ContentTemplate&gt;</span><br><span class="line">                        &lt;/HubSection&gt;</span><br><span class="line">                    &lt;/Hub&gt;</span><br><span class="line">                </span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Flyout&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Show Flyout&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;Flyout&gt;</span><br><span class="line">                                &lt;StackPanel&gt;</span><br><span class="line">                                    &lt;TextBox PlaceholderText=<span class="string">&quot;Please Enter Name.&quot;</span>/&gt;</span><br><span class="line">                                    &lt;Button HorizontalAlignment=<span class="string">&quot;Right&quot;</span> Content=<span class="string">&quot;确定&quot;</span>/&gt;</span><br><span class="line">                                &lt;/StackPanel&gt;</span><br><span class="line">                            &lt;/Flyout&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">                    &lt;!--浮出上下文菜单,点击菜单后改变当前按钮上的文本内容--&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;menuFlyoutButton&quot;</span> Content=<span class="string">&quot;Show MenuFlyout&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;MenuFlyout&gt;</span><br><span class="line">                                &lt;MenuFlyoutItem Text=<span class="string">&quot;Option 1&quot;</span> Click=<span class="string">&quot;MenuFlyoutItem_Click&quot;</span>/&gt;</span><br><span class="line">                                &lt;MenuFlyoutItem Text=<span class="string">&quot;Option 2&quot;</span></span><br><span class="line">                                                Click=<span class="string">&quot;MenuFlyoutItem_Click&quot;</span>/&gt;</span><br><span class="line">                                &lt;MenuFlyoutItem Text=<span class="string">&quot;Option 3&quot;</span> Click=<span class="string">&quot;MenuFlyoutItem_Click&quot;</span>/&gt;</span><br><span class="line">                            &lt;/MenuFlyout&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">                    </span><br><span class="line">                    &lt;!--浮出选择日期弹窗,点击确认后触发DatePicked事件,然后可以获取选中的日期--&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Show DatePicker&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;DatePickerFlyout DatePicked=<span class="string">&quot;DatePickerFlyout_DatePicked&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">                    &lt;!--浮出选择时间弹窗,点击确认后触发DatePicked事件,然后可以获取选中的时间--&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Show TimePicker&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;TimePickerFlyout TimePicked=<span class="string">&quot;TimePickerFlyout_TimePicked&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">                    &lt;!--浮出选择弹窗,显示底下的确认取消菜单栏并且处理其确认事件Confirmed--&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Show Picker&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;PickerFlyout Confirmed=<span class="string">&quot;PickerFlyout_Confirmed&quot;</span></span><br><span class="line">                                          ConfirmationButtonsVisible=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;你确定吗？？？？？&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;0 100 0 0&quot;</span>/&gt;</span><br><span class="line">                            &lt;/PickerFlyout&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">&lt;!--浮出选择列表弹窗,绑定集合的数据,处理选中的事件ItemsPicked--&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Show DataPicker&quot;</span>&gt;</span><br><span class="line">                        &lt;Button.Flyout&gt;</span><br><span class="line">                            &lt;ListPickerFlyout x:Name=<span class="string">&quot;listPickerFlyout&quot;</span> Title=<span class="string">&quot;Select Mobile Tag：&quot;</span> ItemsPicked=<span class="string">&quot;listPickerFlyout_ItemsPicked&quot;</span>&gt;</span><br><span class="line">                                &lt;ListPickerFlyout.ItemTemplate&gt;</span><br><span class="line">                                    &lt;DataTemplate&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;&#123;Binding&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                        </span><br><span class="line">                                    &lt;/DataTemplate&gt;</span><br><span class="line">                                &lt;/ListPickerFlyout.ItemTemplate&gt;</span><br><span class="line">                            &lt;/ListPickerFlyout&gt;</span><br><span class="line">                        &lt;/Button.Flyout&gt;</span><br><span class="line">                    &lt;/Button&gt;</span><br><span class="line">                    &lt;!--使用附加属性FlyoutBase.AttachedFlyout来实现Flyout控件--&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;Please Click Me!&quot;</span> Tapped=<span class="string">&quot;TextBlock_Tapped&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>&gt;</span><br><span class="line">                        &lt;FlyoutBase.AttachedFlyout&gt;</span><br><span class="line">                            &lt;Flyout&gt;</span><br><span class="line">                                &lt;TextBox Text=<span class="string">&quot;你好!&quot;</span>&gt;</span><br><span class="line">                                    </span><br><span class="line">                                    &lt;/TextBox&gt;</span><br><span class="line">                                &lt;/Flyout&gt;</span><br><span class="line">                            &lt;/FlyoutBase.AttachedFlyout&gt;</span><br><span class="line">                    &lt;/TextBlock&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ComboBox&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;!--纯文本的下拉框--&gt;</span><br><span class="line">                    &lt;ComboBox Header=<span class="string">&quot;Colors&quot;</span> PlaceholderText=<span class="string">&quot;Pick a Color&quot;</span>&gt;</span><br><span class="line">                        &lt;x:String&gt;</span><br><span class="line">                            Blue</span><br><span class="line">                        &lt;/x:String&gt;</span><br><span class="line">                        &lt;x:String&gt;</span><br><span class="line">                            Green</span><br><span class="line">                        &lt;/x:String&gt;</span><br><span class="line">                        &lt;x:String&gt;</span><br><span class="line">                            Red</span><br><span class="line">                        &lt;/x:String&gt;</span><br><span class="line">                        &lt;x:String&gt;</span><br><span class="line">                            Yellow</span><br><span class="line">                        &lt;/x:String&gt;</span><br><span class="line">                    &lt;/ComboBox&gt;</span><br><span class="line">                    &lt;!--数据绑定的下拉框--&gt;</span><br><span class="line">                    &lt;ComboBox x:Name=<span class="string">&quot;comboBox2&quot;</span> DropDownClosed=<span class="string">&quot;comboBox2_DropDownClosed&quot;</span>&gt;</span><br><span class="line">                        &lt;ComboBox.ItemTemplate&gt;</span><br><span class="line">                            &lt;DataTemplate&gt;</span><br><span class="line">                                &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Age&#125;&quot;</span> Margin=<span class="string">&quot;50 10 0 0&quot;</span>/&gt;</span><br><span class="line">                                &lt;/StackPanel&gt;</span><br><span class="line">                            &lt;/DataTemplate&gt;</span><br><span class="line">                        &lt;/ComboBox.ItemTemplate&gt;</span><br><span class="line">                    &lt;/ComboBox&gt;</span><br><span class="line">                    </span><br><span class="line">                   &lt;!--数据绑定的下拉框关闭后,这里显示选中的选项的信息--&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;Info&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SplitView&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;ToggleButton Click=<span class="string">&quot;ToggleButton_Click&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Foreground=<span class="string">&quot;Green&quot;</span>&gt;</span><br><span class="line">                        &lt;ToggleButton.Content&gt;</span><br><span class="line">                            &lt;Border Background=<span class="string">&quot;Transparent&quot;</span> Width=<span class="string">&quot;40&quot;</span> Height=<span class="string">&quot;40&quot;</span>&gt;</span><br><span class="line">                                &lt;FontIcon x:Name=<span class="string">&quot;hamburger&quot;</span> FontFamily=<span class="string">&quot;Segoe MDL2 Assets&quot;</span> Glyph=<span class="string">&quot;&amp;#xE700;&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/Border&gt;</span><br><span class="line">                        &lt;/ToggleButton.Content&gt;</span><br><span class="line">                    &lt;/ToggleButton&gt;</span><br><span class="line">                    &lt;SplitView x:Name=<span class="string">&quot;Splitter&quot;</span> IsPaneOpen=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">                        &lt;SplitView.Pane&gt;</span><br><span class="line">                            &lt;StackPanel VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                                &lt;Button Content=<span class="string">&quot;菜单1&quot;</span> Click=<span class="string">&quot;Button_Click_1&quot;</span>/&gt;</span><br><span class="line">                                &lt;Button Content=<span class="string">&quot;菜单2&quot;</span> Click=<span class="string">&quot;Button_Click_1&quot;</span>/&gt;</span><br><span class="line">                                &lt;Button Content=<span class="string">&quot;菜单3&quot;</span></span><br><span class="line">                                        Click=<span class="string">&quot;Button_Click_1&quot;</span>/&gt;</span><br><span class="line">                                &lt;Button Content=<span class="string">&quot;菜单4&quot;</span> Click=<span class="string">&quot;Button_Click_1&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/SplitView.Pane&gt;</span><br><span class="line">                        &lt;Grid&gt;</span><br><span class="line">                            &lt;TextBlock x:Name=<span class="string">&quot;tb&quot;</span> Text=<span class="string">&quot;&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Grid&gt;</span><br><span class="line">                    &lt;/SplitView&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ScrollableTextBlock&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;ContentPanel&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;controls:ScrollableTextBlock x:Name=<span class="string">&quot;scrollableTextBlock1&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Canvas&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Canvas&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮2&quot;</span> Canvas.Left=<span class="string">&quot;30&quot;</span> Canvas.Top=<span class="string">&quot;30&quot;</span> Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> Canvas.Left=<span class="string">&quot;30&quot;</span> Canvas.Top=<span class="string">&quot;30&quot;</span> Background=<span class="string">&quot;Blue&quot;</span> Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span> Background=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;200&quot;</span></span><br><span class="line">                                Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮3&quot;</span> Canvas.Left=<span class="string">&quot;170&quot;</span></span><br><span class="line">                                Canvas.Top=<span class="string">&quot;170&quot;</span> Background=<span class="string">&quot;Yellow&quot;</span></span><br><span class="line">                                Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Background=<span class="string">&quot;LimeGreen&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> Canvas.Left=<span class="string">&quot;30&quot;</span> Canvas.Top=<span class="string">&quot;30&quot;</span> Background=<span class="string">&quot;Blue&quot;</span> Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Background=<span class="string">&quot;White&quot;</span>&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Canvas.Left=<span class="string">&quot;30&quot;</span></span><br><span class="line">                                Canvas.Top=<span class="string">&quot;30&quot;</span> Background=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Canvas.Left=<span class="string">&quot;130&quot;</span> Canvas.Top=<span class="string">&quot;30&quot;</span> Background=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;渐变矩形&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas Background=<span class="string">&quot;White&quot;</span>&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;400&quot;</span> Width=<span class="string">&quot;400&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.1&quot;</span>/&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;360&quot;</span> Width=<span class="string">&quot;360&quot;</span> Canvas.Left=<span class="string">&quot;20&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;70&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.2&quot;</span>/&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;320&quot;</span> Width=<span class="string">&quot;320&quot;</span> Canvas.Left=<span class="string">&quot;40&quot;</span> Canvas.Top=<span class="string">&quot;90&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.3&quot;</span>/&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;280&quot;</span> Width=<span class="string">&quot;280&quot;</span> Canvas.Left=<span class="string">&quot;60&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;110&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.4&quot;</span>/&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;240&quot;</span> Width=<span class="string">&quot;240&quot;</span> Canvas.Left=<span class="string">&quot;80&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;130&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;150&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Opacity=<span class="string">&quot;0.6&quot;</span>/&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;160&quot;</span> Width=<span class="string">&quot;160&quot;</span> Canvas.Left=<span class="string">&quot;120&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;170&quot;</span> Background=<span class="string">&quot;Black&quot;</span> Opacity=<span class="string">&quot;0.3&quot;</span>/&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;120&quot;</span> Width=<span class="string">&quot;120&quot;</span> Canvas.Left=<span class="string">&quot;140&quot;</span> Canvas.Top=<span class="string">&quot;190&quot;</span> Background=<span class="string">&quot;Black&quot;</span> Opacity=<span class="string">&quot;0.4&quot;</span>/&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;80&quot;</span> Width=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;160&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;210&quot;</span> Background=<span class="string">&quot;Black&quot;</span> Opacity=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line">                        &lt;Canvas Height=<span class="string">&quot;40&quot;</span> Width=<span class="string">&quot;40&quot;</span> Canvas.Left=<span class="string">&quot;180&quot;</span></span><br><span class="line">                            Canvas.Top=<span class="string">&quot;230&quot;</span> Background=<span class="string">&quot;Black&quot;</span> Opacity=<span class="string">&quot;0.6&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;RelativePanel&quot;</span>&gt;</span><br><span class="line">                &lt;RelativePanel VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt1&quot;</span> Content=<span class="string">&quot;按钮1&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt2&quot;</span> Content=<span class="string">&quot;按钮2&quot;</span> RelativePanel.RightOf=<span class="string">&quot;bt1&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt3&quot;</span> Content=<span class="string">&quot;按钮3... ...&quot;</span></span><br><span class="line">                            RelativePanel.AlignLeftWith=<span class="string">&quot;bt2&quot;</span></span><br><span class="line">                            RelativePanel.AlignBottomWithPanel=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/RelativePanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Grid&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;3*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;Ellipse Grid.Row=<span class="string">&quot;1&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span> VerticalAlignment=<span class="string">&quot;Stretch&quot;</span> MaxWidth=<span class="string">&quot;500&quot;</span> MaxHeight=<span class="string">&quot;500&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Grid.Row=<span class="string">&quot;3&quot;</span> Content=<span class="string">&quot;按钮1&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span> Margin=<span class="string">&quot;0 0 0 2&quot;</span></span><br><span class="line">                            MaxHeight=<span class="string">&quot;500&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Grid.Row=<span class="string">&quot;4&quot;</span> Content=<span class="string">&quot;按钮2&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span> MaxWidth=<span class="string">&quot;500&quot;</span>/&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;AdaptiveTrigger&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                        &lt;VisualStateGroup&gt;</span><br><span class="line">                            &lt;VisualState  x:Name=<span class="string">&quot;SideBySideState&quot;</span>&gt;</span><br><span class="line">                                &lt;VisualState.StateTriggers&gt;</span><br><span class="line">                                    &lt;AdaptiveTrigger MinWindowWidth=<span class="string">&quot;600&quot;</span>/&gt;</span><br><span class="line">                                &lt;/VisualState.StateTriggers&gt;</span><br><span class="line">                                &lt;VisualState.Setters&gt;</span><br><span class="line">                                    &lt;Setter Target=<span class="string">&quot;theStackPanel.Orientation&quot;</span> Value=<span class="string">&quot;Horizontal&quot;</span>/&gt;</span><br><span class="line">                                &lt;/VisualState.Setters&gt;</span><br><span class="line">                            &lt;/VisualState&gt;</span><br><span class="line">                        &lt;/VisualStateGroup&gt;</span><br><span class="line">                    &lt;/VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                    &lt;StackPanel x:Name=<span class="string">&quot;theStackPanel&quot;</span> Orientation=<span class="string">&quot;Vertical&quot;</span> HorizontalAlignment=<span class="string">&quot;Left&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> MinWidth=<span class="string">&quot;150&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮2&quot;</span> MinWidth=<span class="string">&quot;150&quot;</span></span><br><span class="line">                                Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;按钮3&quot;</span> MinWidth=<span class="string">&quot;150&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;MeasureArrange&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;改变高度&quot;</span> Click=<span class="string">&quot;Button_Click_2&quot;</span>/&gt;</span><br><span class="line">                    &lt;controls:TestPanel x:Name=<span class="string">&quot;element1&quot;</span> Width=<span class="string">&quot;60&quot;</span> Height=<span class="string">&quot;60&quot;</span> Background=<span class="string">&quot;Red&quot;</span> Margin=<span class="string">&quot;10&quot;</span>/&gt;</span><br><span class="line">                    &lt;controls:TestUIElement x:Name=<span class="string">&quot;element2&quot;</span> Width=<span class="string">&quot;60&quot;</span> Height=<span class="string">&quot;60&quot;</span> Background=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;CustomPanel&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;ContentPanel1&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;Slider Grid.Row=<span class="string">&quot;0&quot;</span> Value=<span class="string">&quot;5&quot;</span> ValueChanged=<span class="string">&quot;Slider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                    &lt;controls:CirclePanel x:Name=<span class="string">&quot;circlePanel&quot;</span> Radius=<span class="string">&quot;50&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock&gt;Start here&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 2&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 3&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 4&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 5&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 6&lt;/TextBlock&gt;</span><br><span class="line">                        &lt;TextBlock&gt;TextBlock 7&lt;/TextBlock&gt;</span><br><span class="line">                    &lt;/controls:CirclePanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ApplicationDataContainerSettings&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;!--输入应用设置的键--&gt;</span><br><span class="line">                    &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;textBlock2&quot;</span> Text=<span class="string">&quot;Key:&quot;</span> Width=<span class="string">&quot;150&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBox x:Name=<span class="string">&quot;txtKey&quot;</span> Text=<span class="string">&quot;&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;!--输入应用设置的值--&gt;</span><br><span class="line">                    &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Margin=<span class="string">&quot;0 20 0 0&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;Value:&quot;</span> Width=<span class="string">&quot;150&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBox x:Name=<span class="string">&quot;txtValue&quot;</span> Text=<span class="string">&quot;&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;保存&quot;</span> x:Name=<span class="string">&quot;btnSave&quot;</span> Click=<span class="string">&quot;btnSave_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;删除&quot;</span> x:Name=<span class="string">&quot;btnDelete&quot;</span></span><br><span class="line">                            Click=<span class="string">&quot;btnDelete_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;清空所有&quot;</span> x:Name=<span class="string">&quot;deleteall&quot;</span></span><br><span class="line">                            Click=<span class="string">&quot;deleteall_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--显示容器内所有的键的列表,点击选中可以在上面的输入框里面查看和修改它对应的值--&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;Keys列表:&quot;</span>/&gt;</span><br><span class="line">                    &lt;ListBox Height=<span class="string">&quot;168&quot;</span> x:Name=<span class="string">&quot;lstKeys&quot;</span> SelectionChanged=<span class="string">&quot;lstKeys_SelectionChanged&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">              </span><br><span class="line">                </span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ApplicationDataContainer&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;创建Container&quot;</span> Click=<span class="string">&quot;CreateContainer_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;添加信息&quot;</span> Click=<span class="string">&quot;WriteSetting_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;删除信息&quot;</span> Click=<span class="string">&quot;DeleteSetting_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;删除Container&quot;</span> Click=<span class="string">&quot;DeleteContainer_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;OutputTextBlock&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ApplicationDataCompositeValue&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;创建&quot;</span> Click=<span class="string">&quot;WriteCompositeSetting_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;删除&quot;</span> Click=<span class="string">&quot;DeleteCompositeSetting_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;OutputTextBlock1&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;StorageFolderFile&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;TextBox Header=<span class="string">&quot;文件信息:&quot;</span> x:Name=<span class="string">&quot;infoStorage&quot;</span></span><br><span class="line">                             TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_save&quot;</span> Content=<span class="string">&quot;保存&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_save_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_read&quot;</span> Content=<span class="string">&quot;读取保存的文件&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_read_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_delete&quot;</span> Content=<span class="string">&quot;删除文件&quot;</span></span><br><span class="line">                            Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_delete_Click&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;StreamBuffer&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_crreate&quot;</span> Content=<span class="string">&quot;创建一个测试文件&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_crreate_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_writebuffer&quot;</span> Content=<span class="string">&quot;写入buffer&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_writebuffer_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_readbuffer&quot;</span> Content=<span class="string">&quot;读取buffer&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_readbuffer_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_writestream&quot;</span> Content=<span class="string">&quot;写入stream&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_writestream_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_readstream&quot;</span> Content=<span class="string">&quot;读取stream&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_readstream_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;StreambufferTextBlock&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;GetFolderByUri&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;TextBox Header=<span class="string">&quot;文件信息:&quot;</span> x:Name=<span class="string">&quot;UriInfo&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_saveuri&quot;</span> Content=<span class="string">&quot;创建文件&quot;</span> Click=<span class="string">&quot;bt_save_Click_1&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;bt_readuri&quot;</span> Content=<span class="string">&quot;通过URI读取文件&quot;</span> Margin=<span class="string">&quot;2&quot;</span> Click=<span class="string">&quot;bt_read_Click_1&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;JsonObject&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;Write your message&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBox x:Name=<span class="string">&quot;userName&quot;</span> Header=<span class="string">&quot;Name:&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBox x:Name=<span class="string">&quot;userAge&quot;</span> Header=<span class="string">&quot;Age:&quot;</span> InputScope=<span class="string">&quot;Number&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;Your study school:&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                    &lt;CheckBox Content=<span class="string">&quot;Haerbing School&quot;</span> x:Name=<span class="string">&quot;school1&quot;</span>/&gt;</span><br><span class="line">                    &lt;CheckBox Content=<span class="string">&quot;LanXiang School&quot;</span> x:Name=<span class="string">&quot;school2&quot;</span>/&gt;</span><br><span class="line">                    &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;保存&quot;</span> x:Name=<span class="string">&quot;save&quot;</span> Click=<span class="string">&quot;save_Click&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;获取保存的信息&quot;</span> x:Name=<span class="string">&quot;get&quot;</span> Click=<span class="string">&quot;get_Click&quot;</span>/&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;TextBlock x:Name=<span class="string">&quot;JsonObjectInfo&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line"></span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Xml&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;ContentPanelShop&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--展示购物清单的列表--&gt;</span><br><span class="line">                        &lt;ListBox FontSize=<span class="string">&quot;48&quot;</span> x:Name=<span class="string">&quot;Files&quot;</span>&gt;</span><br><span class="line">                        &lt;/ListBox&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ApplicationModelPackage&quot;</span>&gt;</span><br><span class="line">                &lt;ScrollViewer&gt;</span><br><span class="line">                    &lt;StackPanel&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;获取安装包的根目录&quot;</span> x:Name=<span class="string">&quot;btnGetFile&quot;</span> Click=<span class="string">&quot;btnGetFile_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;文件夹列表:&quot;</span>/&gt;</span><br><span class="line">                        &lt;ListBox x:Name=<span class="string">&quot;lbFolder&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;打开选中的文件夹&quot;</span> x:Name=<span class="string">&quot;open&quot;</span> Click=<span class="string">&quot;open_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;文件列表:&quot;</span>/&gt;</span><br><span class="line">                        &lt;ListBox x:Name=<span class="string">&quot;lbFile&quot;</span>&gt;</span><br><span class="line">                        &lt;/ListBox&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;在选中文件夹下创建测试文件&quot;</span> x:Name=<span class="string">&quot;create&quot;</span> Click=<span class="string">&quot;create_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;删除选中的文件&quot;</span> x:Name=<span class="string">&quot;delete&quot;</span> Click=<span class="string">&quot;delete_Click&quot;</span> Margin=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/ScrollViewer&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;AppUri&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;安装包的图片展示:&quot;</span>/&gt;</span><br><span class="line">                    &lt;Image x:Name=<span class="string">&quot;packageImage&quot;</span> Height=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;应用存储的图片展示:&quot;</span>/&gt;</span><br><span class="line">                    &lt;Image x:Name=<span class="string">&quot;appImage&quot;</span> Height=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Line&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas x:Name=<span class="string">&quot;ContentPanelCanvas&quot;</span> Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                </span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Geometry&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;!--直线--&gt;</span><br><span class="line">                    &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">                        &lt;Path.Data&gt;</span><br><span class="line">                            &lt;LineGeometry StartPoint=<span class="string">&quot;0,0&quot;</span> EndPoint=<span class="string">&quot;400,20&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Path.Data&gt;</span><br><span class="line">                    &lt;/Path&gt;</span><br><span class="line">                    &lt;!--矩形路径--&gt;</span><br><span class="line">                    &lt;Path Fill=<span class="string">&quot;Red&quot;</span>&gt;</span><br><span class="line">                        &lt;Path.Data&gt;</span><br><span class="line">                            &lt;RectangleGeometry Rect=<span class="string">&quot;20,20,400,50&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Path.Data&gt;</span><br><span class="line">                    &lt;/Path&gt;</span><br><span class="line">                    &lt;!--椭圆路径--&gt;</span><br><span class="line">                    &lt;Path Fill=<span class="string">&quot;Red&quot;</span>&gt;</span><br><span class="line">                        &lt;Path.Data&gt;</span><br><span class="line">                            &lt;!--&lt;GeometryGroup组合&gt;--&gt;</span><br><span class="line">                            &lt;GeometryGroup FillRule=<span class="string">&quot;EvenOdd&quot;</span>&gt;</span><br><span class="line">                                &lt;RectangleGeometry Rect=<span class="string">&quot;80,50,200,100&quot;</span>/&gt;</span><br><span class="line">                                &lt;EllipseGeometry Center=<span class="string">&quot;300,100&quot;</span> RadiusX=<span class="string">&quot;80&quot;</span> RadiusY=<span class="string">&quot;60&quot;</span>&gt;</span><br><span class="line">                                    </span><br><span class="line">                                &lt;/EllipseGeometry&gt;</span><br><span class="line">                            &lt;/GeometryGroup&gt;</span><br><span class="line">                        &lt;/Path.Data&gt;</span><br><span class="line">                    &lt;/Path&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;Path Fill=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;3&quot;</span>&gt;</span><br><span class="line">                        &lt;Path.Data&gt;</span><br><span class="line">                            &lt;!--&lt;GeometryGroup组合&gt;--&gt;</span><br><span class="line">                            &lt;GeometryGroup FillRule=<span class="string">&quot;Nonzero&quot;</span>&gt;</span><br><span class="line">                                &lt;RectangleGeometry Rect=<span class="string">&quot;80,50,200,100&quot;</span>/&gt;</span><br><span class="line">                                &lt;EllipseGeometry Center=<span class="string">&quot;300,100&quot;</span> RadiusX=<span class="string">&quot;80&quot;</span> RadiusY=<span class="string">&quot;60&quot;</span>/&gt;</span><br><span class="line">                            &lt;/GeometryGroup&gt;</span><br><span class="line">                        &lt;/Path.Data&gt;</span><br><span class="line">                    &lt;/Path&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Segment&quot;</span>&gt;</span><br><span class="line">                &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                    &lt;Path.Data&gt;</span><br><span class="line">                        &lt;PathGeometry&gt;</span><br><span class="line">                            &lt;PathFigure StartPoint=<span class="string">&quot;10,20&quot;</span>&gt;</span><br><span class="line">                                &lt;PathFigure.Segments&gt;</span><br><span class="line">                                    &lt;LineSegment Point=<span class="string">&quot;100,130&quot;</span>/&gt;</span><br><span class="line">                                &lt;/PathFigure.Segments&gt;</span><br><span class="line">                            &lt;/PathFigure&gt;</span><br><span class="line">                        &lt;/PathGeometry&gt;</span><br><span class="line">                    &lt;/Path.Data&gt;</span><br><span class="line">                &lt;/Path&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ArcSegment&quot;</span>&gt;</span><br><span class="line">                &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                    &lt;Path.Data&gt;</span><br><span class="line">                        &lt;PathGeometry&gt;</span><br><span class="line">                            &lt;PathGeometry.Figures&gt;</span><br><span class="line">                                &lt;PathFigure StartPoint=<span class="string">&quot;10,50&quot;</span>&gt;</span><br><span class="line">                                    &lt;PathFigure.Segments&gt;</span><br><span class="line">                                        &lt;ArcSegment Size=<span class="string">&quot;50,50&quot;</span> RotationAngle=<span class="string">&quot;45&quot;</span> IsLargeArc=<span class="string">&quot;True&quot;</span> SweepDirection=<span class="string">&quot;Clockwise&quot;</span> Point=<span class="string">&quot;200,100&quot;</span>&gt;</span><br><span class="line">                                            </span><br><span class="line">                                        &lt;/ArcSegment&gt;</span><br><span class="line">                                    &lt;/PathFigure.Segments&gt;</span><br><span class="line">                                &lt;/PathFigure&gt;</span><br><span class="line">                            &lt;/PathGeometry.Figures&gt;</span><br><span class="line">                        &lt;/PathGeometry&gt;</span><br><span class="line">                    &lt;/Path.Data&gt;</span><br><span class="line">                &lt;/Path&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;BezierSegment&quot;</span>&gt;</span><br><span class="line">                &lt;ScrollViewer&gt;</span><br><span class="line">                    &lt;StackPanel Orientation=<span class="string">&quot;Vertical&quot;</span>&gt;</span><br><span class="line">                        &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                            &lt;Path.Data&gt;</span><br><span class="line">                                &lt;PathGeometry&gt;</span><br><span class="line">                                    &lt;PathGeometry.Figures&gt;</span><br><span class="line">                                        &lt;PathFigure StartPoint=<span class="string">&quot;10,20&quot;</span>&gt;</span><br><span class="line">                                            &lt;PathFigure.Segments&gt;</span><br><span class="line">                                                &lt;BezierSegment Point1=<span class="string">&quot;100,0&quot;</span></span><br><span class="line">                                                       Point2=<span class="string">&quot;200,200&quot;</span></span><br><span class="line">                                                       Point3=<span class="string">&quot;300,100&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                                            &lt;/PathFigure.Segments&gt;</span><br><span class="line">                                        &lt;/PathFigure&gt;</span><br><span class="line">                                    &lt;/PathGeometry.Figures&gt;</span><br><span class="line">                                &lt;/PathGeometry&gt;</span><br><span class="line">                            &lt;/Path.Data&gt;</span><br><span class="line">                        &lt;/Path&gt;</span><br><span class="line">                        &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                            &lt;Path.Data&gt;</span><br><span class="line">                                &lt;PathGeometry&gt;</span><br><span class="line">                                    &lt;PathGeometry.Figures&gt;</span><br><span class="line">                                        &lt;PathFigure StartPoint=<span class="string">&quot;10,20&quot;</span>&gt;</span><br><span class="line">                                            &lt;PathFigure.Segments&gt;</span><br><span class="line">                                                &lt;!--&lt;PolyBezierSegment&gt;--&gt;</span><br><span class="line">                                                &lt;PolyBezierSegment Points=<span class="string">&quot;0,0 100,0 150,100 150,0 200,0 300,100&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                                            &lt;/PathFigure.Segments&gt;</span><br><span class="line">                                        &lt;/PathFigure&gt;</span><br><span class="line">                                    &lt;/PathGeometry.Figures&gt;</span><br><span class="line">                                &lt;/PathGeometry&gt;</span><br><span class="line">                            &lt;/Path.Data&gt;</span><br><span class="line">                        &lt;/Path&gt;</span><br><span class="line">                        &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                            &lt;Path.Data&gt;</span><br><span class="line">                                &lt;PathGeometry&gt;</span><br><span class="line">                                    &lt;PathGeometry.Figures&gt;</span><br><span class="line">                                        &lt;PathFigure StartPoint=<span class="string">&quot;10,20&quot;</span>&gt;</span><br><span class="line">                                            &lt;PathFigure.Segments&gt;</span><br><span class="line">                                                &lt;QuadraticBezierSegment Point1=<span class="string">&quot;200,200&quot;</span> Point2=<span class="string">&quot;300,100&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/PathFigure.Segments&gt;</span><br><span class="line">                                        &lt;/PathFigure&gt;</span><br><span class="line">                                    &lt;/PathGeometry.Figures&gt;</span><br><span class="line">                                &lt;/PathGeometry&gt;</span><br><span class="line">                            &lt;/Path.Data&gt;</span><br><span class="line">                        &lt;/Path&gt;</span><br><span class="line">                        &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">                            &lt;Path.Data&gt;</span><br><span class="line">                                &lt;PathGeometry&gt;</span><br><span class="line">                                    &lt;PathGeometry.Figures&gt;</span><br><span class="line">                                        &lt;PathFigure StartPoint=<span class="string">&quot;10,20&quot;</span>&gt;</span><br><span class="line">                                            &lt;PathFigure.Segments&gt;</span><br><span class="line">                                                &lt;PolyQuadraticBezierSegment Points=<span class="string">&quot;200,200 300,100 0,200 30,400&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/PathFigure.Segments&gt;</span><br><span class="line">                                        &lt;/PathFigure&gt;</span><br><span class="line">                                    &lt;/PathGeometry.Figures&gt;</span><br><span class="line">                                &lt;/PathGeometry&gt;</span><br><span class="line">                            &lt;/Path.Data&gt;</span><br><span class="line">                        &lt;/Path&gt;</span><br><span class="line">                        &lt;Path Stroke=<span class="string">&quot;Red&quot;</span> StrokeThickness=<span class="string">&quot;3&quot;</span> Data=<span class="string">&quot;M 100,200 C 100,25 400,350 400,175 H 280&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/ScrollViewer&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Hexagon&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;HexagonContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;controls:Hexagon Height=<span class="string">&quot;300&quot;</span> Width=<span class="string">&quot;300&quot;</span> Stroke=<span class="string">&quot;Yellow&quot;</span> StrokeThickness=<span class="string">&quot;8&quot;</span> Fill=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;LinearGradientBrush&quot;</span>&gt;</span><br><span class="line">                &lt;Path Canvas.Left=<span class="string">&quot;15&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span> Stroke=<span class="string">&quot;Black&quot;</span> Data=<span class="string">&quot;M 0,0 A 15,5 180 1 1 200,0 L 100,100 L 0,100 Z&quot;</span>&gt;</span><br><span class="line">                    &lt;Path.Fill&gt;</span><br><span class="line">                        &lt;LinearGradientBrush StartPoint=<span class="string">&quot;0,0&quot;</span> EndPoint=<span class="string">&quot;1,0&quot;</span>&gt;</span><br><span class="line">                            &lt;GradientStop Offset=<span class="string">&quot;0&quot;</span> Color=<span class="string">&quot;DarkBlue&quot;</span>/&gt;</span><br><span class="line">                            &lt;GradientStop Offset=<span class="string">&quot;1&quot;</span> Color=<span class="string">&quot;LightBlue&quot;</span>/&gt;</span><br><span class="line">                        &lt;/LinearGradientBrush&gt;</span><br><span class="line">                    &lt;/Path.Fill&gt;</span><br><span class="line">                &lt;/Path&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ImageBrush&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Ellipse Height=<span class="string">&quot;180&quot;</span> Width=<span class="string">&quot;180&quot;</span> Margin=<span class="string">&quot;50,0,0,0&quot;</span>&gt;</span><br><span class="line">                        &lt;Ellipse.Fill&gt;</span><br><span class="line">                            &lt;ImageBrush ImageSource=<span class="string">&quot;Assets/ApplicationIcon.png&quot;</span> Stretch=<span class="string">&quot;Fill&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Ellipse.Fill&gt;</span><br><span class="line">                    &lt;/Ellipse&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;你好&quot;</span> FontSize=<span class="string">&quot;100&quot;</span> FontWeight=<span class="string">&quot;Bold&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock.Foreground&gt;</span><br><span class="line">                            &lt;!--使用图像画刷填充TextBlock的Foreground--&gt;</span><br><span class="line">                            &lt;ImageBrush ImageSource=<span class="string">&quot;Assets/AlignmentGrid.png&quot;</span>/&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/TextBlock.Foreground&gt;</span><br><span class="line">                    &lt;/TextBlock&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Clip&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;ClipContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Canvas Background=<span class="string">&quot;White&quot;</span> Margin=<span class="string">&quot;20&quot;</span> controls:Clip.ToBounds=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">                        &lt;Ellipse Fill=<span class="string">&quot;Red&quot;</span> Canvas.Top=<span class="string">&quot;-10&quot;</span> Canvas.Left=<span class="string">&quot;-10&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;RenderTargetBitmap&quot;</span>&gt;</span><br><span class="line">                &lt;!--注册PointerReleased事件用于捕获屏幕的单击操作,并在时间处理程序中生成图片.--&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;root&quot;</span> Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span> PointerReleased=<span class="string">&quot;root_PointerReleased&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;StackPanel x:Name=<span class="string">&quot;TitlePanel&quot;</span> Margin=<span class="string">&quot;12,35,0,28&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;我的应用程序&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock Text=<span class="string">&quot;点击截屏&quot;</span> FontSize=<span class="string">&quot;60&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;RenderTargetBitmapContentPanel&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;!--该图片控件用于展示截图图片效果--&gt;</span><br><span class="line">                        &lt;Image x:Name=<span class="string">&quot;img&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SaveBitmapEncoder&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;root1&quot;</span> Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;BitmapEncoderContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;StackPanel&gt;</span><br><span class="line">                            &lt;Button x:Name=<span class="string">&quot;bt_save1&quot;</span> Content=<span class="string">&quot;存储生成的图片&quot;</span> Click=<span class="string">&quot;bt_save_Click_2&quot;</span>/&gt;</span><br><span class="line">                            &lt;Button x:Name=<span class="string">&quot;bt_show&quot;</span></span><br><span class="line">                                    Content=<span class="string">&quot;展示存储的图片&quot;</span></span><br><span class="line">                                    Click=<span class="string">&quot;bt_show_Click&quot;</span>/&gt;</span><br><span class="line">                            &lt;ScrollViewer BorderBrush=<span class="string">&quot;Red&quot;</span> BorderThickness=<span class="string">&quot;2&quot;</span> Height=<span class="string">&quot;350&quot;</span>&gt;</span><br><span class="line">                                &lt;Image x:Name=<span class="string">&quot;img1&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/ScrollViewer&gt;</span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;TranslateTransform&quot;</span>&gt;</span><br><span class="line">                &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                        &lt;TranslateTransform X=<span class="string">&quot;50&quot;</span> Y=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                &lt;/Rectangle&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;RotateTransform&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                        &lt;!--以Polyline对象的左上角0,0为旋转点将其旋转45°--&gt;</span><br><span class="line">                        &lt;Polyline Points=<span class="string">&quot;25,25,0,50,25,75,50,50,25,25,25,0&quot;</span></span><br><span class="line">                              Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;10&quot;</span></span><br><span class="line">                              Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span>&gt;</span><br><span class="line">                            &lt;Polyline.RenderTransform&gt;</span><br><span class="line">                                &lt;RotateTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Polyline.RenderTransform&gt;</span><br><span class="line">                        &lt;/Polyline&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                        &lt;Polyline Points=<span class="string">&quot;25,25,0,50,25,75,50,50,25,25,25,0&quot;</span></span><br><span class="line">                                  Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;10&quot;</span> Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;50&quot;</span>&gt;</span><br><span class="line">                            &lt;Polyline.RenderTransform&gt;</span><br><span class="line">                                &lt;RotateTransform CenterX=<span class="string">&quot;25&quot;</span> CenterY=<span class="string">&quot;50&quot;</span> Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Polyline.RenderTransform&gt;</span><br><span class="line">                        &lt;/Polyline&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Canvas Height=<span class="string">&quot;200&quot;</span> Width=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                            &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                                &lt;ScaleTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> ScaleX=<span class="string">&quot;2&quot;</span> ScaleY=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/Rectangle&gt;</span><br><span class="line">                        &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">                            &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                                &lt;ScaleTransform CenterX=<span class="string">&quot;25&quot;</span></span><br><span class="line">                                                CenterY=<span class="string">&quot;25&quot;</span></span><br><span class="line">                                                ScaleX=<span class="string">&quot;2&quot;</span></span><br><span class="line">                                                ScaleY=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                        &lt;/Rectangle&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    </span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SkewTransform&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;#CCCCCCFF&quot;</span> Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;2&quot;</span> Canvas.Left=<span class="string">&quot;100&quot;</span> Canvas.Top=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;SkewTransform CenterX=<span class="string">&quot;0&quot;</span> CenterY=<span class="string">&quot;0&quot;</span> AngleX=<span class="string">&quot;45&quot;</span> AngleY=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;TransformGroup&quot;</span>&gt;</span><br><span class="line">                &lt;Button RenderTransformOrigin=<span class="string">&quot;0.5,0.5&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span>&gt;Click</span><br><span class="line">                    &lt;Button.RenderTransform&gt;</span><br><span class="line">                        &lt;TransformGroup&gt;</span><br><span class="line">                            &lt;ScaleTransform ScaleY=<span class="string">&quot;3&quot;</span>/&gt;</span><br><span class="line">                            &lt;RotateTransform Angle=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                        &lt;/TransformGroup&gt;</span><br><span class="line">                    &lt;/Button.RenderTransform&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;MatrixTransform&quot;</span>&gt;</span><br><span class="line">                &lt;!--&lt;Button MinWidth=<span class="string">&quot;100&quot;</span>&gt;Click</span><br><span class="line">                    &lt;Button.RenderTransform&gt;</span><br><span class="line">                        &lt;MatrixTransform x:Name=<span class="string">&quot;myMatrixTransform&quot;</span>&gt;</span><br><span class="line">                            &lt;MatrixTransform.Matrix&gt;</span><br><span class="line">                                &lt;Matrix/&gt;</span><br><span class="line">                            &lt;/MatrixTransform.Matrix&gt;</span><br><span class="line">                        &lt;/MatrixTransform&gt;</span><br><span class="line">                    &lt;/Button.RenderTransform&gt;</span><br><span class="line">                &lt;/Button&gt;--&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;3D&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas Background=<span class="string">&quot;Black&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Fill=<span class="string">&quot;Red&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;MatrixTransform Matrix=<span class="string">&quot;1,-0.5,0,1.0,60,100&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                    &lt;Rectangle Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Fill=<span class="string">&quot;FloralWhite&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;MatrixTransform Matrix=<span class="string">&quot;1.0,0.5,0,1.0,260,0&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                    &lt;Rectangle Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Fill=<span class="string">&quot;Green&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;MatrixTransform Matrix=<span class="string">&quot;1,0.5,-1,0.5,260,200&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SanWeiXuanzhuan&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;SanWeiContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;!--旋转的对象--&gt;</span><br><span class="line">                    &lt;TextBlock Grid.Row=<span class="string">&quot;0&quot;</span> Text=<span class="string">&quot;3D&quot;</span> FontSize=<span class="string">&quot;120&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock.Projection&gt;</span><br><span class="line">                            &lt;PlaneProjection x:Name=<span class="string">&quot;planeProjection&quot;</span>/&gt;</span><br><span class="line">                        &lt;/TextBlock.Projection&gt;</span><br><span class="line">                    &lt;/TextBlock&gt;</span><br><span class="line">                    &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;rotationRadioButton&quot;</span> Content=<span class="string">&quot;Rotation&quot;</span> Checked=<span class="string">&quot;rotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;centerOfRotationRadioButton&quot;</span></span><br><span class="line">                                         Content=<span class="string">&quot;CenterOfRotation&quot;</span> Checked=<span class="string">&quot;centerOfRotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;infoTextBlock&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;xTextBlock&quot;</span> Text=<span class="string">&quot;沿着X轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;xSlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;xSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;yTextBlock&quot;</span> Text=<span class="string">&quot;沿着Y轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;ySlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;ySlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;zTextBlock&quot;</span> Text=<span class="string">&quot;沿着Z轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;zSlider&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;zSlider_ValueChanged&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SanweiPingyi&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;SanweiContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;!--平移的对象--&gt;</span><br><span class="line">                    &lt;TextBlock Grid.Row=<span class="string">&quot;0&quot;</span> Text=<span class="string">&quot;3D&quot;</span> FontSize=<span class="string">&quot;120&quot;</span> Foreground=<span class="string">&quot;red&quot;</span></span><br><span class="line">                               HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock.Projection&gt;</span><br><span class="line">                            &lt;PlaneProjection x:Name=<span class="string">&quot;pingyiProjection&quot;</span> RotationX=<span class="string">&quot;45&quot;</span>/&gt;</span><br><span class="line">                        &lt;/TextBlock.Projection&gt;</span><br><span class="line">                    &lt;/TextBlock&gt;</span><br><span class="line">                    &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;globalRadioButton&quot;</span> Content=<span class="string">&quot;GlobalOffset&quot;</span> Checked=<span class="string">&quot;rotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line">                            &lt;RadioButton x:Name=<span class="string">&quot;localRadioButton&quot;</span></span><br><span class="line">                                         Content=<span class="string">&quot;LocalOffset&quot;</span> Checked=<span class="string">&quot;centerOfRotationRadioButton_Checked&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;infoTextBlock1&quot;</span> TextWrapping=<span class="string">&quot;Wrap&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;xTextBlock1&quot;</span> Text=<span class="string">&quot;沿着X轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;xSlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;xSlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;yTextBlock1&quot;</span> Text=<span class="string">&quot;沿着Y轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;ySlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;ySlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock x:Name=<span class="string">&quot;zTextBlock1&quot;</span> Text=<span class="string">&quot;沿着Z轴旋转&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;zSlider1&quot;</span> Minimum=<span class="string">&quot;0&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> ValueChanged=<span class="string">&quot;zSlider_ValueChanged1&quot;</span>/&gt;</span><br><span class="line">                 </span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">                </span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Storyboard&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;Ellipse x:Name=<span class="string">&quot;ellipse1&quot;</span> Width=<span class="string">&quot;150&quot;</span> Height=<span class="string">&quot;150&quot;</span>&gt;</span><br><span class="line">                       </span><br><span class="line">                    &lt;/Ellipse&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;storyboard1&quot;</span>&gt;</span><br><span class="line">                            &lt;DoubleAnimation EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;ellipse1&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span></span><br><span class="line">                                             From=<span class="string">&quot;150&quot;</span> To=<span class="string">&quot;300&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;myStoryboard&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;myStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;300&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             RepeatBehavior=<span class="string">&quot;Forever&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;rect&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                    &lt;Rectangle x:Name=<span class="string">&quot;rect&quot;</span> Width=<span class="string">&quot;0&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;启动动画&quot;</span> Click=<span class="string">&quot;Button_Click_3&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DoubleAnimation&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas Loaded=<span class="string">&quot;Page_Loaded&quot;</span>&gt;</span><br><span class="line">                    &lt;Canvas.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;storyBoard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--对ScaleTransform对象的ScaleY属性应用动画,表示沿着Y轴缩放倍数变化的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;scacleTransform&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span></span><br><span class="line">                                             From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span></span><br><span class="line">                                             RepeatBehavior=<span class="string">&quot;Forever&quot;</span> AutoReverse=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/Canvas.Resources&gt;</span><br><span class="line">                    &lt;Rectangle x:Name=<span class="string">&quot;rectangle&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span> Canvas.Left=<span class="string">&quot;75&quot;</span> Canvas.Top=<span class="string">&quot;75&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;!--&lt;注意需要对ScaleTransform命名,否则无法定义动画的目标对象&gt;--&gt;</span><br><span class="line">                            &lt;ScaleTransform x:Name=<span class="string">&quot;scacleTransform&quot;</span>&gt;</span><br><span class="line">                            &lt;/ScaleTransform&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ColorAnimation&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;storybord1&quot;</span>&gt;</span><br><span class="line">                            &lt;ColorAnimation From=<span class="string">&quot;Red&quot;</span> To=<span class="string">&quot;Yellow&quot;</span></span><br><span class="line">                                            Storyboard.TargetName=<span class="string">&quot;button&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;(Button.Background).(SolidColorBrush.Color)&quot;</span></span><br><span class="line">                                            Duration=<span class="string">&quot;0:0:5&quot;</span>&gt;</span><br><span class="line">                            &lt;/ColorAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;开始动画&quot;</span> Margin=<span class="string">&quot;12&quot;</span> Click=<span class="string">&quot;Button_Click_4&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;Test&quot;</span> x:Name=<span class="string">&quot;button&quot;</span> Margin=<span class="string">&quot;12&quot;</span> Click=<span class="string">&quot;button_Click_5&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;PointAnimation&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;storyboard2&quot;</span>&gt;</span><br><span class="line">                            &lt;PointAnimation From=<span class="string">&quot;50,0&quot;</span> To=<span class="string">&quot;100,50&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;bezierSegment&quot;</span></span><br><span class="line">                                            Storyboard.TargetProperty=<span class="string">&quot;Point3&quot;</span> RepeatBehavior=<span class="string">&quot;5&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;运行动画&quot;</span> Click=<span class="string">&quot;Button_Click_6&quot;</span> Margin=<span class="string">&quot;12&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--&lt;Data属性由4个BezierSegment曲线和1条直线LineSegment组成&gt;--&gt;</span><br><span class="line">                    &lt;Path Fill=<span class="string">&quot;#FF4080FF&quot;</span> HorizontalAlignment=<span class="string">&quot;Left&quot;</span> Height=<span class="string">&quot;100&quot;</span> Margin=<span class="string">&quot;162,164,0,0&quot;</span> Stretch=<span class="string">&quot;Fill&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">                        &lt;Path.Data&gt;</span><br><span class="line">                            &lt;PathGeometry&gt;</span><br><span class="line">                                &lt;PathFigure StartPoint=<span class="string">&quot;100,50&quot;</span>&gt;</span><br><span class="line">                                    &lt;BezierSegment Point1=<span class="string">&quot;100,77.6142&quot;</span> Point2=<span class="string">&quot;77.6142,100&quot;</span> Point3=<span class="string">&quot;50,100&quot;</span>/&gt;</span><br><span class="line">                                    &lt;BezierSegment Point1=<span class="string">&quot;22.3858,100&quot;</span> Point2=<span class="string">&quot;0,77.6142&quot;</span> Point3=<span class="string">&quot;0,50&quot;</span>/&gt;</span><br><span class="line">                                    &lt;BezierSegment Point1=<span class="string">&quot;0,22.3858&quot;</span> Point2=<span class="string">&quot;22.3858,0&quot;</span> Point3=<span class="string">&quot;50,0&quot;</span>/&gt;</span><br><span class="line">                                    &lt;!--BezierSegment表示是圆右上的弧线,对其终点Point3进行动画处理--&gt;</span><br><span class="line">                                    &lt;BezierSegment x:Name=<span class="string">&quot;bezierSegment&quot;</span> Point1=<span class="string">&quot;77.6142,0&quot;</span> Point2=<span class="string">&quot;100,22.3858&quot;</span> Point3=<span class="string">&quot;100,50&quot;</span>/&gt;</span><br><span class="line">                                    &lt;LineSegment Point=<span class="string">&quot;50,50&quot;</span>/&gt;</span><br><span class="line">                                &lt;/PathFigure&gt;</span><br><span class="line">                            &lt;/PathGeometry&gt;</span><br><span class="line">                        &lt;/Path.Data&gt;</span><br><span class="line">                    &lt;/Path&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SplineDoubleKeyFrame&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;LayoutRoot&quot;</span> Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;SplineKeyStoryBoard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--对第一个矩形的Canvas.Top属性使用样条关键帧动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimationUsingKeyFrames </span><br><span class="line">                                Storyboard.TargetName=<span class="string">&quot;srect&quot;</span></span><br><span class="line">                                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span></span><br><span class="line">                                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;SplineDoubleKeyFrame Value=<span class="string">&quot;0&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                                      KeySpline=<span class="string">&quot;0.0,1.0 1.0,0.0&quot;</span>/&gt;</span><br><span class="line">                            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">                            &lt;!--对第一个矩形的Canvas.Left属性使用线性关键帧动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimationUsingKeyFrames</span><br><span class="line">                                Storyboard.TargetName=<span class="string">&quot;srect&quot;</span></span><br><span class="line">                                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span></span><br><span class="line">                                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;400&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">                            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">                            &lt;!--对第二个矩形的Canvas.Top属性使用线性关键帧动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimationUsingKeyFrames </span><br><span class="line">                                Storyboard.TargetName=<span class="string">&quot;srect2&quot;</span></span><br><span class="line">                                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span></span><br><span class="line">                                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;0&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">                            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">                            &lt;!--对第二个矩形的Canvas.Left属性使用线性关键帧动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimationUsingKeyFrames</span><br><span class="line">                                Storyboard.TargetName=<span class="string">&quot;srect2&quot;</span></span><br><span class="line">                                Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span></span><br><span class="line">                                Duration=<span class="string">&quot;0:0:10&quot;</span></span><br><span class="line">                                RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;LinearDoubleKeyFrame Value=<span class="string">&quot;400&quot;</span> KeyTime=<span class="string">&quot;0:0:10&quot;</span>/&gt;</span><br><span class="line">                            &lt;/DoubleAnimationUsingKeyFrames&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                     </span><br><span class="line"></span><br><span class="line">                            &lt;!--第一个矩形的运动轨迹时采用样条关键帧的方式从左下角向右上角用变化的加速度运动--&gt;</span><br><span class="line">                            &lt;Rectangle x:Name=<span class="string">&quot;srect&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Purple&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;!--第二个矩形的运动轨迹是采用线性关键帧的方式从左下角向右上角匀速运动--&gt;</span><br><span class="line">                            &lt;Rectangle x:Name=<span class="string">&quot;srect2&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                            &lt;Button Content=<span class="string">&quot;运行动画&quot;</span> Canvas.Top=<span class="string">&quot;500&quot;</span> Click=<span class="string">&quot;Button_Click_7&quot;</span>/&gt;</span><br><span class="line">                   </span><br><span class="line"></span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Discrete&quot;</span>&gt;</span><br><span class="line">                &lt;Grid&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;Discretestoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;PointAnimationUsingKeyFrames Storyboard.TargetName=<span class="string">&quot;myLinearGradientBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;StartPoint&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.1,0.3&quot;</span> KeyTime=<span class="string">&quot;0:0:0&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.2,0.4&quot;</span> KeyTime=<span class="string">&quot;0:0:1&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.3,0.5&quot;</span> KeyTime=<span class="string">&quot;0:0:2&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.4,0.6&quot;</span> KeyTime=<span class="string">&quot;0:0:3&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.5,0.7&quot;</span> KeyTime=<span class="string">&quot;0:0:4&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.6,0.8&quot;</span> KeyTime=<span class="string">&quot;0:0:5&quot;</span>/&gt;</span><br><span class="line">                                &lt;DiscretePointKeyFrame Value=<span class="string">&quot;0.7,0.9&quot;</span> KeyTime=<span class="string">&quot;0:0:6&quot;</span>/&gt;</span><br><span class="line">                            &lt;/PointAnimationUsingKeyFrames&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;StackPanel&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span>&gt;</span><br><span class="line">                            &lt;Ellipse.Fill&gt;</span><br><span class="line">                                &lt;LinearGradientBrush x:Name=<span class="string">&quot;myLinearGradientBrush&quot;</span></span><br><span class="line">                                                     StartPoint=<span class="string">&quot;0,0&quot;</span> EndPoint=<span class="string">&quot;1,0&quot;</span>&gt;</span><br><span class="line">                                    &lt;LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                        &lt;GradientStop Color=<span class="string">&quot;White&quot;</span> Offset=<span class="string">&quot;0.001&quot;</span>/&gt;</span><br><span class="line">                                        &lt;GradientStop Color=<span class="string">&quot;Blue&quot;</span> Offset=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                &lt;/LinearGradientBrush&gt;</span><br><span class="line">                            &lt;/Ellipse.Fill&gt;</span><br><span class="line">                        &lt;/Ellipse&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;100&quot;</span> Click=<span class="string">&quot;Button_Click_8&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ChangeBackGroundDiscrete&quot;</span>&gt;</span><br><span class="line">                &lt;Grid x:Name=<span class="string">&quot;LayoutRoot1&quot;</span> Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;ChangeBackGroundstoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;ObjectAnimationUsingKeyFrames Storyboard.TargetName=<span class="string">&quot;LayoutRoot1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Background&quot;</span> Duration=<span class="string">&quot;0:0:4&quot;</span></span><br><span class="line">                                                           RepeatBehavior=<span class="string">&quot;Forever&quot;</span>&gt;</span><br><span class="line">                                &lt;!--在1秒钟时间点上设置背景的画刷为LinearGradientBrush--&gt;</span><br><span class="line">                                &lt;DiscreteObjectKeyFrame KeyTime=<span class="string">&quot;0:0:1&quot;</span>&gt;</span><br><span class="line">                                    &lt;DiscreteObjectKeyFrame.Value&gt;</span><br><span class="line">                                        &lt;LinearGradientBrush&gt;</span><br><span class="line">                                            &lt;LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;Yellow&quot;</span> Offset=<span class="string">&quot;0.0&quot;</span>/&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;Orange&quot;</span> Offset=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;Red&quot;</span> Offset=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                        &lt;/LinearGradientBrush&gt;</span><br><span class="line">                                    &lt;/DiscreteObjectKeyFrame.Value&gt;</span><br><span class="line">                                &lt;/DiscreteObjectKeyFrame&gt;</span><br><span class="line">                                &lt;!--在2秒钟的时间点上设置背景的画刷为另外一个LinearGradientBrush--&gt;</span><br><span class="line">                                &lt;DiscreteObjectKeyFrame KeyTime=<span class="string">&quot;0:0:2&quot;</span>&gt;</span><br><span class="line">                                    &lt;DiscreteObjectKeyFrame.Value&gt;</span><br><span class="line">                                        &lt;LinearGradientBrush StartPoint=<span class="string">&quot;0,0&quot;</span> EndPoint=<span class="string">&quot;1,0&quot;</span>&gt;</span><br><span class="line">                                            &lt;LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;White&quot;</span> Offset=<span class="string">&quot;0.0&quot;</span>/&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;MediumBlue&quot;</span> Offset=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line">                                                &lt;GradientStop Color=<span class="string">&quot;Black&quot;</span> Offset=<span class="string">&quot;1.0&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/LinearGradientBrush.GradientStops&gt;</span><br><span class="line">                                        &lt;/LinearGradientBrush&gt;</span><br><span class="line">                                    &lt;/DiscreteObjectKeyFrame.Value&gt;</span><br><span class="line">                                &lt;/DiscreteObjectKeyFrame&gt;</span><br><span class="line">                            &lt;/ObjectAnimationUsingKeyFrames&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;ChangeBackGroundContentPanel&quot;</span> Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;100&quot;</span> Click=<span class="string">&quot;Button_Click_9&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;BackEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;Easestoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselScaleTransform&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;ScaleX&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselScaleTransform&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse4&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse4&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BackEase Amplitude=<span class="string">&quot;0.3&quot;</span> EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了BackEase的放大动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse Name=<span class="string">&quot;ellipse3&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                            &lt;Ellipse.RenderTransform&gt;</span><br><span class="line">                                &lt;ScaleTransform x:Name=<span class="string">&quot;ellipselScaleTransform&quot;</span>&gt;</span><br><span class="line">                                    </span><br><span class="line">                                &lt;/ScaleTransform&gt;</span><br><span class="line">                            &lt;/Ellipse.RenderTransform&gt;</span><br><span class="line">                        &lt;/Ellipse&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了BackEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse4&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_10&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;BounceEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;Bouncestoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;ellipse5&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;80&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;ellipse5&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Height&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                   </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse6&quot;</span>         Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse6&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;BounceEase Bounces=<span class="string">&quot;2&quot;</span> EasingMode=<span class="string">&quot;EaseOut&quot;</span> Bounciness=<span class="string">&quot;2&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了BounceEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse Name=<span class="string">&quot;ellipse5&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了BounceEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse6&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_11&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;CircleEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;CircleEasestoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;80&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;ellipse7&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Width&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CircleEase EasingMode=<span class="string">&quot;EaseOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse8&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;0&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse8&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CircleEase EasingMode=<span class="string">&quot;EaseOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了CircleEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse7&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了CircleEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse8&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span> Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_12&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;CubicEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;Cubicstoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;180&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipselPlaneProjection&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;RotationX&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CubicEase EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse10&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse10&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;CubicEase EasingMode=<span class="string">&quot;EaseInOut&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了CubicEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse9&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>&gt;</span><br><span class="line">                            &lt;Ellipse.Projection&gt;</span><br><span class="line">                                &lt;PlaneProjection RotationX=<span class="string">&quot;0&quot;</span> x:Name=<span class="string">&quot;ellipselPlaneProjection&quot;</span>&gt;</span><br><span class="line">                                &lt;/PlaneProjection&gt;</span><br><span class="line">                            &lt;/Ellipse.Projection&gt;</span><br><span class="line">                        &lt;/Ellipse&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了CubicEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse10&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_13&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ElasticEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;Elasticstoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--线条的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             Storyboard.TargetName=<span class="string">&quot;line1&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;Y2&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse11&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse12&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse12&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;ElasticEase EasingMode=<span class="string">&quot;EaseOut&quot;</span> Oscillations=<span class="string">&quot;7&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--线条展示了ElasticEase的动画效果--&gt;</span><br><span class="line">                        &lt;Line x:Name=<span class="string">&quot;line1&quot;</span> X1=<span class="string">&quot;50&quot;</span> Y1=<span class="string">&quot;0&quot;</span> X2=<span class="string">&quot;50&quot;</span> Y2=<span class="string">&quot;50&quot;</span></span><br><span class="line">                              Stroke=<span class="string">&quot;Blue&quot;</span> StrokeThickness=<span class="string">&quot;10&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了ElasticEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse Name=<span class="string">&quot;ellipse11&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span> Width=<span class="string">&quot;100&quot;</span> Height=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了ElasticEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse12&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_14&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ExponentialEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;ExponentialStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse13&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;ExponentialEase Exponent=<span class="string">&quot;10&quot;</span> EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse14&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse14&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;ExponentialEase Exponent=<span class="string">&quot;10&quot;</span> EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;!--第一个椭圆展示了ExponentialEase的动画效果--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse13&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;!--第二个椭圆展示了ExponentialEase的运动轨迹--&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse14&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_15&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;PowerEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;powerStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--第一个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse15&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;PowerEase EasingMode=<span class="string">&quot;EaseIn&quot;</span> x:Name=<span class="string">&quot;powerEase1&quot;</span>/&gt;</span><br><span class="line">                                    </span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;!--第二个椭圆的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse16&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse16&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;PowerEase EasingMode=<span class="string">&quot;EaseIn&quot;</span> x:Name=<span class="string">&quot;powerEase2&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;Ellipse Name=<span class="string">&quot;ellipse15&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse16&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_16&quot;</span>/&gt;</span><br><span class="line">                        &lt;Slider x:Name=<span class="string">&quot;powerSlider&quot;</span> Margin=<span class="string">&quot;200,500,0,0&quot;</span></span><br><span class="line">                                Width=<span class="string">&quot;200&quot;</span> Background=<span class="string">&quot;Red&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;100&quot;</span> Minimum=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SineEase&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;Transparent&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;SineStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse17&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;SineEase EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;0&quot;</span> To=<span class="string">&quot;400&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse18&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Left)&quot;</span>&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                            &lt;DoubleAnimation From=<span class="string">&quot;400&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:3&quot;</span> Storyboard.TargetName=<span class="string">&quot;ellipse18&quot;</span></span><br><span class="line">                                             Storyboard.TargetProperty=<span class="string">&quot;(Canvas.Top)&quot;</span>&gt;</span><br><span class="line">                                &lt;DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                    &lt;SineEase EasingMode=<span class="string">&quot;EaseIn&quot;</span>/&gt;</span><br><span class="line">                                &lt;/DoubleAnimation.EasingFunction&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;Canvas Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                        &lt;Ellipse Name=<span class="string">&quot;ellipse17&quot;</span> Width=<span class="string">&quot;50&quot;</span> Height=<span class="string">&quot;50&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                        &lt;Ellipse x:Name=<span class="string">&quot;ellipse18&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Width=<span class="string">&quot;80&quot;</span></span><br><span class="line">                                 Height=<span class="string">&quot;80&quot;</span> Canvas.Left=<span class="string">&quot;0&quot;</span> Canvas.Top=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Margin=<span class="string">&quot;0,500,0,0&quot;</span> Content=<span class="string">&quot;启动动画&quot;</span> Height=<span class="string">&quot;80&quot;</span> Click=<span class="string">&quot;Button_Click_17&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;JyzEase&quot;</span>&gt;</span><br><span class="line">                &lt;Canvas Background=<span class="string">&quot;Gray&quot;</span> PointerMoved=<span class="string">&quot;Canvas_PointerMoved&quot;</span>&gt;</span><br><span class="line">                    &lt;Rectangle x:Name=<span class="string">&quot;prectangle&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;100&quot;</span></span><br><span class="line">                               RadiusX=<span class="string">&quot;12.5&quot;</span> RadiusY=<span class="string">&quot;12.5&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.Fill&gt;</span><br><span class="line">                            &lt;LinearGradientBrush&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;Black&quot;</span> Offset=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;White&quot;</span> Offset=<span class="string">&quot;0.5&quot;</span>/&gt;</span><br><span class="line">                                &lt;GradientStop Color=<span class="string">&quot;Black&quot;</span> Offset=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                            &lt;/LinearGradientBrush&gt;</span><br><span class="line">                        &lt;/Rectangle.Fill&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/Canvas&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;TwoAnimationCompare&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;heightStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--针对Height属性的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;rectangle1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Height&quot;</span></span><br><span class="line">                                             RepeatBehavior=<span class="string">&quot;Forever&quot;</span></span><br><span class="line">                                             EnableDependentAnimation=<span class="string">&quot;True&quot;</span></span><br><span class="line">                                             From=<span class="string">&quot;100&quot;</span> To=<span class="string">&quot;200&quot;</span> Duration=<span class="string">&quot;0:0:2&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                        &lt;Storyboard x:Name=<span class="string">&quot;scaleTransformStoryboard&quot;</span>&gt;</span><br><span class="line">                            &lt;!--针对ScaleTransform的ScaleY属性的动画--&gt;</span><br><span class="line">                            &lt;DoubleAnimation Storyboard.TargetName=<span class="string">&quot;scaleTransform1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;ScaleY&quot;</span> RepeatBehavior=<span class="string">&quot;Forever&quot;</span> From=<span class="string">&quot;1&quot;</span> To=<span class="string">&quot;2&quot;</span> Duration=<span class="string">&quot;0:0:2&quot;</span>&gt;</span><br><span class="line">                            &lt;/DoubleAnimation&gt;</span><br><span class="line">                        &lt;/Storyboard&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;阻塞UI线程&quot;</span> Click=<span class="string">&quot;Button_Click_18&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;heightAnimationButton&quot;</span> Content=<span class="string">&quot;Height属性动画&quot;</span> Click=<span class="string">&quot;heightAnimationButton_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;scaleTransformAnimationButton&quot;</span> Content=<span class="string">&quot;ScaleTransform属性动画&quot;</span> Click=<span class="string">&quot;scaleTransformAnimationButton_Click&quot;</span>/&gt;</span><br><span class="line">                    &lt;Rectangle Height=<span class="string">&quot;100&quot;</span> Fill=<span class="string">&quot;Blue&quot;</span> x:Name=<span class="string">&quot;rectangle1&quot;</span>&gt;</span><br><span class="line">                        &lt;Rectangle.RenderTransform&gt;</span><br><span class="line">                            &lt;ScaleTransform x:Name=<span class="string">&quot;scaleTransform1&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Rectangle.RenderTransform&gt;</span><br><span class="line">                    &lt;/Rectangle&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;StarDown&quot;</span>&gt;</span><br><span class="line">                &lt;Grid&gt;</span><br><span class="line">                    &lt;Canvas x:Name=<span class="string">&quot;myCanvas&quot;</span> HorizontalAlignment=<span class="string">&quot;Stretch&quot;</span> VerticalAlignment=<span class="string">&quot;Stretch&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;btn&quot;</span> VerticalAlignment=<span class="string">&quot;Bottom&quot;</span> Content=<span class="string">&quot;开始星星飘落&quot;</span> Click=<span class="string">&quot;btn_Click&quot;</span>/&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Style&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;StackPanel.Resources&gt;</span><br><span class="line">                        &lt;Style x:Key=<span class="string">&quot;commonStyle&quot;</span> TargetType=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Width&quot;</span> Value=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Height&quot;</span> Value=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;FontSize&quot;</span> Value=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Foreground&quot;</span> Value=<span class="string">&quot;Green&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Background&quot;</span> Value=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;FontFamily&quot;</span> Value=<span class="string">&quot;Arial&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Style&gt;</span><br><span class="line">                        &lt;Style x:Key=<span class="string">&quot;commonstyle2&quot;</span> TargetType=<span class="string">&quot;FrameworkElement&quot;</span>&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Width&quot;</span> Value=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;Height&quot;</span> Value=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Style&gt;</span><br><span class="line">                    &lt;/StackPanel.Resources&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;按钮1&quot;</span> Style=<span class="string">&quot;&#123;StaticResource commonStyle&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;按钮2&quot;</span> Style=<span class="string">&quot;&#123;StaticResource commonStyle&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;按钮3&quot;</span> Style=<span class="string">&quot;&#123;StaticResource commonStyle&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;AAA&quot;</span> Style=<span class="string">&quot;&#123;StaticResource commonstyle2&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ControlTemplate&quot;</span>&gt;</span><br><span class="line">                &lt;Button Content=<span class="string">&quot;Hello World&quot;</span>&gt;</span><br><span class="line">                    &lt;Button.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate&gt;</span><br><span class="line">                            &lt;Grid&gt;</span><br><span class="line">                                &lt;Ellipse Width=<span class="string">&quot;&#123;TemplateBinding Button.Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;TemplateBinding Height&#125;&quot;</span></span><br><span class="line">                                         Fill=<span class="string">&quot;&#123;TemplateBinding Button.Background&#125;&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span></span><br><span class="line">                                           VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                           Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Grid&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/Button.Template&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ContentPresenter&quot;</span>&gt;</span><br><span class="line">                &lt;Button&gt;</span><br><span class="line">                    &lt;Button.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate&gt;</span><br><span class="line">                            &lt;Grid&gt;</span><br><span class="line">                                &lt;ContentPresenter HorizontalAlignment=<span class="string">&quot;&#123;TemplateBinding HorizontalAlignment&#125;&quot;</span> VerticalAlignment=<span class="string">&quot;&#123;TemplateBinding VerticalAlignment&#125;&quot;</span>/&gt;</span><br><span class="line">                            &lt;/Grid&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/Button.Template&gt;</span><br><span class="line">                    &lt;Button.Content&gt;</span><br><span class="line">                        &lt;Rectangle Fill=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;50&quot;</span> Width=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Button.Content&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;VisualStateManager&quot;</span>&gt;</span><br><span class="line">                &lt;Button Content=<span class="string">&quot;Hello World&quot;</span> LostFocus=<span class="string">&quot;Button_LostFocus&quot;</span> Tapped=<span class="string">&quot;Button_Tapped&quot;</span>&gt;</span><br><span class="line">                    &lt;Button.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                            &lt;Border&gt;</span><br><span class="line">                                &lt;VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                                    &lt;VisualStateGroup x:Name=<span class="string">&quot;CommonStates&quot;</span>&gt;</span><br><span class="line">                                        &lt;VisualStateGroup.Transitions&gt;</span><br><span class="line">                                            &lt;VisualTransition From=<span class="string">&quot;Test1&quot;</span> To=<span class="string">&quot;Test2&quot;</span> GeneratedDuration=<span class="string">&quot;0:0:1.5&quot;</span>&gt;</span><br><span class="line">                                                &lt;Storyboard&gt;</span><br><span class="line">                                                    </span><br><span class="line">                                                &lt;/Storyboard&gt;</span><br><span class="line">                                            &lt;/VisualTransition&gt;</span><br><span class="line">                                        &lt;/VisualStateGroup.Transitions&gt;</span><br><span class="line">                                        &lt;!--创建状态Test1把Border背景的颜色改成红色--&gt;</span><br><span class="line">                                        &lt;VisualState x:Name=<span class="string">&quot;Test1&quot;</span>&gt;</span><br><span class="line">                                            &lt;Storyboard&gt;</span><br><span class="line">                                                &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/Storyboard&gt;</span><br><span class="line">                                        &lt;/VisualState&gt;</span><br><span class="line">                                        &lt;!--创建状态Test2把Border背景的颜色改成蓝色--&gt;</span><br><span class="line">                                        </span><br><span class="line">                                            &lt;VisualState x:Name=<span class="string">&quot;Test2&quot;</span>&gt;</span><br><span class="line">                                            &lt;Storyboard&gt;</span><br><span class="line">                                                &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/Storyboard&gt;</span><br><span class="line">                                        &lt;/VisualState&gt;</span><br><span class="line">                                    &lt;/VisualStateGroup&gt;</span><br><span class="line">                                &lt;/VisualStateManager.VisualStateGroups&gt;</span><br><span class="line"></span><br><span class="line">                                &lt;Border.Background&gt;</span><br><span class="line">                                    &lt;!--定义Border背景的颜色,用于测试不同状态的显示效果--&gt;</span><br><span class="line">                                    &lt;SolidColorBrush x:Name=<span class="string">&quot;BorderBrush&quot;</span> Color=<span class="string">&quot;Black&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                                &lt;/Border.Background&gt;</span><br><span class="line">                                &lt;Grid&gt;</span><br><span class="line">                                    &lt;Ellipse x:Name=<span class="string">&quot;ellipse19&quot;</span> Width=<span class="string">&quot;&#123;TemplateBinding Button.Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;TemplateBinding Height&#125;&quot;</span> Fill=<span class="string">&quot;&#123;TemplateBinding Button.Background&#125;&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                    &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                               Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                                    &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;TemplateBinding Button.Content&#125;&quot;</span>/&gt;</span><br><span class="line">                                &lt;/Grid&gt;</span><br><span class="line">                            &lt;/Border&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/Button.Template&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DataTemplate&quot;</span>&gt;</span><br><span class="line">                &lt;Button Content=<span class="string">&quot;Hello World&quot;</span> Width=<span class="string">&quot;100&quot;</span> LostFocus=<span class="string">&quot;Button_LostFocus&quot;</span> Tapped=<span class="string">&quot;Button_Tapped&quot;</span>&gt;</span><br><span class="line">                    &lt;Button.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;Button&quot;</span>&gt;</span><br><span class="line">                            &lt;Border&gt;</span><br><span class="line">                                &lt;VisualStateManager.VisualStateGroups&gt;</span><br><span class="line">                                    &lt;VisualStateGroup&gt;</span><br><span class="line">                                        &lt;VisualStateGroup.Transitions&gt;</span><br><span class="line">                                            &lt;!--状态Test1转换为状态Test2的颜色变化动画--&gt;</span><br><span class="line">                                            &lt;VisualTransition From=<span class="string">&quot;Test1&quot;</span> To=<span class="string">&quot;Test2&quot;</span> GeneratedDuration=<span class="string">&quot;0:0:1.5&quot;</span>&gt;</span><br><span class="line">                                                &lt;Storyboard&gt;</span><br><span class="line">                                                    </span><br><span class="line">                                                &lt;/Storyboard&gt;</span><br><span class="line">                                            &lt;/VisualTransition&gt;</span><br><span class="line">                                           </span><br><span class="line">                                        &lt;/VisualStateGroup.Transitions&gt;</span><br><span class="line">                                        &lt;!--创建状态Test1把Border背景的颜色改成红色--&gt;</span><br><span class="line">                                        &lt;VisualState x:Name=<span class="string">&quot;Test3&quot;</span>&gt;</span><br><span class="line">                                            &lt;Storyboard&gt;</span><br><span class="line">                                                &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/Storyboard&gt;</span><br><span class="line">                                            </span><br><span class="line">                                        &lt;/VisualState&gt;</span><br><span class="line">                                        &lt;!--创建状态Test2把Border背景的颜色改成蓝色--&gt;</span><br><span class="line">                                        &lt;VisualState x:Name=<span class="string">&quot;Test4&quot;</span>&gt;</span><br><span class="line">                                            &lt;Storyboard&gt;</span><br><span class="line">                                                &lt;ColorAnimation Storyboard.TargetName=<span class="string">&quot;BorderBrush1&quot;</span> Storyboard.TargetProperty=<span class="string">&quot;Color&quot;</span> To=<span class="string">&quot;Blue&quot;</span>/&gt;</span><br><span class="line">                                            &lt;/Storyboard&gt;</span><br><span class="line">                                        &lt;/VisualState&gt;</span><br><span class="line">                                        </span><br><span class="line">                                    &lt;/VisualStateGroup&gt;</span><br><span class="line">                                &lt;/VisualStateManager.VisualStateGroups&gt;</span><br><span class="line"></span><br><span class="line">                                &lt;Border.Background&gt;</span><br><span class="line">                                    &lt;SolidColorBrush x:Name=<span class="string">&quot;BorderBrush1&quot;</span></span><br><span class="line">                                                     Color=<span class="string">&quot;Black&quot;</span>/&gt;</span><br><span class="line">                                &lt;/Border.Background&gt;</span><br><span class="line">                                &lt;Grid&gt;</span><br><span class="line">                                    &lt;Ellipse x:Name=<span class="string">&quot;ellipse20&quot;</span> Width=<span class="string">&quot;&#123;Binding Width&#125;&quot;</span> Height=<span class="string">&quot;&#123;Binding Height&#125;&quot;</span></span><br><span class="line">                                             Fill=<span class="string">&quot;&#123;Binding Background&#125;&quot;</span></span><br><span class="line">                                             Stroke=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                    &lt;TextBlock Margin=<span class="string">&quot;5,0,0,0&quot;</span> FontSize=<span class="string">&quot;50&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span></span><br><span class="line">                                               Text=<span class="string">&quot;&#123;Binding&#125;&quot;</span>/&gt;</span><br><span class="line">                                    &lt;TextBlock FontSize=<span class="string">&quot;50&quot;</span> Foreground=<span class="string">&quot;Red&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Text=<span class="string">&quot;&#123;Binding&#125;&quot;</span>/&gt;</span><br><span class="line">                                    </span><br><span class="line">                                &lt;/Grid&gt;</span><br><span class="line">                            &lt;/Border&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/Button.Template&gt;</span><br><span class="line">                &lt;/Button&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DataTemplate1&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    </span><br><span class="line">                    &lt;Button x:Name=<span class="string">&quot;singlePersonButton&quot;</span> Click=<span class="string">&quot;singlePersonButton_Click&quot;</span>  ContentTemplate=<span class="string">&quot;&#123;StaticResource PersonNameDataTemplate&#125;&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DataTemplate2&quot;</span>&gt;</span><br><span class="line">                &lt;ItemsControl x:Name=<span class="string">&quot;itemsControl&quot;</span> ItemTemplate=<span class="string">&quot;&#123;StaticResource PersonNameDataTemplate&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DataTemplate3&quot;</span>&gt;</span><br><span class="line">                &lt;ItemsControl x:Name=<span class="string">&quot;itemsControl1&quot;</span> ItemTemplate=<span class="string">&quot;&#123;StaticResource PersonNameDataTemplate&#125;&quot;</span> Style=<span class="string">&quot;&#123;StaticResource ItemsControlStyle&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;DataTemplate4&quot;</span>&gt;</span><br><span class="line">                &lt;ListBox x:Name=<span class="string">&quot;listbox&quot;</span> ItemTemplate=<span class="string">&quot;&#123;StaticResource dataTemplateDefaultKey&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot; Binding&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Background=<span class="string">&quot;&#123;ThemeResource ApplicationPageBackgroundThemeBrush&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Title&#125;&quot;</span> Margin=<span class="string">&quot;12,100,0,28&quot;</span></span><br><span class="line">                               FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ElementNameBinding&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;圆形的半径会根据slider控件的值而改变&quot;</span>/&gt;</span><br><span class="line">                    &lt;Slider Name=<span class="string">&quot;slider1&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;半径为:&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Name=<span class="string">&quot;txtblk&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider1,Path=Value&#125;&quot;</span> FontSize=<span class="string">&quot;48&quot;</span>/&gt;</span><br><span class="line">                    &lt;Ellipse Height=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Width=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Fill=<span class="string">&quot;Red&quot;</span> Stroke=<span class="string">&quot;Black&quot;</span> StrokeThickness=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;BindingMode&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Slider x:Name=<span class="string">&quot;slider&quot;</span> Value=<span class="string">&quot;50&quot;</span> Maximum=<span class="string">&quot;400&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--OneTime--&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;41&quot;</span> Text=<span class="string">&quot;OneTime&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;112&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=OneTime&#125;&quot;</span> Width=<span class="string">&quot;269&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;46&quot;</span> Text=<span class="string">&quot;OneWay&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;99&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--OneWay--&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=OneWay&#125;&quot;</span> Width=<span class="string">&quot;269&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock Height=<span class="string">&quot;40&quot;</span> FontSize=<span class="string">&quot;25&quot;</span> Text=<span class="string">&quot;TwoWay&quot;</span> VerticalAlignment=<span class="string">&quot;Top&quot;</span> Width=<span class="string">&quot;94&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--TwoWay--&gt;</span><br><span class="line">                    &lt;TextBox Height=<span class="string">&quot;72&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value,Mode=TwoWay&#125;&quot;</span> Width=<span class="string">&quot;268&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;43&quot;</span> Text=<span class="string">&quot;slider的值:&quot;</span>/&gt;</span><br><span class="line">                    &lt;TextBlock FontSize=<span class="string">&quot;25&quot;</span> Height=<span class="string">&quot;43&quot;</span> Text=<span class="string">&quot;&#123;Binding ElementName=slider,Path=Value&#125;&quot;</span> Width=<span class="string">&quot;185&quot;</span>/&gt;</span><br><span class="line">                    </span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;INotifyPropertyChanged&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Title&#125;&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                    &lt;Button Content=<span class="string">&quot;改变数据源的数据&quot;</span> Click=<span class="string">&quot;Button_Click_19&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;IValueConverter&quot;</span>&gt;</span><br><span class="line">                &lt;Grid&gt;</span><br><span class="line">                    &lt;StackPanel Margin=<span class="string">&quot;12,0,12,0&quot;</span> DataContext=<span class="string">&quot;&#123;StaticResource clock&#125;&quot;</span>&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;30&quot;</span> Text=<span class="string">&quot;&#123;Binding Hour,Converter=&#123;StaticResource booleanToDayString&#125;&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;30&quot;</span> Text=<span class="string">&quot;现在的时间是:&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Hour&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;小时&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Minute&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;分钟&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;&#123;Binding Second&#125;&quot;</span>/&gt;</span><br><span class="line">                        &lt;TextBlock FontSize=<span class="string">&quot;20&quot;</span> Text=<span class="string">&quot;秒&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;BindingItemTemplate&quot;</span>&gt;</span><br><span class="line">                &lt;ListView x:Name=<span class="string">&quot;listviewItemtemplate&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;!--列表的ItemTemplate属性是一个DataTemplate类型--&gt;</span><br><span class="line">                        &lt;!--创建一个DataTemplate的元素对象--&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Background=<span class="string">&quot;Gray&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                                &lt;!--绑定Food类的IconUri属性--&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;&#123;Binding IconUri&#125;&quot;</span> Stretch=<span class="string">&quot;None&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> FontSize=<span class="string">&quot;40&quot;</span> Margin=<span class="string">&quot;24 0 24 0&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Description&#125;&quot;</span> FontSize=<span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ObservableCollection&quot;</span>&gt;</span><br><span class="line">                &lt;Grid&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;StackPanel Margin=<span class="string">&quot;12,60,0,28&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;AddItem&quot;</span> Click=<span class="string">&quot;Button_Click_20&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;RemoveItem&quot;</span> Click=<span class="string">&quot;Button_Click_21&quot;</span>/&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                    &lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;ListView x:Name=<span class="string">&quot;Obser&quot;</span>&gt;</span><br><span class="line">                            &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                                &lt;DataTemplate&gt;</span><br><span class="line">                                    &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderId&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                        &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Width=<span class="string">&quot;280&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/StackPanel&gt;</span><br><span class="line">                                &lt;/DataTemplate&gt;</span><br><span class="line">                            &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;/ListView&gt;</span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;IList&quot;</span>&gt;</span><br><span class="line">                &lt;ListView x:Name=<span class="string">&quot;Ilist&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span> Margin=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderId&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding OrderName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Width=<span class="string">&quot;280&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                &lt;ItemsControl x:Name=<span class="string">&quot;itemsControl2&quot;</span>&gt;</span><br><span class="line">                    &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">                &lt;/ItemsControl&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ScrollItemsControl&quot;</span>&gt;</span><br><span class="line">                &lt;ItemsControl x:Name=<span class="string">&quot;ItemsControl3&quot;</span>&gt;</span><br><span class="line">                    &lt;ItemsControl.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                            &lt;ScrollViewer&gt;</span><br><span class="line">                                &lt;ItemsPresenter/&gt;</span><br><span class="line">                            &lt;/ScrollViewer&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.Template&gt;</span><br><span class="line">                    &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span></span><br><span class="line">                                           FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">                &lt;/ItemsControl&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ListBox&quot;</span>&gt;</span><br><span class="line">                &lt;ListBox ItemsSource=<span class="string">&quot;&#123;Binding Items&#125;&quot;</span> SelectionChanged=<span class="string">&quot;ListBox_SelectionChanged&quot;</span>&gt;</span><br><span class="line">                    &lt;ListBox.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                            &lt;ScrollViewer&gt;</span><br><span class="line">                                &lt;StackPanel&gt;</span><br><span class="line">                                    &lt;ItemsPresenter/&gt;</span><br><span class="line">                                    &lt;Button Content=<span class="string">&quot;加载更多&quot;</span> Click=<span class="string">&quot;Button_Click_22&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> Margin=<span class="string">&quot;12&quot;</span>/&gt;</span><br><span class="line">                                    </span><br><span class="line">                                &lt;/StackPanel&gt;</span><br><span class="line">                            &lt;/ScrollViewer&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/ListBox.Template&gt;</span><br><span class="line">                    &lt;ListBox.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListBox.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListBox&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ListView&quot;</span>&gt;</span><br><span class="line">                &lt;ListView x:Name=<span class="string">&quot;listView&quot;</span> ItemsSource=<span class="string">&quot;&#123;Binding Items&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span></span><br><span class="line">                                           FontSize=<span class="string">&quot;30&quot;</span> Margin=<span class="string">&quot;30,0,0,0&quot;</span>/&gt;</span><br><span class="line">                                </span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;GridView&quot;</span>&gt;</span><br><span class="line">                &lt;GridView x:Name=<span class="string">&quot;gridView&quot;</span>&gt;</span><br><span class="line">                    &lt;GridView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding FirstName&#125;&quot;</span> </span><br><span class="line">                                           Width=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding LastName&#125;&quot;</span> </span><br><span class="line">                                           Width=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/GridView.ItemTemplate&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;GridView.ItemContainerStyle&gt;</span><br><span class="line">                        &lt;Style TargetType=<span class="string">&quot;GridViewItem&quot;</span>&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;BorderBrush&quot;</span> Value=<span class="string">&quot;Gray&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;BorderThickness&quot;</span> Value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;HorizontalContentAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                            &lt;Setter Property=<span class="string">&quot;VerticalContentAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                        &lt;/Style&gt;</span><br><span class="line">                    &lt;/GridView.ItemContainerStyle&gt;</span><br><span class="line">                &lt;/GridView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;SemanticZoom&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.Resources&gt;</span><br><span class="line">                        &lt;!--创建数据源对象,注意ItemContent属性就是数据源中真正的基础数据的列表属性,必须设置该属性的值数据源才能定位到实际绑定的数据实体对象--&gt;</span><br><span class="line">                        &lt;CollectionViewSource x:Name=<span class="string">&quot;itemcollectSource&quot;</span> IsSourceGrouped=<span class="string">&quot;True&quot;</span> ItemsPath=<span class="string">&quot;ItemContent&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.Resources&gt;</span><br><span class="line">                    &lt;SemanticZoom x:Name=<span class="string">&quot;semanticZoom&quot;</span>&gt;</span><br><span class="line">                        &lt;SemanticZoom.ZoomedInView&gt;</span><br><span class="line">                            &lt;!--在这里放置GridView(或ListView)以表示放大视图--&gt;</span><br><span class="line">                            &lt;ListView x:Name=<span class="string">&quot;inView&quot;</span>&gt;</span><br><span class="line">                                &lt;ListView.GroupStyle&gt;</span><br><span class="line">                                    &lt;GroupStyle&gt;</span><br><span class="line">                                        &lt;!--用于显示列表有的数据项的模板--&gt;</span><br><span class="line">                                        &lt;GroupStyle.HeaderTemplate&gt;</span><br><span class="line">                                            &lt;DataTemplate&gt;</span><br><span class="line">                                                &lt;Border Background=<span class="string">&quot;Red&quot;</span> Height=<span class="string">&quot;80&quot;</span>&gt;</span><br><span class="line">                                                    &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Key&#125;&quot;</span> FontSize=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                                                &lt;/Border&gt;</span><br><span class="line">                                            &lt;/DataTemplate&gt;</span><br><span class="line">                                        &lt;/GroupStyle.HeaderTemplate&gt;</span><br><span class="line">                                    &lt;/GroupStyle&gt;</span><br><span class="line">                                &lt;/ListView.GroupStyle&gt;</span><br><span class="line">                                &lt;!--用于显示列表的数据项的模板--&gt;</span><br><span class="line">                                &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                                    &lt;DataTemplate&gt;</span><br><span class="line">                                        &lt;StackPanel&gt;</span><br><span class="line">                                            &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Title&#125;&quot;</span> Height=<span class="string">&quot;40&quot;</span> FontSize=<span class="string">&quot;30&quot;</span>/&gt;</span><br><span class="line">                                        &lt;/StackPanel&gt;</span><br><span class="line">                                    &lt;/DataTemplate&gt;</span><br><span class="line">                                &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                            &lt;/ListView&gt;</span><br><span class="line">                        &lt;/SemanticZoom.ZoomedInView&gt;</span><br><span class="line">                        &lt;SemanticZoom.ZoomedOutView&gt;</span><br><span class="line">                            &lt;!--在这里放置GridView(或ListView)以表示缩小视图--&gt;</span><br><span class="line">                            &lt;GridView x:Name=<span class="string">&quot;outView&quot;</span>&gt;</span><br><span class="line">                                &lt;!--用于显示弹出的分组列表视图的数据项的模板--&gt;</span><br><span class="line">                                &lt;GridView.ItemTemplate&gt;</span><br><span class="line">                                    &lt;DataTemplate&gt;</span><br><span class="line">                                        &lt;Border Height=<span class="string">&quot;60&quot;</span>&gt;</span><br><span class="line">                                            &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Group.Key&#125;&quot;</span> FontSize=<span class="string">&quot;24&quot;</span>/&gt;</span><br><span class="line">                                        &lt;/Border&gt;</span><br><span class="line">                                    &lt;/DataTemplate&gt;</span><br><span class="line">                                &lt;/GridView.ItemTemplate&gt;</span><br><span class="line">&lt;!--列表布局模板--&gt;</span><br><span class="line">                                &lt;GridView.ItemsPanel&gt;</span><br><span class="line">                                    &lt;ItemsPanelTemplate&gt;</span><br><span class="line">                                        &lt;WrapGrid ItemWidth=<span class="string">&quot;100&quot;</span> ItemHeight=<span class="string">&quot;75&quot;</span> MaximumRowsOrColumns=<span class="string">&quot;1&quot;</span> VerticalChildrenAlignment=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/ItemsPanelTemplate&gt;</span><br><span class="line">                                &lt;/GridView.ItemsPanel&gt;</span><br><span class="line">                                &lt;!--列表项目容器的样式设置--&gt;</span><br><span class="line">                                &lt;GridView.ItemContainerStyle&gt;</span><br><span class="line">                                    &lt;Style TargetType=<span class="string">&quot;GridViewItem&quot;</span>&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;BorderBrush&quot;</span> Value=<span class="string">&quot;Gray&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;Background&quot;</span> Value=<span class="string">&quot;Red&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;BorderThickness&quot;</span> Value=<span class="string">&quot;3&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;HorizontalAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                        &lt;Setter Property=<span class="string">&quot;VerticalAlignment&quot;</span> Value=<span class="string">&quot;Center&quot;</span>/&gt;</span><br><span class="line">                                    &lt;/Style&gt;</span><br><span class="line">                                &lt;/GridView.ItemContainerStyle&gt;</span><br><span class="line">                            &lt;/GridView&gt;</span><br><span class="line">                        &lt;/SemanticZoom.ZoomedOutView&gt;</span><br><span class="line">                    &lt;/SemanticZoom&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;VirtualDataList&quot;</span>&gt;</span><br><span class="line">                &lt;ListView ItemsSource=<span class="string">&quot;&#123;Binding Data&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> Height=<span class="string">&quot;50&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ItemsStackPanel&quot;</span>&gt;</span><br><span class="line">                &lt;ItemsControl x:Name=<span class="string">&quot;imageList&quot;</span>&gt;</span><br><span class="line">                    &lt;ItemsControl.ItemsPanel&gt;</span><br><span class="line">                        &lt;ItemsPanelTemplate&gt;</span><br><span class="line">                            &lt;!--设置横向布局--&gt;</span><br><span class="line">                            &lt;ItemsStackPanel Orientation=<span class="string">&quot;Horizontal&quot;</span>/&gt;</span><br><span class="line">                        &lt;/ItemsPanelTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.ItemsPanel&gt;</span><br><span class="line">                    &lt;ItemsControl.Template&gt;</span><br><span class="line">                        &lt;ControlTemplate TargetType=<span class="string">&quot;ItemsControl&quot;</span>&gt;</span><br><span class="line">                            &lt;!--设置水平滚动--&gt;</span><br><span class="line">                            &lt;ScrollViewer ScrollViewer.HorizontalScrollBarVisibility=<span class="string">&quot;Visible&quot;</span> ScrollViewer.VerticalScrollBarVisibility=<span class="string">&quot;Disabled&quot;</span>&gt;</span><br><span class="line">                                &lt;!--&lt;StackPanel&gt;--&gt;</span><br><span class="line">                                    &lt;ItemsPresenter/&gt;</span><br><span class="line">                                &lt;!--&lt;/StackPanel&gt;--&gt;</span><br><span class="line">                            &lt;/ScrollViewer&gt;</span><br><span class="line">                        &lt;/ControlTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.Template&gt;</span><br><span class="line">                    &lt;ItemsControl.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                           </span><br><span class="line">                                &lt;StackPanel&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;&#123;Binding Image&#125;&quot;</span> Width=<span class="string">&quot;144&quot;</span> Height=<span class="string">&quot;240&quot;</span> Stretch=<span class="string">&quot;Uniform&quot;</span>/&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding ImageName&#125;&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                            </span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ItemsControl.ItemTemplate&gt;</span><br><span class="line">                &lt;/ItemsControl&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ImageShow&quot;</span>&gt;</span><br><span class="line">                &lt;ListView x:Name=<span class="string">&quot;InternetImage&quot;</span>&gt;</span><br><span class="line">                    &lt;ListView.ItemTemplate&gt;</span><br><span class="line">                        &lt;DataTemplate&gt;</span><br><span class="line">                            &lt;StackPanel&gt;</span><br><span class="line">                                &lt;TextBlock Text=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span> Height=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                                &lt;Image Source=<span class="string">&quot;&#123;Binding ImageSource&#125;&quot;</span> Width=<span class="string">&quot;200&quot;</span> Height=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                            &lt;/StackPanel&gt;</span><br><span class="line">                        &lt;/DataTemplate&gt;</span><br><span class="line">                    &lt;/ListView.ItemTemplate&gt;</span><br><span class="line">                &lt;/ListView&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Polyline&quot;</span>&gt;</span><br><span class="line">                &lt;Polyline Stroke=<span class="string">&quot;LightBlue&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span> Height=<span class="string">&quot;150&quot;</span> Points=<span class="string">&quot;0,10 50,40 100,90 150,50 200,50 250,10 300,100 350,30 400,0&quot;</span>/&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;Polygon&quot;</span>&gt;</span><br><span class="line">                &lt;Polygon Fill=<span class="string">&quot;AliceBlue&quot;</span> StrokeThickness=<span class="string">&quot;5&quot;</span> Height=<span class="string">&quot;150&quot;</span> Stroke=<span class="string">&quot;Red&quot;</span> Points=<span class="string">&quot;0,150 0,10 50,40 100,90 150,50 200,50 250,10 300,100 350,30 400,0 400,150&quot;</span>/&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;GetLineChartPointCollection&quot;</span>&gt;</span><br><span class="line">                &lt;Grid Margin=<span class="string">&quot;12,0,12,0&quot;</span>&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;Auto&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;Grid x:Name=<span class="string">&quot;chartCanvas&quot;</span> Height=<span class="string">&quot;400&quot;</span> HorizontalAlignment=<span class="string">&quot;Center&quot;</span> VerticalAlignment=<span class="string">&quot;Center&quot;</span>&gt;</span><br><span class="line">                        </span><br><span class="line">                    &lt;/Grid&gt;</span><br><span class="line">                    &lt;StackPanel Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;折线图&quot;</span> Click=<span class="string">&quot;Button_Click_23&quot;</span>/&gt;</span><br><span class="line">                        &lt;Button Content=<span class="string">&quot;区域图&quot;</span> Click=<span class="string">&quot;Button_Click_24&quot;</span>/&gt;</span><br><span class="line">                    &lt;/StackPanel&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;PiePlotter&quot;</span>&gt;</span><br><span class="line">                &lt;StackPanel&gt;</span><br><span class="line">                    &lt;controls:PiePlotter x:Name=<span class="string">&quot;piePlotter&quot;</span> Width=<span class="string">&quot;400&quot;</span> Height=<span class="string">&quot;400&quot;</span> PieWidth=<span class="string">&quot;400&quot;</span> HoleSize=<span class="string">&quot;0.2&quot;</span>/&gt;</span><br><span class="line">                &lt;/StackPanel&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">            &lt;PivotItem Header=<span class="string">&quot;ChartCanvas&quot;</span>&gt;</span><br><span class="line">                &lt;Grid&gt;</span><br><span class="line">                    &lt;Grid.RowDefinitions&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">                        &lt;RowDefinition Height=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Grid.RowDefinitions&gt;</span><br><span class="line">                    &lt;!--图例面板--&gt;</span><br><span class="line">                    &lt;Canvas x:Name=<span class="string">&quot;legendCanvas&quot;</span> Height=<span class="string">&quot;80&quot;</span> Width=<span class="string">&quot;200&quot;</span>/&gt;</span><br><span class="line">                    &lt;!--坐标轴面板--&gt;</span><br><span class="line">                    &lt;Canvas x:Name=<span class="string">&quot;textCanvas&quot;</span> Width=<span class="string">&quot;300&quot;</span> Height=<span class="string">&quot;300&quot;</span> Grid.Row=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">                        &lt;!--线性图形面板--&gt;</span><br><span class="line">                        &lt;Canvas x:Name=<span class="string">&quot;linechartCanvas&quot;</span> Width=<span class="string">&quot;300&quot;</span> Height=<span class="string">&quot;300&quot;</span>/&gt;</span><br><span class="line">                    &lt;/Canvas&gt;</span><br><span class="line">                &lt;/Grid&gt;</span><br><span class="line">            &lt;/PivotItem&gt;</span><br><span class="line">        &lt;/Pivot&gt;</span><br><span class="line">    &lt;/Grid&gt;</span><br><span class="line">   </span><br><span class="line">    &lt;Page.BottomAppBar&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        &lt;!--菜单栏新增按钮跳转到添加购物清单页面--&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;CommandBar Opened=<span class="string">&quot;CommandBar_Opened&quot;</span> Closed=<span class="string">&quot;CommandBar_Closed&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;AppBarButton Label=<span class="string">&quot;新增&quot;</span> Icon=<span class="string">&quot;Add&quot;</span> Click=<span class="string">&quot;AppBarButton_Click_1&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;AppBarButton Label=<span class="string">&quot;buy&quot;</span> Icon=<span class="string">&quot;Shop&quot;</span>/&gt;</span><br><span class="line">            &lt;!--BitmapIcon图标按钮--&gt;</span><br><span class="line">            &lt;AppBarButton Label=<span class="string">&quot;BitmapIcon&quot;</span> Click=<span class="string">&quot;AppBarButton_Click&quot;</span>&gt;</span><br><span class="line">                &lt;AppBarButton.Icon&gt;</span><br><span class="line">                    &lt;BitmapIcon UriSource=<span class="string">&quot;ms-appx:///Assets/questionmark.png&quot;</span>/&gt;</span><br><span class="line">                &lt;/AppBarButton.Icon&gt;</span><br><span class="line">            &lt;/AppBarButton&gt;</span><br><span class="line">            &lt;!--FontIcon图标按钮--&gt;</span><br><span class="line">            &lt;AppBarButton Label=<span class="string">&quot;FontIcon&quot;</span> Click=<span class="string">&quot;AppBarButton_Click&quot;</span>&gt;</span><br><span class="line">                &lt;AppBarButton.Icon&gt;</span><br><span class="line">                    &lt;FontIcon FontFamily=<span class="string">&quot;Candara&quot;</span> Glyph=<span class="string">&quot;&amp;#x03a3;&quot;</span>/&gt;</span><br><span class="line">                &lt;/AppBarButton.Icon&gt;</span><br><span class="line">            &lt;/AppBarButton&gt;</span><br><span class="line">            &lt;!--PathIcon图标按钮--&gt;</span><br><span class="line">            &lt;AppBarButton Label=<span class="string">&quot;PathIcon&quot;</span> Click=<span class="string">&quot;AppBarButton_Click&quot;</span>&gt;</span><br><span class="line">                &lt;AppBarButton.Icon&gt;</span><br><span class="line">                    &lt;PathIcon Data=<span class="string">&quot;F1 M 20,20L 24,10L 24,24L 5,24&quot;</span>/&gt;</span><br><span class="line">                &lt;/AppBarButton.Icon&gt;</span><br><span class="line">            &lt;/AppBarButton&gt;</span><br><span class="line">            &lt;!--文本菜单按钮--&gt;</span><br><span class="line">            &lt;CommandBar.SecondaryCommands&gt;</span><br><span class="line">                &lt;AppBarButton Label=<span class="string">&quot;about&quot;</span> Click=<span class="string">&quot;AppBarButton_Click&quot;</span>/&gt;</span><br><span class="line">            &lt;/CommandBar.SecondaryCommands&gt;</span><br><span class="line">        &lt;/CommandBar&gt;</span><br><span class="line">    &lt;/Page.BottomAppBar&gt;</span><br><span class="line">&lt;/Page&gt;</span><br><span class="line"> /// &lt;summary&gt;</span><br><span class="line">        /// 添加图表</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;exception cref=<span class="string">&quot;NotImplementedException&quot;</span>&gt;&lt;/exception&gt;</span><br><span class="line">        private void <span class="function"><span class="title">AddChart</span></span>()</span><br><span class="line">        &#123;</span><br><span class="line">           //添加报表的网格图形</span><br><span class="line">           cs=new ChartStyleGridlines();</span><br><span class="line">            cs.ChartCanvas = linechartCanvas;</span><br><span class="line">            cs.TextCanvas = textCanvas;</span><br><span class="line">            cs.Title = <span class="string">&quot;Sine and Cosine Chart&quot;</span>;</span><br><span class="line">            cs.Xmin = 0;</span><br><span class="line">            cs.Xmax = 7;</span><br><span class="line">            cs.Ymin = -1.5;</span><br><span class="line">            cs.Ymax = 1.5;</span><br><span class="line">            cs.YTick = 0.5;</span><br><span class="line">            cs.GridlinePattern = GridlinePatternEnum.Dot;</span><br><span class="line">            cs.GridlineColor = new SolidColorBrush(Colors.Black);</span><br><span class="line">            cs.AddChartStyle(new TextBlock());</span><br><span class="line">            //画Sine曲线图形</span><br><span class="line">            //ds = new DataSeries();</span><br><span class="line">            ds.LineColor=new SolidColorBrush(Colors.Black);</span><br><span class="line">            ds.LineThickness = 1;</span><br><span class="line">            ds.SeriesName = <span class="string">&quot;Sine&quot;</span>;</span><br><span class="line">            //计算出图形中的一系列点,然后用线段连接起来</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 36; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                double x = i / 5.0;</span><br><span class="line">                double y = Math.Sin(x);</span><br><span class="line">                ds.LineSeries.Points.Add(new Point(x, y));</span><br><span class="line">            &#125;</span><br><span class="line">            dc.DataList.Add(ds);</span><br><span class="line">            //画cosine曲线图形</span><br><span class="line">            ds=new DataSeries();</span><br><span class="line">            ds.LineColor=new SolidColorBrush(Colors.Red);</span><br><span class="line">            ds.SeriesName = <span class="string">&quot;Cosine&quot;</span>;</span><br><span class="line">            ds.LinePattern = GridlinePatternEnum.DashDot;</span><br><span class="line">            ds.LineThickness = 2;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 36; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                double x = i / 5.0;</span><br><span class="line">                double y = Math.Cos(x);</span><br><span class="line">                ds.LineSeries.Points.Add(new Point(x,y));</span><br><span class="line">            &#125;</span><br><span class="line">            dc.DataList.Add(ds);</span><br><span class="line">            //画sine^2曲线图形</span><br><span class="line">            ds = new DataSeries();</span><br><span class="line">            ds.LineColor = new SolidColorBrush(Colors.Green);</span><br><span class="line">            ds.SeriesName = <span class="string">&quot;Sine^2&quot;</span>;</span><br><span class="line">            ds.LinePattern = GridlinePatternEnum.Dot;</span><br><span class="line">            ds.LineThickness = 2;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0;  i&lt; 36; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                double x = i / 5.0;</span><br><span class="line">                double y = Math.Sin(x)*Math.Sin(x);</span><br><span class="line">                ds.LineSeries.Points.Add((Point)new Point(x,y));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            dc.DataList.Add(ds);</span><br><span class="line">            dc.AddLines(linechartCanvas,cs);</span><br><span class="line">            //添加图例</span><br><span class="line">            lg.legendCanvas = legendCanvas;</span><br><span class="line">            lg.IsLegend = <span class="literal">true</span>;</span><br><span class="line">            lg.IsBorder = <span class="literal">true</span>;</span><br><span class="line">            lg.AddLegend(cs,dc);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //网格图形</span><br><span class="line">        private ChartStyleGridlines cs;</span><br><span class="line">        //图例</span><br><span class="line">        private Legend lg = new Legend();</span><br><span class="line">        //图形数据集合</span><br><span class="line">        private DataCollection dc = new DataCollection();</span><br><span class="line">        //线性数据图形</span><br><span class="line">        private DataSeries ds=new DataSeries();</span><br></pre></td></tr></table></figure>
<p>13.4.QuickCharts图表控件库解析<br>QuickCharts图表控件是Amcharts公司提供的一个开源图表控件库,这个控件库支持WPF,Silverlight和Windows平台,源码可以从Github网站(<a target="_blank" rel="noopener" href="http://github.com/ailon/amCharts-Qucik-Charts)%E4%B8%8B%E8%BD%BD">http://github.com/ailon/amCharts-Qucik-Charts)下载</a>.<br>QuickCharts图表控件封装了一些常用的图表控件如饼图,柱形图,折线图,区域图等,可以直接再项目中进行其提供的图表控件来创建图表.<br>13.41.QuickCharts项目结构分析<br>QuickCharts控件库包含了两类图表,一种是饼图图表PieChart,另外一种是连续图表SerialChart.连续图包含了线形,柱形,区域图等图形.<br>![1.png]<br>![2.png]<br>13.42.饼图图表PieChart的实现逻辑<br>饼图PieChart是由多个饼图切片Slice控件,一个图例控件Legend控件和一个标注Balloon控件组成.</p>

        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "https://drfengyu.github.io/qm/50fedeca.html",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "https://drfengyu.github.io/qm/50fedeca.html";
            const title         = "「Windows通用应用程序开发(三)」";
            const excerpt       = `8.1变化特效当使用Canvas布局时,可以使用Canvas.Left和Canvas.Top属性改变一个对象相对Canvas的位置,当使用Grid或StackPanel布局时,可以使用Margin属性声明元素的各方向间距,然而在这些属...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/UWP/" rel="tag">UWP</a>
                </div>
                <div class="pull-date">
                <span>最后编辑：2023-11-07</span>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" 深入浅出Windows应用程序开发(二)" href="/qm/5bdeb856.html">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" 深入浅出Windows应用开发(四)" href="/qm/8cfe4bab.html">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
        <link rel="stylesheet" href="https://unpkg.com/gitalk@1/dist/gitalk.css">
<div id="gitalk-container" class="post-comments lazy-load" style="padding-left:2rem; padding-right:2rem;"></div>
<script>
    var load_comm = () => {
        const init = () => {
            console.log('Gitalk loading...');
            const gitalk = new Gitalk(Object.assign({
                id: '/qm/50fedeca.html',
                path: '/qm/50fedeca.html'
            }, JSON.parse('{"clientID":"67075d9ed7922a3c9791","clientSecret":"50ce067bd2bb3d9e9e48d56804da1a6d25e7bf16","repo":"dryunment","owner":"Drfengling","admin":["Drfengling"],"distractionFreeMode":false}')));

            gitalk.render('gitalk-container');
        }
        if (typeof Gitalk === 'undefined') {
            const src = 'https://unpkg.com/gitalk@1/dist/gitalk.min.js';
            $.getScript(src, init);
        } else {
            init();
        }
    };
load_comm();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://github.com/gitalk/gitalk">comments powered by Gitalk.</a></noscript>
    
</article>

        

            </section>

        
                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                28
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                8
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                15
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix">
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar"></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E7%BC%96%E7%A8%8B"><span class="toc-text">动画编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%92%8C%E6%A8%A1%E6%9D%BF"><span class="toc-text">样式和模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E8%A1%A8%E7%BC%96%E7%A8%8B"><span class="toc-text">图表编程</span></a></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Asp-Net/">Asp.Net</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C#</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WPF/">WPF</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E6%9C%8D%E5%8A%A1/">Web服务</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">Windows应用开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/">Windows应用程序开发</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E8%AE%B0/">博客日记</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BA%BF%E4%B8%8A%E8%AF%84%E8%AE%BA/">线上评论</a><span class="category-list-count">2</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/Aplayer/" style="font-size: 0.6em;">Aplayer</a> <a href="/tags/C/" style="font-size: 0.6em;">C#</a> <a href="/tags/GitHub/" style="font-size: 0.7em;">GitHub</a> <a href="/tags/Gitalk/" style="font-size: 0.6em;">Gitalk</a> <a href="/tags/Hexo/" style="font-size: 0.7em;">Hexo</a> <a href="/tags/Nginx/" style="font-size: 0.6em;">Nginx</a> <a href="/tags/Nodejs/" style="font-size: 0.7em;">Nodejs</a> <a href="/tags/UWP/" style="font-size: 0.75em;">UWP</a> <a href="/tags/WCF/" style="font-size: 0.7em;">WCF</a> <a href="/tags/WPF/" style="font-size: 0.8em;">WPF</a> <a href="/tags/livere/" style="font-size: 0.6em;">livere</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/" style="font-size: 0.6em;">博客美化</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 0.6em;">日记</a> <a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 0.6em;">视频</a> <a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 0.65em;">音乐</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/qm/4a17b156.html"><i class="fa  fa-book"></i> Hello World</a>
            
          
        
          
          
            <a class="list-group-item" href="/qm/c33edf33.html"><i class="fa  fa-book"></i> AspNet开发1</a>
            
          
        
          
          
            <a class="list-group-item" href="/qm/8cfe4bab.html"><i class="fa  fa-book"></i> 深入浅出Windows应用开发(四)</a>
            
          
        
          
          
            <a class="list-group-item" href="/qm/50fedeca.html"><i class="fa  fa-book"></i> Windows通用应用程序开发(三)</a>
            
          
        
          
          
            <a class="list-group-item" href="/qm/5bdeb856.html"><i class="fa  fa-book"></i> 深入浅出Windows应用程序开发(二)</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        <li><a href="mailto:Drfengling@163.com"><i class="fa fa-envelope"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://t.me/CandyUnion"><i class="fa fa-telegram"></i></a></li>
                        
                        
                        
                        <li><a target="_blank" rel="me" href="https://nya.one/@Drfengling"><i class="fa fa fa-share-alt-square"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://github.com/Drfengling"><i class="fa fa-github"></i></a></li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2023 浅梦博客 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by 浅梦风凌.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            <li><a href="https://beian.miit.gov.cn" rel="external nofollow" target="_blank">豫ICP备2022011311号</a></li>
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://unpkg.com/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>

  
<script src="/fancybox/jquery.fancybox.min.js"></script>



    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.min.js"></script>
    </div>



<script defer src="https://unpkg.com/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>

</html>